[{"detail":{"_extra":[],"attrs":[{"code":"account_id","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"reference","data_type_id":"7","entity$code":"users","entity_id":"22","entity_link$code":"accounts","entity_link_id":"1","hide_field":"0","id":"222","is_default_current_user":"0","is_formula":"0","len":"0","rq":"0","rule$code":"set null","rule_id":"1","short_title":"Account","show_col":"0","sys$uuid":"4b26575e-d365-479e-a9ef-1ae30c3dec87","title":"Account","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"avatar_url","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","id":"2408","len":"250","rq":"0","short_title":"Avatar URL","sys$uuid":"47c1f07a-db21-4612-b8ae-763bbdc15218","title":"Avatar URL","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"bi_address_id","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"reference","data_type_id":"7","entity$code":"users","entity_id":"22","entity_link$code":"bi_addresses","entity_link_id":"12","id":"466","len":"0","rq":"0","rule$code":"restrict","rule_id":"3","short_title":"BI Address","sys$uuid":"356d5125-f573-4cf7-a599-d7d256c42a5c","title":"BI Address","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"bi_consignee_id","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"reference","data_type_id":"7","entity$code":"users","entity_id":"22","entity_link$code":"accounts","entity_link_id":"1","hide_field":"0","id":"467","is_default_current_user":"0","is_formula":"0","len":"0","rq":"0","rule$code":"set null","rule_id":"1","short_title":"Грузополучатель","show_col":"0","sys$uuid":"14c65b0c-88ee-4679-8cc2-9b816ebc572a","title":"Грузополучатель","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"bill_account","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","id":"900","len":"20","rq":"0","short_title":"billing account","sys$uuid":"906d31c6-4798-4f93-a602-d0a83c82bc90","title":"Billing account","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"code","created_at":"2018-12-18 18:12:55","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","id":"9040","len":"30","rq":"0","short_title":"Code","sys$uuid":"9404c118-0971-41c0-99be-ebe77f35b855","title":"Code","updated_at":"2019-10-16 17:42:32","uq":"1"},{"code":"created_at","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"current_datetime","data_type_id":"15","entity$code":"users","entity_id":"22","id":"2411","len":"0","rq":"0","short_title":"Created At","sys$uuid":"b9c31e31-69ab-435b-b2e6-b5c34fd46dd7","title":"Created At","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"created_by","created_at":"2018-12-18 18:12:55","created_by":"1","data_type$code":"reference","data_type_id":"7","entity$code":"users","entity_id":"22","entity_link$code":"users","entity_link_id":"22","id":"9041","is_default_current_user":"1","len":"0","rq":"0","short_title":"Created By","show_col":"0","sys$uuid":"e22996ee-4c2c-4ab2-961d-b811b3d35aee","title":"Created By","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"dep_id","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"reference","data_type_id":"7","entity$code":"users","entity_id":"22","entity_link$code":"deps","entity_link_id":"157","id":"1432","is_default_current_user":"0","len":"0","rq":"0","rule$code":"restrict","rule_id":"3","short_title":"CRM Department","sys$uuid":"a532ee96-b95b-4854-b599-d304f3064613","title":"CRM Department","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"device_token","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","id":"220","len":"250","rq":"0","short_title":"Device Token","sys$uuid":"d9cbdc13-befe-4237-9f69-26bf84c1238b","title":"Device Token","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"email","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","hide_field":"0","id":"118","is_formula":"0","len":"200","rq":"0","short_title":"Email","show_col":"1","sys$uuid":"1ddd8a2f-5958-4e6f-bea8-202a94cb877c","title":"Email","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"id","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"serial","data_type_id":"8","entity$code":"users","entity_id":"22","id":"116","len":"0","rq":"0","short_title":"ID","sys$uuid":"c161a966-0ade-4c55-b93e-3a2202105bea","title":"ID","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"is_locked","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"boolean","data_type_id":"9","entity$code":"users","entity_id":"22","hide_field":"0","id":"4578","is_formula":"0","len":"0","rq":"0","short_title":"Is Locked","show_col":"0","sys$uuid":"145e31c7-bbc8-4999-969a-1598389dda4b","title":"Is Locked","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"jobtitle","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","id":"3041","len":"100","rq":"0","short_title":"Job Title","sys$uuid":"c7d65036-398c-4a4b-8042-2f1a3ee0ad12","title":"Job Title","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"ldap_id","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"reference","data_type_id":"7","entity$code":"users","entity_id":"22","entity_link$code":"ldaps","entity_link_id":"298","id":"2008","is_default_current_user":"0","len":"0","rq":"0","rule$code":"restrict","rule_id":"3","short_title":"LDAP","sys$uuid":"c7942d3a-8b64-45a6-abf6-314954421170","title":"LDAP","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"lm_user_id","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"reference","data_type_id":"7","entity$code":"users","entity_id":"22","entity_link$code":"users","entity_link_id":"22","id":"2977","is_default_current_user":"0","len":"0","rq":"0","rule$code":"set null","rule_id":"1","short_title":"Line Manager","sys$uuid":"02552998-c8fd-4cef-9d82-702cd5e3dcef","title":"Line Manager","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"login","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","hide_field":"0","id":"3040","is_formula":"0","len":"64","restrict_edit":"0","rq":"0","short_title":"Login","show_col":"1","sys$uuid":"05caf36a-afb6-4bd7-9868-9452d6777362","title":"Login","updated_at":"2019-10-16 17:42:32","uq":"1"},{"code":"mobile","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","id":"1549","len":"20","rq":"0","short_title":"Mobile","sys$uuid":"ab77c9d0-eeac-4a57-a1b6-4bf0afa88a7e","title":"Mobile","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"title","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"users","entity_id":"22","hide_field":"0","id":"117","is_formula":"0","len":"100","rq":"1","short_title":"Title","show_col":"1","sys$uuid":"8df70a10-886b-4bf8-a03b-8be8224807b0","title":"Title","updated_at":"2019-10-16 17:42:32","uq":"0"},{"code":"updated_at","created_at":"2017-02-14 10:01:20","created_by":"1","data_type$code":"current_and_on_update_datetime","data_type_id":"16","entity$code":"users","entity_id":"22","id":"2412","len":"0","rq":"0","short_title":"Updated At","sys$uuid":"9eac8e29-eac7-4d64-b499-eb6dd8ce79c2","title":"Updated At","updated_at":"2019-10-16 17:42:32","uq":"0"}],"detail_queries":[{"code":"users","created_at":"2018-08-18 17:01:53","detail$code":"users","detail_id":"1","id":"1","is_auto":"0","sql_condition_build_text":"","sql_text":"select sys$uuid,u.lm_user_id,u.avatar_url,u.company_id,u.mobile,u.dep_id, u.bi_driver_id,u.bi_vehicle_id, u.bi_deal_id,(select f.code from files f where u.user_pic_file_id=f.id) _user_pic_file,u.id,u.title,u.email,u.company_id,u.dept_id,u.account_id,\nu.bi_address_id,\nu.bi_consignee_id,\nu.user_pic_file_id\n from users u where id=?","sys$uuid":"f74e0639-3931-4722-985d-0b4b8ce39e92","table_name":"users","title":"Users","updated_at":"2018-08-18 17:01:53"},{"code":"user_roles","created_at":"2018-08-18 17:01:53","detail$code":"users","detail_id":"1","id":"15","sql_condition_build_text":"","sql_text":"select\n  r.code, r.id role_id,r.title ,case when rm.role_id is null then '0' else '1' end enable,\n  rm.id user_role_id\nfrom roles r\n  left join user_roles rm on rm.role_id=r.id and rm.user_id=?\nwhere\n( r.custom_id is null or r.custom_id=(select c.id from params p,customs c where c.code=p.value and p.code='custom')\nand\n(\nr.code\u003c\u003e'admin'\nor\n(:user_id in (select user_id from user_roles urr,roles rr where rr.id=urr.role_id and rr.code='admin'))\n\n)\n\n)\n\norder by 1","sys$uuid":"2d00ec7d-1773-4303-a270-afc92898bb99","table_name":"user_roles","title":"User Roles","updated_at":"2018-08-18 17:01:53"},{"code":"avai_roles","created_at":"2018-08-18 17:01:53","detail$code":"users","detail_id":"1","id":"1203","is_auto":"0","sql_condition_build_text":"","sql_text":"select r.code, ? as user_id, r.title,r.id as role_id,0 as id\r\nfrom roles r\r\nwhere  \r\nr.id not in (select role_id  from user_roles  ur where ur.user_id=?)\r\nand r.is_active = 1","sys$uuid":"4f9297c8-0835-4221-b394-61aecfc8e9e1","table_name":"","title":"Доступные роли","updated_at":"2018-08-18 17:01:53"},{"code":"roles","created_at":"2018-08-18 17:01:53","detail$code":"users","detail_id":"1","id":"1204","is_auto":"0","sql_condition_build_text":"","sql_text":" select r.code,ur.id, r.title,r.id as role_id, ur.user_id from roles r,user_roles ur\r\nwhere ur.role_id=r.id and user_id=?","sys$uuid":"c1778536-55a7-48b8-95c2-1ca48e3c7142","table_name":"","title":"roles","updated_at":"2018-08-18 17:01:53"}],"details":[{"code":"users","created_at":"2020-04-30 14:11:00","entity$code":"users","entity_id":"22","id":"1","sys$uuid":"980e066f-57fd-46a9-8405-a4a62f4afe7f","title":"Users","updated_at":"0000-00-00 00:00:00"}],"entity_view_limits":[{"code":"users","created_at":"2017-02-22 14:45:48","entity$code":"users","entity_id":"22","id":"69","is_auto":"1","subquery":"1 = 1","sys$uuid":"28f55c41-5266-4f09-9c79-873bacf5cb1a","title":"Users","updated_at":"2018-12-18 18:13:07"},{"code":"except_me","created_at":"2017-05-16 19:30:15","entity$code":"users","entity_id":"22","for_filter":"0","id":"335","is_auto":"0","subquery":"main.id!=:user_id","sys$uuid":"e878690c-53d3-4fa4-b246-67fd0c760658","title":"Кроме меня","updated_at":"2017-05-16 19:30:15"},{"code":"my_accounts","created_at":"2017-12-08 16:39:28","entity$code":"users","entity_id":"22","for_filter":"0","id":"586","is_auto":"0","subquery":"main.account_id = (select account_id from users where id=:user_id)","sys$uuid":"f68e5e32-f34e-4db1-9c18-a5f363d60156","title":"Пользователи моей организации","updated_at":"2017-12-08 16:39:28"},{"created_at":"2018-09-01 12:29:55","entity$code":"users","entity_id":"22","for_filter":"0","id":"800","is_auto":"0","subquery":"(\nmain.id in (select ur.user_id from user_roles ur join roles r where ur.role_id=r.id and r.code='sd_manager')\nor\nmain.id in (select ur.user_id from user_roles ur join roles r where ur.role_id=r.id and r.code='sd_user' and main.account_id=(select account_id from users u where u.id=:user_id))\n)","sys$uuid":"b199ab27-42fc-4793-8729-4d74ba51bb3c","title":"Пользователи, видимые пользователю sd_user","updated_at":"2018-09-01 12:29:55"},{"created_at":"2018-12-08 14:12:39","created_by":"1","entity$code":"users","entity_id":"22","for_filter":"0","id":"1027","is_auto":"0","subquery":"main.id = :user_id","sys$uuid":"5e440f97-3324-45ac-b66f-d0f27b51f5be","title":"Я","updated_at":"2018-12-08 14:12:39"},{"code":"mfo_verify_users","created_at":"2020-05-23 12:08:20","created_by":"1","entity$code":"users","entity_id":"22","for_filter":"0","id":"1190","is_auto":"0","subquery":"main.id in (\nselect ur.user_id\n  from user_roles ur\n  join roles r on r.id = ur.role_id\n where r.code in ('mfo_verify')\n)","sys$uuid":"42637282-7564-4127-8f5a-f36e60ff0ab1","title":"Верификаторы","updated_at":"2020-05-23 12:11:12"},{"code":"mfo_collection_users","created_at":"2020-05-25 18:58:28","created_by":"1","entity$code":"users","entity_id":"22","for_filter":"0","id":"1191","is_auto":"0","subquery":"main.id in (\nselect ur.user_id\n  from user_roles ur\n  join roles r on r.id = ur.role_id\n where r.code in ('mfo_collection')\n)","sys$uuid":"fe411125-5af5-43b8-81be-935acfe65572","title":"Коллекторы","updated_at":"2020-05-25 18:59:51"}],"filter_set_dtls":[{"by_child_attr":"0","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"email","entity_attr_id":"118","id":"1853","is_advanced":"0","set$code":"managers","set_id":"211","sys$uuid":"1d2e199b-2880-4338-a007-7db0faf26dac","updated_at":"2019-04-13 21:06:35"},{"by_child_attr":"0","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"title","entity_attr_id":"117","id":"1854","is_advanced":"0","set$code":"managers","set_id":"211","sys$uuid":"d8a139ab-9676-42fc-8956-434f8d27f7d8","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"id","entity_attr_id":"116","id":"10112","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"d89de0a9-d978-454d-992f-9d5e866dc808","updated_at":"2019-04-13 21:06:35"},{"alias":"main","by_child_attr":"0","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"title","entity_attr_id":"117","id":"10113","is_advanced":"0","set$code":"users","set_id":"376","sys$uuid":"ee16ed65-d8b9-4f62-8d72-736eb6fc38a2","updated_at":"2019-04-13 21:06:35"},{"alias":"main","by_child_attr":"0","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"email","entity_attr_id":"118","id":"10114","is_advanced":"0","set$code":"users","set_id":"376","sys$uuid":"c47450b5-462f-4471-a8e6-6cca4d683caa","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"device_token","entity_attr_id":"220","id":"10115","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"bf81123b-1ca6-4798-a79c-588d64ceee63","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"account_id","entity_attr_id":"222","id":"10116","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"a37fc426-ea40-4e34-920b-46d2a3585c44","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"bi_address_id","entity_attr_id":"466","id":"10117","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"907c7038-7fa7-4039-bb64-2d9b6513708f","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"bi_consignee_id","entity_attr_id":"467","id":"10118","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"4ef567d6-1a52-473e-9012-4c182d84ff4b","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"bill_account","entity_attr_id":"900","id":"10119","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"347c02e6-710a-4602-93ca-2c848b7333b5","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"dep_id","entity_attr_id":"1432","id":"10120","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"5dcd1f01-819b-48e7-9ae3-2b0a525e1ab8","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"mobile","entity_attr_id":"1549","id":"10121","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"fe1eebe8-a131-4e61-ad06-623d07a0ff67","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"ldap_id","entity_attr_id":"2008","id":"10122","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"906960c3-3296-418e-8c06-daa5ad7bd379","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"avatar_url","entity_attr_id":"2408","id":"10123","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"bb836834-d67e-4add-8f52-f7db53cebb74","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"created_at","entity_attr_id":"2411","id":"10124","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"311215cc-d9c6-4aa0-aae5-ff7b701b3214","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"updated_at","entity_attr_id":"2412","id":"10125","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"33adf728-38c5-48a5-ab32-365e658a5899","updated_at":"2019-04-13 21:06:35"},{"alias":"main","by_child_attr":"0","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"lm_user_id","entity_attr_id":"2977","id":"10126","is_advanced":"0","set$code":"users","set_id":"376","sys$uuid":"81ea6fe8-a9cb-4b16-bdaf-014308ed28d8","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"login","entity_attr_id":"3040","id":"10127","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"51000404-2113-45f2-899c-99539b693d15","updated_at":"2019-04-13 21:06:35"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"jobtitle","entity_attr_id":"3041","id":"10128","is_advanced":"1","set$code":"users","set_id":"376","sys$uuid":"931b120e-a0f2-40b7-8e30-ee96c61a12c2","updated_at":"2019-04-13 21:06:35"},{"by_child_attr":"0","col$code":"col-md-6","col_id":"1","created_at":"2019-04-13 21:06:35","entity_attr$code":"email","entity_attr_id":"118","id":"17978","is_advanced":"0","set$code":"user_balance","set_id":"1400","sys$uuid":"3db4214b-ed5c-4290-903d-3eef72978028","title":"email","updated_at":"2019-04-13 21:06:35"}],"filter_sets":[{"code":"managers","created_at":"2017-12-02 22:30:34","created_by":"1","entity$code":"users","entity_id":"22","id":"211","sys$uuid":"00a15a7a-c283-40a6-a0a5-bd236a28db60","title":"Менеджеры","updated_at":"2019-10-16 18:08:27"},{"code":"users","created_at":"2017-12-02 22:30:34","created_by":"1","default_order_asc":"1","entity$code":"users","entity_id":"22","id":"376","is_auto":"0","sys$uuid":"4c50c177-e268-456b-959d-27a31ef823ef","title":"users","updated_at":"2019-10-16 18:25:53"},{"code":"user_balance","created_at":"2017-12-02 22:30:34","created_by":"1","entity$code":"users","entity_id":"22","id":"1400","is_auto":"0","sys$uuid":"1b4a98e2-aa90-44c2-b5bb-8a29b31ee11b","title":"Баланс пользователей","updated_at":"2019-10-16 18:08:27"}],"main":[{"code":"users","created_at":"2017-02-14 10:01:20","created_by":"1","def_sel_query$code":"users_select","def_sel_query_id":"413","detail_page_id":"4735","entity_type$code":"reference","entity_type_id":"1","id":"22","is_full_audit":"0","list_page_id":"13","lookup_page_id":"2687","module$code":"core","module_id":"4","rewrite_cloud":"0","sys$uuid":"92131ff0-e978-473a-8daa-2f8c315067ed","title":"Users","to_cloud":"0","updated_at":"2019-10-16 17:42:10"}],"pages":[{"code":"Users","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","filter_set_id":"376","filter_sets$code":"users","id":"13","is_auto":"0","is_cache":"0","module$code":"core","module_id":"4","page_type$code":"list","page_type_id":"1","query$code":"users","query_id":"1","sys$uuid":"d8901341-d692-4615-b6bc-f71b4fd1a9c3","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\r\n\t\t ng-init=\"init({pageData:$state.current.data,entityId:$state.current.data.entityId,filter_set:$state.current.data.pageFilterSetCode,currentPage:1,perPage:100,table_name:$state.current.data.pageQueryCode})\"\r\n\t\t ng-controller=\"SimpleTableController\"\u003e\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003eUsers\u003c/translate\u003e\r\n\t\t\u003c/li\u003e\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\t\t\u003ca  href=\"#/settings/userdetails/0\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003e\r\n\t\t\t\tNew User\u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\r\n\t\t\t\u003c/a\u003e\r\n\t\t\t\u003cbutton translate type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-hover=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\r\n\t\t\tActions \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\r\n\t\t\t\u003c/button\u003e\r\n\t\t\t\u003cul class=\"dropdown-menu pull-right\" user=\"menu\"\u003e\r\n\t\t\t\t\u003cng-include src=\"'/restapi/widget/simpletable-select-actions'\" \u003e\r\n\t\t\t\t\u003c/ng-include\u003e\r\n\r\n\t\t\t\u003c/ul\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\u003cdiv class=\"well form\"\u003e\r\n    \u003cdiv class=\"row\"\u003e\r\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\r\n    \u003c/ng-include\u003e\r\n    \u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\u003c!-- END PAGE HEADER--\u003e\r\n\u003c!-- BEGIN MAIN CONTENT --\u003e\r\n\u003cdiv class=\"row\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t\u003c!--\u003cp\u003e--\u003e\r\n\t\t\t\t\u003c!--SAMPLE NOTE:--\u003e\r\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\r\n\t\t\u003c!--\u003c/div\u003e--\u003e\r\n\t\t\u003c!-- Begin: life time stats --\u003e\r\n\t\t\u003cdiv class=\"portlet\"\u003e\r\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t\t\u003cdiv class=\"table-responsive\"\u003e\r\n\t\t\t\t\t\t\u003ctable st-table=\"rowCollection\"  class=\"table table-striped table-bordered\"\u003e\r\n\t\t\t\t\t\t\t\u003cthead\u003e\r\n    \t\t\t\t\t\t\t\u003ctr\u003e\r\n    \t\t\t\t\t\t\t\t\u003cth class=\"text-center\"\u003e\r\n                    \t\t\t\t\t\u003cdiv ng-if=\"filterSetCols\" class=\"btn-group\"\u003e\t\t\t    \r\n                                \t\t\t\u003ca type=\"button\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\r\n                                    \t\t\t\u003ci class=\"fa fa-columns\"\u003e\u003c/i\u003e\r\n                                \t\t\t\u003c/a\u003e\r\n                                    \t\t\t\u003cul class=\"dropdown-menu\" style=\"left: auto; !important\" role=\"menu\"\u003e\r\n                                                    \u003cli ng-repeat=\"ppb in filterSetCols\" ng-if=\"ppb.is_advanced == 1\"\u003e\r\n                                                        \u003clabel\u003e\r\n                                                            \u003cspan ng-if=\"getShowIsAdvancedCol(ppb)!=null\" ng-init=\"ppb.value = getShowIsAdvancedCol(ppb)\"\u003e\u003c/span\u003e\r\n                                                            \u003ccheckbox ng-model=\"ppb.value\"  ng-change=\"setShowIsAdvancedCol(ppb)\"  ng-true-value=\"1\"   ng-false-value=\"0\" \u003e\u003c/checkbox\u003e\r\n                                                            {{ppb.title}}\r\n                                                        \u003c/label\u003e\r\n                                                    \u003c/li\u003e        \t\t\t    \r\n                                    \t\t\t\u003c/ul\u003e\t\r\n                            \t\t\t\u003c/div\u003e\r\n    \t\t\t\t\t\t\t\t    \u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t    \u003cth  class=\"text-center\" ng-repeat=\"col in filterSetCols\" ng-if=\"getShowIsAdvancedCol(col)==1 || col.is_advanced!=1\"\u003e\r\n    \t\t\t\t\t\t\t\t        \u003ca ng-click=\"sortBy(col.alias)\" translate\u003e{{col.title}}\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == col.alias \" \r\n    \t\t\t\t\t\t\t\t        class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == col.alias\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\r\n    \t\t\t\t\t\t\t\t    \u003c/th\u003e\r\n    \t\t\t\t\t\t\t\u003c/tr\u003e\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\u003ctr\u003e\r\n    \t\t\t\t\t\t\t        \u003cth\u003e\r\n    \t\t\t\t\t\t\t            \r\n    \t\t\t\t\t\t\t        \u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t    \u003cth ng-repeat=\"col in filterSetCols\" ng-if=\"getShowIsAdvancedCol(col)==1 || col.is_advanced!=1\"\u003e\r\n    \t\t\t\t\t\t\t\t        \u003cdiv ng-switch=\"col._data_type_code\"\u003e\r\n    \t\t\t\t\t\t\t\t            \u003cdiv class=\"form-group\" ng-switch-when = \"varchar\"\u003e\r\n    \t\t\t\t\t\t\t\t                \r\n    \t\t\t\t\t\t\t\t                 \u003cinput type=\"text\" ng-keydown=\"QFKeyDown(col,$event)\" ng-model=\"col._value\"   class=\"form-control\" /\u003e\r\n    \t\t\t\t\t\t\t\t            \u003c/div\u003e\r\n    \t\t\t\t\t\t\t\t            \u003cdiv ng-switch-when = \"reference\"\u003e\r\n    \t\t\t\t\t\t\t\t                    \u003cdu-select query-code=\"{{col._def_sel_query_code}}\"   without-label=\"true\" ng-change=\"editQF(col)\" id-model=\"col._value\" ng-model=\"col._value2\"\u003e\u003c/du-select\u003e\r\n    \t\t\t\t\t\t\t\t            \u003c/div\u003e    \t\t\t\t\t\t\t\t            \r\n    \t\t\t\t\t\t\t\t            \r\n    \t\t\t\t\t\t\t\t        \u003c/div\u003e\r\n    \t\t\t\t\t\t\t\t       \r\n    \t\t\t\t\t\t\t\t    \u003c/th\u003e     \t\t\t\t\t\t\t    \r\n    \t\t\t\t\t\t\t\u003c/tr\u003e\r\n    \t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\u003c/thead\u003e\r\n\t\t\t\t\t\t\t\u003ctbody\u003e\r\n\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in rowCollection\"\u003e\r\n\t\t\t\t\t\t\t\t\u003ctd\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cng-include src=\"'views/blocks/simpletable-select-checkbox-row.html'\"\u003e\u003c/ng-include\u003e\r\n\t\t\t\t\t\t\t\t\t\u003ca href=\"#/settings/userdetails/{{row.id}}/?p[]=page::{{currentPage}}\"\u003e \u003ci class=\"fa fa-pencil\"\u003e\u003c/i\u003e\u003c/a\u003e\r\n\t\t\t\t\t\t\t\t\u003c/td\u003e\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t\u003ctd ng-repeat=\"col in filterSetCols\"  ng-if=\"getShowIsAdvancedCol(col)==1 ||  col.is_advanced != 1\"\u003e\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t    \u003cdiv ng-switch=\"col.alias\"\u003e\r\n\t\t\t\t\t\t\t\t        \u003cdiv ng-switch-when=\"_value\" class=\"text-right\"\u003e\r\n\t\t\t\t\t\t\t\t            {{row[col.alias] | number : 2}}        \r\n\t\t\t\t\t\t\t\t        \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t        \u003cdiv ng-switch-when=\"amount\" class=\"text-right\"\u003e\r\n\t\t\t\t\t\t\t\t            {{row[col.alias] | number : 2}}        \r\n\t\t\t\t\t\t\t\t        \u003c/div\u003e\t\t\t\t\t\t\t\t        \r\n\t\t\t\t\t\t\t\t        \u003cdiv ng-switch-when=\"_status_title\" class=\"text-center\"\u003e\r\n\t\t\t\t\t\t\t\t           \u003cspan class=\"{{row._status_color}}\"\u003e\u003ci class=\"{{row._status_icon}}\"\u003e\u003c/i\u003e {{row[col.alias]}} \u003c/span\u003e \r\n\t\t\t\t\t\t\t\t        \u003c/div\u003e\t\t\t\t\t\t\t\t        \r\n\t\t\t\t\t\t\t\t        \u003cdiv ng-switch-default\u003e\r\n\t\t\t\t\t\t\t\t            {{row[col.alias]}}\r\n\t\t\t\t\t\t\t\t        \u003c/div\u003e\t\t\t\t\t\t\t\t        \r\n\t\t\t\t\t\t\t\t        \r\n\t\t\t\t\t\t\t\t    \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t\u003c/td\u003e\r\n\t\t\t\t\t\t\t\u003c/tr\u003e\r\n\t\t\t\t\t\t\t\u003c/tbody\u003e\r\n\r\n\t\t\t\t\t\t\t\u003ctfoot\u003e\r\n\t\t\t\t\t\t\t\u003ctr\u003e\r\n\t\t\t\t\t\t\t\t\u003ctd colspan=\"50\" class=\"text-center\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003c/td\u003e\r\n\t\t\t\t\t\t\t\u003c/tr\u003e\r\n\t\t\t\t\t\t\t\u003c/tfoot\u003e\r\n\t\t\t\t\t\t\u003c/table\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c!-- End: life time stats --\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c/section\u003e\r\n\r\n","templateurl":"views/settings/users.html","title":"Users","updated_at":"2019-10-16 18:14:01","url":"/settings/users"},{"code":"userdetails","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","id":"14","is_auto":"0","is_cache":"0","module$code":"core","module_id":"4","page_type$code":"details","page_type_id":"5","sys$uuid":"5e3893ba-c7fb-40a3-bfcd-2cba87af2041","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\"\u003e\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca href=\"#/settings/users\" translate\u003eUsers\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003e{{detail.title}}\u003c/translate\u003e\r\n\t\t\t\u003cspan ng-if=\"detail.id == 0\"\u003e - Регистрация нового пользователя\u003c/span\u003e\r\n\r\n\t\t\u003c/li\u003e\r\n\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\t    \r\n\t\t\t\u003cbutton ng-if=\"!editing \u0026\u0026 entityActions.length\u003e0\"  type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-hover=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\" \u003e\r\n\t\t\t\u003ctranslate\u003eActions\u003c/translate\u003e \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\r\n\t\t\t\u003c/button\u003e\r\n\t\t\t\u003cul ng-if=\"!editing\"  class=\"dropdown-menu\" style=\"left: auto; right: 100px;!important\" role=\"menu\"\u003e\r\n                \u003cli ng-repeat= \"action in entityActions\"\u003e\r\n                    \u003ca ng-if=\"action.process_type_code == 'entityAction' \"ng-click=\"pubSubPublish('chooseBPMSModal',{'processCode':action.code, 'input': {'url':'?code='+table_name+'\u0026amp;ids='+detail.id} })\" \u003e\r\n                        \u003ci class=\"{{action.action_icon}}\"\u003e\u003c/i\u003e \u003ctranslate\u003e{{action.title}}\u003c/translate\u003e\u003c/a\u003e\r\n                        \r\n                \u003ca ng-if=\"action.process_type_code == 'entityActionByID' \"ng-click=\"pubSubPublish('chooseBPMSModal',{'processCode':action.code, 'input': {id:detail.id} })\" \u003e\r\n                        \u003ci class=\"{{action.action_icon}}\"\u003e\u003c/i\u003e \u003ctranslate\u003e{{action.title}}\u003c/translate\u003e\u003c/a\u003e                        \r\n                        \r\n                    \u003ca ng-if=\"session_roles.admin\" href=\"#/bpms/modeler/{{action.id}}\" title=\"Диаграмма\"\u003e\u003ci class=\"glyphicon glyphicon-th-large\"\u003e\u003c/i\u003e\u003c/a\u003e\r\n                \u003c/li\u003e\r\n\r\n                \r\n\t\t\t\u003c/ul\u003e\r\n\t\t\t\r\n\t\t    \u003c!--\u003ca ng-click=\"clearLocalCache()\" class=\"btn green\" translate\u003eClear Local Cache\u003c/a\u003e--\u003e\r\n\t\t\t\u003ca ng-if=\"!editing \u0026\u0026 sessionRoleParams.force_resetpassword!='1'\"  href=\"#/settings/resetpassword/{{detail.id}}\" class=\"btn blue\" \u003e\u003ci class=\"fa fa-key\"\u003e\u003c/i\u003e \u003ctranslate\u003eReset Password\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\t\u003ca ng-if=\"!editing \u0026\u0026 sessionRoleParams.force_resetpassword=='1'\"  href=\"#/settings/resetpassword2/{{detail.id}}\" class=\"btn blue\"\u003e\u003ci class=\"fa fa-key\"\u003e\u003c/i\u003e \u003ctranslate\u003eReset Password\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-primary\" ng-click=\"save()\" translate\u003eSave\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-warning\" ng-click=\"cancel()\" translate\u003eCancel\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"!editing\" class=\"btn btn-warning\" translate\u003eSaved\u003c/button\u003e\r\n\t\t\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eEdit Page\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c!-- END PAGE HEADER--\u003e\r\n\u003c!-- BEGIN MAIN CONTENT --\u003e\r\n\u003cdiv class=\"row\"  ng-keydown=\"keyDown($event)\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t\u003c!--\u003cp\u003e--\u003e\r\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\r\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\r\n\t\t\u003c!--\u003c/div\u003e--\u003e\r\n\t\t\u003c!-- Begin: life time stats --\u003e\r\n\t\t\u003cdiv class=\"portlet\"\u003e\r\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\r\n\t\t\t\t\t\t\u003cform role=\"form\"\u003e\r\n\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\r\n\t\t\t\t\t\t\t    \r\n    \t\t\t\t\t\t\u003cdiv class=\"tabbable-custom \"\u003e\r\n    \t\t\t\t\t\t\t\u003cul class=\"nav nav-tabs \"\u003e\r\n    \t\t\t\t\t\t\t\t\u003cli class=\"active\"\u003e\r\n    \t\t\t\t\t\t\t\t\t\u003ca data-target=\"#tab_1\" data-toggle=\"tab\" aria-expanded=\"true\" translate\u003e\r\n    \t\t\t\t\t\t\t\t\t\tОсновная информация\u003c/a\u003e\r\n    \t\t\t\t\t\t\t\t\u003c/li\u003e\r\n    \t\t\t\t\t\t\t\t\u003cli\u003e\r\n    \t\t\t\t\t\t\t\t\t\u003ca data-target=\"#tab_2\" data-toggle=\"tab\" aria-expanded=\"true\"\u003e\r\n    \t\t\t\t\t\t\t\t\t\tРоли \u003cspan class=\"badge badge-primary\"\u003e{{details.roles.length}}\u003c/span\u003e\u003c/a\u003e\r\n    \t\t\t\t\t\t\t\t\u003c/li\u003e\r\n    \t\t\t\t\t\t\t\u003c/ul\u003e\r\n    \t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\u003cdiv class=\"tab-content\"\u003e\r\n    \t\t\t\t\t\t\t    \u003c!-- begin tab1--\u003e\r\n    \t\t\t\t\t\t\t\t\u003cdiv class=\"tab-pane active container-fluid\" id=\"tab_1\"\u003e\t\t\t\t\t\t\t\t                                        \r\n\r\n        \t\t\t\t\t\t\t\t\u003cdiv class=\"row margin-top-20\"\u003e\r\n        \t\t\t\r\n            \t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-2\"\u003e\r\n            \t\t\t\t\t\t\t\t\t\r\n                                            \t\u003cdiv class=\"form-body\" \u003e\r\n                                            \t\t\u003ch4 translate\u003eAvatar\u003c/h4\u003e\r\n                                            \t\t\u003cbu-image-uploader-by-url on-change=\"edit\" url=\"detail.avatar_url\"\u003e\u003c/bu-image-uploader-by-url\u003e\r\n                                            \t\u003c/div\u003e\t\t\t\t\t\t\t\t    \r\n            \t\t\t\t\t\t\t\t\u003c/div\u003e    \r\n            \t\t\t\t\t\t\t\t\t\t\t\t\t    \r\n        \t\t\t\t\t\t\t\t\r\n            \t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-10\"\u003e\r\n            \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n                \t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003clabel translate\u003eФИО сотрудника\u003c/label\u003e\r\n                \r\n                \t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-user\"\u003e\u003c/i\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cinput ng-change=\"edit()\" type=\"text\" ng-model= \"detail.title\" class=\"form-control\" placeholder=\"{{ 'Name' | translate }}\" \u003e\r\n                \t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n                \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n                \t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003clabel translate\u003eEmail сотрудника\u003c/label\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-paper-plane-o\"\u003e\u003c/i\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cinput ng-change=\"edit()\" type=\"email\" ng-model= \"detail.email\" class=\"form-control\" placeholder=\"{{ 'Email' | translate }}\" \u003e\r\n                \t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n                \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n                \t\t\t\t\t\t\t\t\r\n                \t\t\t\t\t\t\t\t\u003cbu-select label=\"Контрагент\"  query-code=\"account_select\" id-model=\"detail.account_id\" on-change=\"edit\" \u003e\u003c/bu-select\u003e\r\n                \t\t\t\t\t\t\t\t\u003cbu-select label=\"Компания\" query-code=\"companies_select\" id-model=\"detail.company_id\" on-change=\"edit\" \u003e\u003c/bu-select\u003e\r\n                \t\t\t\t\t\t\t\t\u003cbu-select label=\"Подразделение\"  query-code=\"deps_select\" id-model=\"detail.dep_id\" on-change=\"edit\" \u003e\u003c/bu-select\u003e\r\n                \t\t\t\t\t\t\t\t\u003cbu-select label=\"Line Manager\"  query-code=\"users_select\" id-model=\"detail.lm_user_id\" on-change=\"edit\" \u003e\u003c/bu-select\u003e\r\n                \t\t\t\t\t\t\t\t\u003cbu-input-label label=\"Должность\"  id-model=\"detail.jobtitle\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n                \t\t\t\t\t\t\t\t\r\n                \t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003clabel translate\u003eMobile\u003c/label\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-mobile-phone (alias)\"\u003e\u003c/i\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cinput ng-change=\"edit()\" ui-mask=\"+9(999) 999 99 99\"  ui-mask-placeholder ui-mask-placeholder-char=\" \"  ng-model= \"detail.mobile\" class=\"form-control\" placeholder=\"{{ 'Mobile' | translate }}\" \u003e\r\n                \t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n                \t\t\t\t\t\t\t\t\u003c/div\u003e\t\t\t\t\t\r\n                \t\t\t\t\t\t\t\t\r\n            \r\n                \t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\" ng-if=\"detail.id==0\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003clabel translate\u003eНовый пароль\u003c/label\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003c!--\u003clabel\u003e\u003ci\u003eпоказать пароль\u003c/i\u003e\u003c/label\u003e\u003ccheckbox ng-true-value=\"1\"   ng-false-value=\"0\"  ng-model=\"show_password\" \u003e\r\n                \t\t\t\t\t\t\t\t\t    \r\n                \t\t\t\t\t\t\t\t\t\u003c/checkbox\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003ci ng-if=\"show_password == 1\"\u003e{{detail._pwd_new}}\u003c/i\u003e\r\n                \t\t\t\t\t\t\t\t\t--\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-key\"\u003e\u003c/i\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cinput ng-change=\"edit()\" type=\"password\" ng-model= \"detail._pwd_new\" class=\"form-control\" placeholder=\"{{ 'Новый пароль' | translate }}\" \u003e\r\n                \t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n                \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n                \t\t\t\t\t\t\t\t\r\n                \t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\" ng-if=\"detail.id==0\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003clabel translate\u003eПодтвердите новый пароль\u003c/label\u003e\r\n                \t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-key\"\u003e\u003c/i\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n                \t\t\t\t\t\t\t\t\t\t\u003cinput type=\"password\" ng-model= \"detail._pwd_new2\" class=\"form-control\" placeholder=\"{{ 'Подтвердите новый пароль' | translate }}\" \u003e\r\n                \t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n                \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n            \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n        \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n    \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n    \t\t\t\t\t\t\t\t\u003c!-- end tab1--\u003e\r\n    \t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\u003c!-- begin tab2--\u003e\r\n    \t\t\t\t\t\t\t\t\u003cdiv class=\"tab-pane container-fluid\" id=\"tab_2\"\u003e\r\n        \t\t\t\t\t\t\t\t\u003cdiv  class=\"row form-group\" \u003e\r\n        \t\t\t\t\t\t\t\t    \u003cbu-input-label id-model=\"searchRole\" label=\"Поиск роли\"\u003e\u003c/bu-input-label\u003e\r\n            \t\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\r\n            \t\t\t\t\t\t\t\t    \u003cdiv class=\"col-md-6\"\u003e\r\n                                                   \t\u003ctable class=\"table table-bordered table-responsive\"\u003e\r\n                                                   \t        \u003ctr\u003e\r\n                                                   \t            \u003cth colspan=\"2\" class=\"text-center\"\u003eНазначенные Роли \u003cspan class=\"badge badge-primary\"\u003e{{details.roles.length}}\u003c/span\u003e\u003c/th\u003e\r\n                                                   \t        \u003c/tr\u003e\r\n                                                   \t        \u003ctr\u003e\r\n                                                        \t    \u003cth  class=\"text-center\"\u003eРоль\u003c/th\u003e\r\n                                                        \t    \r\n                                                    \t    \u003c/tr\u003e\r\n                                                    \t    \u003ctr ng-repeat=\"item in details.roles \" ng-if=\"!item.deleted\"\u003e\r\n                                                    \t        \u003ctd\u003e\u003ccode\u003e{{item.code}}\u003c/code\u003e\r\n                                                    \t            {{item.title}}\r\n                                                    \t        \u003c/td\u003e                                             \t                                                 \t        \r\n                                                    \t        \u003ctd\u003e\r\n                                                    \t            \u003ca ng-if=\" !( item.role_id==1  \u0026\u0026 sessioninfo.id == item.user_id )\" ng-click=\"unLinkRole(item)\"\u003eОтвязать \u003ci class=\"fa fa-chevron-right\"\u003e\u003c/i\u003e\u003c/a\u003e\r\n                                                    \t        \u003c/td\u003e\r\n                                                    \t    \u003c/tr\u003e\r\n                                                    \u003c/table\u003e \r\n            \t\t\t\t\t\t\t\t    \u003c/div\u003e\r\n            \t\t\t\t\t\t\t\t    \u003cdiv class=\"col-md-6\"\u003e\r\n                                                   \t\u003ctable class=\"table table-bordered table-responsive\"\u003e\r\n                                                   \t        \u003ctr\u003e\r\n                                                   \t            \u003cth colspan=\"2\" class=\"text-center\"\u003eДоступные роли \u003cspan class=\"badge badge-primary\"\u003e{{details.avai_roles.length}}\u003c/span\u003e\u003c/th\u003e\r\n                                                   \t        \u003c/tr\u003e\r\n                                                   \t        \u003ctr\u003e\r\n                                                        \t    \u003cth  class=\"text-center\"\u003e\u003c/th\u003e\r\n                                                        \t    \u003cth  class=\"text-center\"\u003eРоль\u003c/th\u003e\r\n                                                        \t    \r\n                                                    \t    \u003c/tr\u003e\r\n                                                    \t    \u003ctr ng-repeat=\"item in details.avai_roles  | filter:searchRole\"  ng-if=\"!item.deleted\"\u003e\r\n                                                    \t        \u003ctd\u003e\r\n                                                    \t            \u003ca ng-click=\"linkRole(item)\"\u003e\u003ci class=\"fa  fa-chevron-left\"\u003e\u003c/i\u003e Назначить\u003c/a\u003e\r\n                                                    \t        \u003c/td\u003e                                            \t        \r\n                                                    \t        \u003ctd\u003e\u003ccode\u003e{{item.code}}\u003c/code\u003e\r\n                                                    \t            {{item.title}}\r\n                                                    \t        \u003c/td\u003e                                        \t        \r\n                                                    \t    \u003c/tr\u003e\r\n                                                    \u003c/table\u003e \r\n            \t\t\t\t\t\t\t\t    \u003c/div\u003e    \t\t\t\t\t\t\t\t\t    \r\n            \t\t\t\t\t\t\t\t\u003c/div\u003e        \t\t\t\t\t\t\t\t     \r\n        \t\t\t\t\t\t\t\t\u003c/div\u003e\t\r\n    \t\t\t\t\t\t\t\t\u003c/div\u003e\t\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t\t\u003c!-- end tab2--\u003e\r\n    \t\t\t\t\t\t\t\u003c/div\u003e\r\n    \t\t\t\t\t\t\u003c/div\u003e\r\n    \r\n    \t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t    \r\n\r\n\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003c/form\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c!-- End: life time stats --\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\r\n\r\n\u003c!-- \r\nBEGIN IND SITES\r\n--\u003e\r\n\u003csection ng-if=\"detail._has_bi_customer_role\"\u003e\r\n    \u003cdiv class=\"clearfix container-fluid\" \r\n    \t ng-init=\"init({currentPage:1,perPage:25,table_name:'bi_user_addresses'})\"\r\n    \t ng-controller=\"SimpleDetailTableController\"\u003e\r\n    \t\u003cdiv class=\"page-bar\"\u003e\r\n            \u003cul class=\"page-breadcrumb\"\u003e\r\n        \t\t\u003cli\u003e\r\n        \t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\r\n        \t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n        \t\t\t\u003ca href=\"#/settings/users\" translate=\"\" class=\"ng-scope\"\u003eАдреса/Договора\u003c/a\u003e\r\n    \r\n        \t\t\u003c/li\u003e\r\n        \r\n        \t\u003c/ul\u003e\t    \r\n    \t\t\u003cdiv class=\"page-toolbar\"\u003e\r\n    \t\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n    \t\t\t\t\u003cbutton translate type=\"button\" class=\"btn btn-fit-height red dropdown-toggle\" data-toggle=\"dropdown\" data-hover=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\r\n    \t\t\t\t\tActions \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\r\n    \t\t\t\t\u003c/button\u003e\r\n    \t\t\t\t\u003cul class=\"dropdown-menu pull-right\" role=\"menu\"\u003e\r\n    \t\t\t\t\t\u003cli\u003e\r\n    \t\t\t\t\t\t\u003ca href=\"#/beton/useraddressdetails/{{id}}/0\"\u003e\r\n    \t\t\t\t\t\t\t\u003ci class=\"icon-user\"\u003e\u003c/i\u003e \u003ctranslate\u003eДобавить адрес/договор\u003c/translate\u003e \u003c/a\u003e\r\n    \t\t\t\t\t\u003c/li\u003e\r\n    \t\t\t\t\t\u003cng-include src=\"'views/blocks/simpledetailtable-select-actions.html'\" \u003e\r\n    \t\t\t\t\t\u003c/ng-include\u003e\r\n    \t\t\t\t\u003c/ul\u003e\r\n    \t\t\t\u003c/div\u003e\r\n    \t\t\u003c/div\u003e\r\n    \t\u003c/div\u003e\r\n    \r\n    \t\u003cdiv class=\"table-container\"\u003e\r\n    \t\t\u003cdiv class=\"table-responsive\"\u003e\r\n    \t\t\t\u003ctable st-table=\"rowCollection\"  class=\"table table-striped table-bordered\"\u003e\r\n    \t\t\t\t\u003cthead\u003e\r\n    \t\t\t\t\u003ctr\u003e\r\n    \t\t\t\t\t\u003cth translate\u003eАдрес\u003c/th\u003e\r\n    \t\t\t\t\t\u003cth translate\u003eДоговор\u003c/th\u003e\r\n    \t\t\t\t\u003c/tr\u003e\r\n    \t\t\t\t\u003c/thead\u003e\r\n    \t\t\t\t\u003ctbody\u003e\r\n    \t\t\t\t\u003ctr ng-repeat=\"row in rowCollection\"\u003e\r\n    \t\t\t\t\t\u003ctd\u003e\r\n    \t\t\t\t\t\t\u003cng-include src=\"'views/blocks/simpletable-select-checkbox-row.html'\"\u003e\u003c/ng-include\u003e\r\n    \t\t\t\t\t\t\u003ca class=\"btn btn-xs\" href=\"#/beton/useraddressdetails/{{row.user_id}}/{{row.id}}?p[]=page::{{currentPage}}\"\u003e \u003cu\u003e{{row.address_title}}\u003c/u\u003e\u003c/a\u003e\r\n    \t\t\t\t\t\u003c/td\u003e\r\n    \t\t\t\t\t\u003ctd\u003e\r\n    \t\t\t\t\t    {{row.deal_title}}\r\n    \t\t\t\t\t\u003c/td\u003e\r\n    \t\t\t\t\u003c/tr\u003e\r\n    \t\t\t\t\u003c/tbody\u003e\r\n    \r\n    \t\t\t\t\u003ctfoot\u003e\r\n    \t\t\t\t\u003ctr\u003e\r\n    \t\t\t\t\t\u003ctd colspan=\"5\" class=\"text-center\"\u003e\r\n    \t\t\t\t\t\t\u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\r\n    \t\t\t\t\t\u003c/td\u003e\r\n    \t\t\t\t\u003c/tr\u003e\r\n    \t\t\t\t\u003c/tfoot\u003e\r\n    \t\t\t\u003c/table\u003e\r\n    \t\t\u003c/div\u003e\r\n    \t\u003c/div\u003e\r\n    \u003c/div\u003e\r\n\u003c/section\u003e\r\n\u003c!--\r\n\r\nEND IND SITES\r\n--\u003e\r\n\r\n\r\n\r\n\u003c/section\u003e\r\n\r\n\u003cscript type=\"text/javascript\"\u003e\r\n\r\n\r\n\tfunction basicsCtrl($scope, $rootScope,$http,$log,$stateParams,FileUploader,DMLService,RestApiService,PubSub) {\r\n\r\n        $scope.func = {};\r\n        $scope.table_name = \"users\";\r\n        \r\n        $scope.pubSubPublish = function(a,b){\r\n            PubSub.publish(a,b);\r\n        }\r\n        \r\n\t    $scope.calcRolesDML=function(){\r\n\t        $scope.roles = [];\r\n\t        if ($scope.details.avai_roles){\r\n                $scope.details.avai_roles.forEach(function(item, i, arr) {\r\n                    if (item.changed \u0026\u0026 !item.deleted){\r\n                        console.log(item);\r\n                        $scope.roles.push ({table_name:\"user_roles\", action:\"delete\",values:[{id:item.id}]});\r\n                    }\r\n                });\r\n\t        }\r\n\r\n            if ($scope.details.roles){\r\n                $scope.details.roles.forEach(function(item, i, arr) {\r\n                    if (item.changed \u0026\u0026 !item.deleted){\r\n                        \r\n                        $scope.roles.push ({table_name:\"user_roles\", upsert_attrs:[\"role_id\",\"user_id\"], action:\"upsert\",values:[{role_id:item.role_id,user_id:$scope.detail.sys$uuid}]});\r\n                    }\r\n                }\r\n                );\r\n            }\r\n\t    }\r\n\t    \r\n        \r\n\t    $scope.linkRole = function (item){\r\n\r\n\t        item.deleted = true;\r\n\t        $scope.details.roles.push({id:item.id, code: item.code,role_id:item.role_id,changed:true,user_id:$scope.detail.sys$uuid,title:item.title});\r\n\t        $scope.edit();\r\n\t        $scope.calcRolesDML();\r\n\t    }\r\n\r\n\t    $scope.unLinkRole = function (item){\r\n\r\n\t        item.deleted = true;\r\n\t        $scope.details.avai_roles.push({id:item.id,changed:true,user_id:item.user_id, role_id:item.role_id,code:item.code,title:item.title});\r\n\t        \r\n\t        $scope.edit();\r\n\t        $scope.calcRolesDML();\r\n\t    }\r\n\t    \r\n\t    \r\n        \r\n        $scope.keyDown = function(e) {\r\n            if ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)){\r\n                $scope.save();\r\n            }\r\n        };\t        \r\n\r\n        $scope.isFormValid= function(){\r\n            if ($scope.detail.title.trim() == \"\"){\r\n                alert('Заполни ФИО');\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n\r\n        $scope.show_password = \"password\";\r\n        /*\r\n\r\n\t\t$scope.uploader = new FileUploader({ url: '../restapi/upload?dir=PROF\u0026action=profile_image\u0026user_id='+$stateParams.id });\r\n\r\n\t\t$scope.uploader.onCompleteItem = function(fileItem, response, status, headers) {\r\n\t\t\t//console.info('onCompleteItem', fileItem, response, status, headers);\r\n\r\n\t\t\t//alert(response.result);\r\n\t\t\tfileItem.result=response;\r\n\r\n\t\t};\r\n\r\n        */\r\n\t\t$scope.file = {}\r\n\r\n\t\t$scope.import = function () {\r\n\r\n\t\t\talert(\"import bebebe\");\r\n\t\t\tfile.$upload('uploader.php', $scope.file)\r\n\t\t}\r\n\r\n\r\n\t\t//console.log($stateParams);\r\n\t\t//console.log($stateParams.p[0]);\r\n\r\n\r\n\t\t$scope.edit = function edit(){\r\n\t\t\t$scope.editing = true;\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\t\t$scope.changeAccount = function(){\r\n\t\t\t$scope.edit();\r\n\t\t\t$scope.bindDeal();\r\n\r\n\t\t}\r\n\t\t\r\n\t\t$scope.changeConsignee = function(){\r\n\t\t\t$scope.edit();\r\n\t\t\t//$scope.bindDeal();\r\n\r\n\t\t}\t\t\r\n\r\n\r\n\t\t$scope.bindAccount = function(){\r\n\t\t\t$http.get('../restapi/query/get?code=account_select').\r\n\t\t\tsuccess(function(data) {\r\n\r\n\t\t\t\t$scope.accountSelect = [];\r\n\t\t\t\t$scope.accountSelect.availableOptions = data.items;\r\n\t\t\t\t$scope.detail._account_id_select={id: $scope.detail.account_id, name: \"\"};\r\n\t\t\t\t\r\n\t\t\t\t$scope.bindDeal();\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t$scope.bindBiConsignee = function(){\r\n\t\t\t$http.get('../restapi/query/get?code=account_select').\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t$scope.bi_consignee_id_select = [];\r\n\t\t\t\t$scope.bi_consignee_id_select.availableOptions = data.items;\r\n\t\t\t\t$scope.detail._bi_consignee_id_select={id: $scope.detail.bi_consignee_id, name: \"\"};\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t$scope.bindBiAddress = function(){\r\n\t\t\t$http.get('../restapi/query/get?code=bi_address_select').\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t$scope.bi_address_id_select = [];\r\n\t\t\t\t$scope.bi_address_id_select.availableOptions = data.items;\r\n\t\t\t\t$scope.detail._bi_address_id_select={id: $scope.detail.bi_address_id, name: \"\"};\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t$scope.bindDriver = function(){\r\n\t\t\t$http.get('../restapi/query/get?code=bi_driver_select').\r\n\t\t\tsuccess(function(data) {\r\n\r\n\t\t\t\t$scope.driverSelect = [];\r\n\t\t\t\t$scope.driverSelect.availableOptions = data.items;\r\n\t\t\t\t$scope.detail._driver_select={id: $scope.detail.bi_driver_id, name: \"\"};\r\n\r\n\t\t\t});\r\n\t\t}\t\t\r\n\t\t\r\n\t\t$scope.bindVehicle = function(){\r\n\t\t\t$http.get('../restapi/query/get?code=bi_vehicle_select').\r\n\t\t\tsuccess(function(data) {\r\n\r\n\t\t\t\t$scope.vehicleSelect = [];\r\n\t\t\t\t$scope.vehicleSelect.availableOptions = data.items;\r\n\t\t\t\t$scope.detail._vehicle_select={id: $scope.detail.bi_vehicle_id, name: \"\"};\r\n\r\n\t\t\t});\r\n\t\t}\t\t\t\r\n\r\n\t\t$scope.bindDeal = function(){\r\n\t\t\t$http.get('../restapi/query/get?code=bi_deal_select2\u0026param1='+$scope.detail._account_id_select.id).\r\n\t\t\tsuccess(function(data) {\r\n\r\n\t\t\t\t$scope.dealSelect = [];\r\n\t\t\t\t$scope.dealSelect.availableOptions = data.items;\r\n\t\t\t\t$scope.detail._deal_select={id: $scope.detail.bi_deal_id, name: \"\"};\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\t//$scope.moduleSelect = [];\r\n\t\t//$scope.moduleSelect.availableOptions = ( [{\"id\":1,\"name\":\"CRM\"},{\"id\":2,\"name\":\"Tests\"},{\"id\":3,\"name\":\"CarWash\"},{\"id\":4,\"name\":\"Admin module\"}]);\r\n\r\n\t\t//$scope.moduleSelect.selectedOption = {\"id\":1,\"name\":\"CRM\"};\r\n\t\t//console.log($scope.moduleSelect.availableOptions.items);\r\n\r\n\t\t// -----------------------------------\r\n\t\t$scope.deleteUserRoleItems = function(){\r\n\t\t\tvar deleteValues = [];\r\n\t\t\tif ($scope.detail.id != 0) {\r\n\t\t\t\t$scope.user_roles.forEach(function (item, i, arr) {\r\n\t\t\t\t\t//alert( i + \": \" + item + \" (массив:\" + arr + \")\" );\r\n\t\t\t\t\tif ((item.user_role_id != null) \u0026\u0026 (item.changed)) {\r\n\t\t\t\t\t\tdeleteValues.push({id: item.user_role_id});\r\n\t\t\t\t\t\tconsole.log(\"Удалено \" + item.user_role_id);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn {table_name:\"user_roles\", action:\"delete\",values:deleteValues};\r\n\t\t}\r\n\r\n\t\t$scope.insertUserRoleItems = function(menu_id){\r\n\t\t\tvar insertValues = [];\r\n\t\t\tif (menu_id!=0){\r\n\t\t\t$scope.user_roles.forEach(function (item, i, arr) {\r\n\t\t\t\t//alert( i + \": \" + item + \" (массив:\" + arr + \")\" );\r\n\t\t\t\tif ((item.enable == 1) \u0026\u0026 (item.role_menu_id == null) \u0026\u0026 (item.changed)) {\r\n\t\t\t\t\tinsertValues.push({role_id: item.role_id, user_id: menu_id});\r\n\t\t\t\t\tconsole.log(\"Добавлено \" + item.role_id);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn {table_name:\"user_roles\", action:\"insert\",values:insertValues};\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\t// -----------------------------------\r\n\r\n\t\t$scope.changeRole = function(rm){\r\n\t\t    //alert(rm.code + rm.enable);\r\n\t\t    \r\n\t\t    /*if (rm.code == 'admin' \u0026\u0026 $rootScope.session_roles.admin \u0026\u0026 rm.enable == 0){\r\n\t\t        alert(\"Опасно!\");\r\n\t\t        //rm.changed = false;\r\n\t\t        //rm.enable = 1;\r\n\t\t        return;\r\n\t\t    }*/\r\n\t\t\trm.changed = true;\r\n\t\t\t\r\n\t\t\tif (rm.code == 'bi_driver'){\r\n\t\t\t    $scope.detail._has_bi_driver_role =  rm.enable == 1;\r\n\t\t\t}\r\n\t\t\tif (rm.code == 'bi_customer'){\r\n\t\t\t    $scope.detail._has_bi_customer_role = rm.enable == 1;\r\n\t\t\t}\r\n\t\t\t$scope.edit();\r\n\t\t}\r\n\r\n\r\n\t\t$scope.bind = function bind(id){\r\n\t\t    \r\n\t\t    $scope.showPassword = \"password\";\r\n\t\t    \r\n\t\t    \r\n\r\n\t\t    \r\n\t\t\t$http.get('../restapi/detail?code=users\u0026id='+id).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t// here the data from the api is assigned to a variable named users\r\n\r\n\t\t\t\t$scope.editing = false;\r\n\t\t\t\t\r\n\t\t\t\t$scope.detail = {}\r\n\t\t\t\t$scope.detail.id = id;\r\n\t\t\t\t$scope.details = data;\r\n\t\t\t\tif (id!=0) {\r\n\t\t\t\t    \r\n    \t\t\t\t    \r\n            \t\tif ($stateParams.id!=0) {\t\t    \r\n            \t    \r\n            \t\tRestApiService.get('services/run/entity_acts?entity_code='+$scope.table_name+\"\u0026id=\"+$stateParams.id).\r\n            \t\tsuccess(function(data) { \r\n            \t\t    $scope.entityActions = data;\r\n            \t\t});\r\n            \t\t}\r\n        \t\t\r\n\t\t\t\t\t$scope.detail = data.users[0];\r\n\t\t\t\t\t\r\n\t\t\t\t\t//alert($scope.user_roles);\r\n\t\t\t\t}else{\r\n\t\t\t\t    $scope.detail.sys$uuid = Metronic.getUUID();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t$scope.user_roles = data.user_roles;\r\n\t\t\t\t\r\n\t\t\t\t/*\r\n                data.user_roles.forEach(function(item, i, arr) {\r\n                    //alert( i + \": \" + item + \" (массив:\" + arr + \")\" );\r\n                    \r\n                    \r\n                    if ( (item.enable == 1) \u0026\u0026 (item.code == 'bi_driver')) {\r\n                        $scope.detail._has_bi_driver_role = 1;\r\n                    }\r\n                    if ( (item.enable == 1) \u0026\u0026 (item.code == 'bi_customer')) {\r\n                        $scope.detail._has_bi_customer_role = 1;\r\n                    }                    \r\n                });\r\n                */\r\n\t\t\t\t\r\n\r\n\t\t\t\t$http.get('../restapi/query/get?code=companies_select').\r\n\t\t\t\tsuccess(function(data) {\r\n\r\n\t\t\t\t\t//$scope.companySelect = [];\r\n\t\t\t\t\t//$scope.companySelect.availableOptions = data.items;\r\n\t\t\t\t\t//$scope.detail._company_id_select={id: $scope.detail.company_id, name: \"\"};\r\n\t\t\t\t\t//$scope.bindDept();\r\n\t\t\t\t\t$scope.bindAccount();\r\n\t\t\t\t\t$scope.bindBiConsignee();\r\n\t\t\t\t\t$scope.bindBiAddress();\r\n\t\t\t\t\t$scope.bindDriver();\r\n\t\t\t\t\t$scope.bindVehicle();\r\n\t\t\t\t});\r\n\r\n\r\n                PubSub.publish(\"bindBuComponents\",{});\r\n                \r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t$scope.save = function save(){\r\n\t\t    \r\n\t\t    \r\n\t\t    \r\n\t\t    \r\n\t\t    \r\n\t\t    \r\n\t\t   \r\n\t\t    \r\n\t\t    //alert($scope.detail._pwd_new);\r\n\t\t    //alert($scope.detail.email);\r\n\t\t    \r\n\t\t    //return;\r\n\t\t    \r\n\t\t    //$scope.$apply();\r\n\t\t    \r\n\t\t    \r\n\t\t\t/*if ($scope._pwd_new2!=$scope._pwd_new) {\r\n\t\t\t\talert(data.error_text);\r\n\t\t\t\treturn;\r\n\t\t\t}*/\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t/*$scope.detail.bi_deal_id=$scope.detail._deal_select.id;\r\n\r\n\t\t\t$scope.detail.company_id = $scope.detail._company_id_select.id;\r\n\t\t\t$scope.detail.dept_id = $scope.detail._dept_id_select.id;\r\n\t\t\t$scope.detail.account_id = $scope.detail._account_id_select.id;\r\n\t\t\t$scope.detail.bi_consignee_id = $scope.detail._bi_consignee_id_select.id;\r\n\t\t\t$scope.detail.bi_address_id = $scope.detail._bi_address_id_select.id;\r\n\t\t\t$scope.detail.bi_driver_id = $scope.detail._driver_select.id;\r\n\t\t\t$scope.detail.bi_vehicle_id = $scope.detail._vehicle_select.id;\r\n\t\t\t*/\r\n\t\t\t$scope.action =  $scope.detail.id == 0 ? \"insert\":\"update\";\r\n\t\t\t\r\n\t\t\t$scope.calcRolesDML();\r\n\t\t\t\r\n\t\t\tMetronic.startPageLoading();\r\n\t\t\tvar updArr =[ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\r\n\t\t\tupdArr = updArr.concat($scope.roles);\r\n\t\t\tconsole.log(updArr);\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tDMLService.update( updArr).\r\n\t\t\tsuccess(function (data) {\r\n\t\t\t    Metronic.stopPageLoading();\r\n\t\t\t    \r\n\t\t\t    //console.log(\"vata emes\");\r\n\t\t\t\tif (data.error_text !=\"OK\") {\r\n\t\t\t\t\talert(data.error_text);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif ($scope.detail.id == 0) {\r\n\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n        \t\t\t\r\n\t\t\t\t\tdata.items.forEach(function (item, i, arr) {\r\n\t\t\t\t\t\tif (item.table_name==$scope.table_name){\r\n\t\t\t\t\t\t    \r\n                            \r\n                            /*\r\n                            \r\n                            RestApiService.post(\"services/run/sendPasswordByEmail\",\r\n                                                    {\r\n                                                        send_to:$scope.detail.email, send_from: \"kz.bapps@mail.ru\",\r\n                                                        subject:\"Регистрация на портале\",\r\n                                                        body:\"Регистрация на \"+location.origin+\"\u003cbr /\u003e\",\r\n                                                        pwd:$scope.detail._pwd_new\r\n                                                    }\r\n                                                ).\r\n                            success(function (data) {\r\n                                //alert(data.output);\r\n        \t\t\t\t\r\n                            });\t\t\t\t\t\t    \r\n                            */\r\n\t\t\t\t\t\t    /*\r\n                            RestApiService.post(\"BPMCreateInstance/\",\r\n                             {processId: 10,init:[{name:\"send_to\", value: $scope.detail.email},{name:\"send_from\", value: \"kz.bapps@mail.ru\"},\r\n                             {name:\"subject\", value: \"Регистрация на портале\"},\r\n                             {name:\"body\", value: \"Регистрация на \"+location.origin+\"\u003cbr /\u003e\"},\r\n                             {name:\"pwd\",value:$scope.detail._pwd_new}\r\n                             ]\r\n                            }).\r\n                            success(function (data) {\r\n                                alert(\"Отправлено сообщение\");\r\n        \t\t\t\t\r\n                            });\r\n                            */\r\n                            \r\n                \t\t\t/*DMLService.update(  [$scope.insertUserRoleItems(item.last_insert_id)]).\r\n                \t\t\tsuccess(function (data) {\r\n                \t\t\t\tif (data.error!=\"0\") {\r\n                \t\t\t\t\talert(data.error_text);\r\n                \t\t\t\t\treturn;\r\n                \t\t\t\t} \r\n                \t\t\t});\t\t\t\t\t\t    */\r\n\t\t\t\t\t\t    \r\n\t\t\t\t\t\t    location.href = \"#/settings/userdetails/\" +item.last_insert_id;\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}        \t\t\t\r\n        \t\t\t\t\r\n        \t\t\t\t\t\t\r\n                });\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t    //$scope.func.refresh();\r\n\t\t\t\t\t$scope.bind($stateParams.id);\r\n\t\t\t\t\tPubSub.publish(\"sidebar_panel_refresh\",{});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t$scope.cancel = function cancel(){\r\n\t\t\t$scope.bind($stateParams.id);\r\n\t\t}\r\n\t\t$scope.clearLocalCache = function(){\r\n\t\t    sessionStorage.clear();\r\n\t\t    localStorage.clear();\r\n\t\t    \r\n\t\t}\r\n\r\n\t\t$scope.bind($stateParams.id);\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\u003c/script\u003e\r\n\r\n\u003c!-- END MAIN CONTENT --\u003e\r\n","templateurl":"views/settings/userdetails.html","title":"UserDetails","updated_at":"2019-10-16 18:14:01","url":"/settings/userdetails/{id}"},{"code":"Reset password","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","id":"28","is_auto":"0","is_cache":"0","module$code":"core","module_id":"4","page_type$code":"details","page_type_id":"5","sys$uuid":"c59a397d-cea1-4200-8e0a-5cb16390dbbe","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\"\u003e\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca href=\"#/settings/users\" translate\u003eUsers\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca href=\"#/settings/userdetails/{{info.id}}\" translate\u003e{{info.title}}\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca  translate\u003eReset Password\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003e{{detail.code}}\u003c/translate\u003e\r\n\r\n\t\t\u003c/li\u003e\r\n\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\t\t\u003cbutton ng-if=\"canChangePassword()\" class=\"btn btn-primary\" ng-click=\"save()\" translate\u003eReset Password\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-warning\" ng-click=\"cancel()\" translate\u003eCancel\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"!editing\" class=\"btn btn-warning\" translate\u003eSaved\u003c/button\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c!-- END PAGE HEADER--\u003e\r\n\u003c!-- BEGIN MAIN CONTENT --\u003e\r\n\u003cdiv class=\"row\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t\u003c!--\u003cp\u003e--\u003e\r\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\r\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\r\n\t\t\u003c!--\u003c/div\u003e--\u003e\r\n\t\t\u003c!-- Begin: life time stats --\u003e\r\n\t\t\u003cdiv class=\"portlet\"\u003e\r\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\r\n\t\t\t\t\t\t\u003cform role=\"form\"\u003e\r\n\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003clabel translate\u003eOld Password\u003c/label\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-file-text-o\"\u003e\u003c/i\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"password\" ng-change=\"edit()\" ng-model= \"detail.old_password\" class=\"form-control\" placeholder=\"{{ 'Old Password' | translate }}\" \u003e\r\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003clabel translate\u003eNew Password\u003c/label\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-file-text-o\"\u003e\u003c/i\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"password\" ng-change=\"edit()\" ng-model= \"detail.new_password\" class=\"form-control\" placeholder=\"{{ 'New Password' | translate }}\" \u003e\r\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003clabel translate\u003eConfirm New Password\u003c/label\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-file-text-o\"\u003e\u003c/i\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"password\" ng-change=\"edit()\" ng-model= \"detail.new_password2\" class=\"form-control\" placeholder=\"{{ 'Confirm New Password' | translate }}\" \u003e\r\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003c/form\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c!-- End: life time stats --\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c/section\u003e\r\n\r\n\u003cscript type=\"text/javascript\"\u003e\r\n\r\n\r\n\tfunction basicsCtrl($scope, $http,$log,$stateParams) {\r\n\r\n\r\n\r\n\r\n\t\t$scope.canChangePassword = function(){\r\n\t\t\treturn (($scope.editing) \u0026\u0026 ($scope.detail.new_password == $scope.detail.new_password2)\r\n\t\t\t\u0026\u0026 ($scope.detail.old_password != $scope.detail.new_password));\r\n\t\t}\r\n\t\t//console.log($stateParams);\r\n\t\t//console.log($stateParams.p[0]);\r\n\r\n\r\n\t\t$scope.edit = function edit(){\r\n\t\t\t$scope.editing = true;\r\n\t\t}\r\n\r\n\t\t$scope.changeCompany = function(){\r\n\t\t\t$scope.edit();\r\n\t\t\t$scope.bindDept();\r\n\r\n\t\t}\r\n\r\n\t\t$scope.bind = function(){\r\n\t\t\t$scope.detail = {};\r\n\t\t\t$scope.detail.old_password = \"\";\r\n\t\t\t$scope.detail.new_password = \"\";\r\n\t\t\t$scope.detail.new_password2 = \"\";\r\n\t\t\t$scope.editing = false;\r\n\t\t\t$http.get(\"../restapi/query/get?code=resetmypassword\").\r\n\t\t\tsuccess(function(data) {\r\n\r\n\t\t\t\t$scope.info = data.items[0];\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t$scope.save = function save(){\r\n\r\n\r\n\t\t\t//$scope.detail.company_id = $scope.detail._company_id_select.id;\r\n\t\t\t//$scope.detail.dept_id = $scope.detail._dept_id_select.id;\r\n\t\t\t$http.post('../auth/resetmypassword', $scope.detail).\r\n\t\t\t\tsuccess(function (data) {\r\n\r\n\t\t\t\t\tif (data.error==\"1\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talert(\"Старый пароль неверен!\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (data.error!=\"0\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talert(\"Ошибка при сохранении!\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (data.error==\"0\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talert(\"Пароль успешно изменен!\");\r\n\t\t\t\t\t\t$scope.bind();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t$scope.cancel = function cancel(){\r\n\t\t\t$scope.bind();\r\n\t\t}\r\n\r\n\t\t$scope.bind();\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\u003c/script\u003e\r\n\r\n\u003c!-- END MAIN CONTENT --\u003e\r\n","templateurl":"views/settings/resetpassword.html","title":"Reset password","updated_at":"2019-10-16 18:14:01","url":"/settings/resetmypassword"},{"code":"resetpassword2","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","id":"200","is_auto":"0","is_cache":"0","module$code":"core","module_id":"4","page_type$code":"details","page_type_id":"5","sys$uuid":"f1528e3d-f33b-43fc-99e4-157191849744","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\"\u003e\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ca\u003e\u003ci class=\"fa fa-key\"\u003e\u003c/i\u003e \u003ctranslate\u003eReset Password\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca href=\"#/settings/users\" translate\u003eUsers\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca href=\"#/settings/userdetails/{{detail.id}}\"\u003e{{detail.title}}\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003e{{detail.code}}\u003c/translate\u003e\r\n\r\n\t\t\u003c/li\u003e\r\n\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\t\t\u003cbutton ng-if=\"canChangePassword()\" class=\"btn btn-primary\" ng-click=\"save()\" translate\u003eReset Password\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-warning\" ng-click=\"cancel()\" translate\u003eCancel\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"!editing\" class=\"btn btn-warning\" translate\u003eSaved\u003c/button\u003e\r\n\t\t\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eEdit Page\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c!-- END PAGE HEADER--\u003e\r\n\u003c!-- BEGIN MAIN CONTENT --\u003e\r\n\u003cdiv class=\"row\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t\u003c!--\u003cp\u003e--\u003e\r\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\r\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\r\n\t\t\u003c!--\u003c/div\u003e--\u003e\r\n\t\t\u003c!-- Begin: life time stats --\u003e\r\n\t\t\u003cdiv class=\"portlet\"\u003e\r\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\r\n\t\t\t\t\t\t\u003cform role=\"form\"\u003e\r\n\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003clabel translate\u003eNew Password\u003c/label\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-file-text-o\"\u003e\u003c/i\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"password\" ng-change=\"edit()\" ng-model= \"detail.new_password\" class=\"form-control\" placeholder=\"{{ 'New Password' | translate }}\" \u003e\r\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003clabel translate\u003eConfirm New Password\u003c/label\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-file-text-o\"\u003e\u003c/i\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"password\" ng-change=\"edit()\" ng-model= \"detail.new_password2\" class=\"form-control\" placeholder=\"{{ 'Confirm New Password' | translate }}\" \u003e\r\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003c/form\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c!-- End: life time stats --\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c/section\u003e\r\n\r\n\u003cscript type=\"text/javascript\"\u003e\r\n\r\n\r\n\tfunction basicsCtrl($scope, $http,$log,$stateParams,RestApiService ) {\r\n\r\n\r\n\r\n\t\t$scope.canChangePassword = function(){\r\n\t\t\treturn (($scope.editing) \u0026\u0026 ($scope.detail.new_password == $scope.detail.new_password2) );\r\n\t\t}\r\n\t\t//console.log($stateParams);\r\n\t\t//console.log($stateParams.p[0]);\r\n\r\n\r\n\t\t$scope.edit = function edit(){\r\n\t\t\t$scope.editing = true;\r\n\t\t}\r\n\r\n\t\t$scope.changeCompany = function(){\r\n\t\t\t$scope.edit();\r\n\t\t\t$scope.bindDept();\r\n\r\n\t\t}\r\n\r\n\t\t$scope.bind = function(){\r\n\t\t\t$scope.detail = {};\r\n\t\t\t\r\n\t\t\t$scope.detail.new_password = \"\";\r\n\t\t\t$scope.detail.new_password2 = \"\";\r\n\t\t\t$scope.editing = false;\r\n\t\t\t\r\n\t\t\tRestApiService.get('detail?code=users\u0026id='+$stateParams.id).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t// here the data from the api is assigned to a variable named users\r\n\r\n                \r\n                \r\n                $scope.detail = data.users[0];\r\n        \t\t\r\n\r\n\t\t\t});\r\n\t\t\t\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t$scope.save = function save(){\r\n\r\n\r\n\t\t\t//$scope.detail.company_id = $scope.detail._company_id_select.id;\r\n\t\t\t//$scope.detail.dept_id = $scope.detail._dept_id_select.id;\r\n\t\t\t$scope.detail.user_id=$stateParams.id;\r\n\t\t\t$http.post('../auth/resetpassword', $scope.detail).\r\n\t\t\t\tsuccess(function (data) {\r\n\r\n\t\t\t\t\tif (data.error==\"1\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talert(\"Старый пароль неверен!\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (data.error!=\"0\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talert(\"Ошибка при сохранении!\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (data.error==\"0\")\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\talert(\"Пароль успешно изменен!\");\r\n\t\t\t\t\t\t$scope.bind();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t$scope.cancel = function cancel(){\r\n\t\t\t$scope.bind();\r\n\t\t}\r\n\r\n\t\t$scope.bind();\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\u003c/script\u003e\r\n\r\n\u003c!-- END MAIN CONTENT --\u003e\r\n","templateurl":"","title":"Reset Password","updated_at":"2019-10-16 18:14:01","url":"/settings/resetpassword2/{id}"},{"code":"cb_profile","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","id":"253","is_auto":"0","is_cache":"0","module$code":"cb","module_id":"16","page_type$code":"details","page_type_id":"5","sys$uuid":"91dd5c64-185d-4122-a39b-64a7ae2e38f1","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\"\u003e\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca  translate\u003eReset Password\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003e{{detail.title}}\u003c/translate\u003e\r\n\r\n\t\t\u003c/li\u003e\r\n\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-primary\" ng-click=\"save()\" translate\u003eSave\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-warning\" ng-click=\"cancel()\" translate\u003eCancel\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"!editing\" class=\"btn btn-warning\" translate\u003eSaved\u003c/button\u003e\r\n\t\t\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eEdit Page\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c!-- END PAGE HEADER--\u003e\r\n\u003c!-- BEGIN MAIN CONTENT --\u003e\r\n\u003cdiv class=\"row\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t\u003c!--\u003cp\u003e--\u003e\r\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\r\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\r\n\t\t\u003c!--\u003c/div\u003e--\u003e\r\n\t\t\u003c!-- Begin: life time stats --\u003e\r\n\t\t\u003cdiv class=\"portlet\"\u003e\r\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\r\n\t\t\t\t\t\t\u003cform role=\"form\"\u003e\r\n\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\r\n\t\t\t\t\t\t\t    \u003cdiv class=\"row\"\u003e\r\n    \t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-3\"\u003e\r\n                                    \t\u003cdiv class=\"form-body\" \u003e\r\n                                    \t\t\u003ch4 translate\u003eAvatar\u003c/h4\u003e\r\n                                    \t\t\u003cbu-image-uploader-by-url on-change=\"edit\" url=\"detail.avatar_url\"\u003e\u003c/bu-image-uploader-by-url\u003e\r\n                                    \t\u003c/div\u003e\t\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t        \u003c/div\u003e       \r\n\t\t\t\t\t\t\t        \u003cdiv class=\"col-md-9\"\u003e\r\n        \t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n        \t\t\t\t\t\t\t\t\t\u003clabel translate\u003eE-Mail\u003c/label\u003e\r\n        \t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n        \t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n        \t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-file-text-o\"\u003e\u003c/i\u003e\r\n        \t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n        \t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" readonly ng-change=\"edit()\" ng-model= \"detail._user_email\" class=\"form-control\" placeholder=\"{{ 'E-Mail' | translate }}\" \u003e\r\n        \t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n        \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n        \t\t\t\t\t\t\t\t\u003cdiv class=\"form-group\"\u003e\r\n        \t\t\t\t\t\t\t\t\t\u003clabel translate\u003eTitle\u003c/label\u003e\r\n        \t\t\t\t\t\t\t\t\t\u003cdiv class=\"input-group\"\u003e\r\n        \t\t\t\t\t\t\t\t\t\t\u003cspan class=\"input-group-addon\"\u003e\r\n        \t\t\t\t\t\t\t\t\t\t\u003ci class=\"fa fa-file-text-o\"\u003e\u003c/i\u003e\r\n        \t\t\t\t\t\t\t\t\t\t\u003c/span\u003e\r\n        \t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" readonly ng-change=\"edit()\" ng-model= \"detail._user_title\" class=\"form-control\" placeholder=\"{{ 'Title' | translate }}\" \u003e\r\n        \t\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n        \t\t\t\t\t\t\t\t\u003c/div\u003e\r\n        \t\t\t\t\t\t\t\t\r\n        \t\t\t\t\t\t\t\t\u003cbu-input-label icon=\"fa fa-bomb\"  label=\"Название компании\" id-model=\"detail.title\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \t\t\t\t\t\t\t\t\u003cbu-input-label icon=\"fa fa-bomb\"  label=\"БИН компании\" id-model=\"detail.bin\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \t\t\t\t\t\t\t\t\u003cbu-input-label icon=\"fa fa-bomb\"  label=\"Адрес компании\" id-model=\"detail.address\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t    \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\r\n\r\n\r\n\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003c/form\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c!-- End: life time stats --\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c/section\u003e\r\n\r\n\u003cscript type=\"text/javascript\"\u003e\r\n\r\n\r\n\tfunction basicsCtrl($scope, $http,$log,$stateParams,UIService,RestApiService,DMLService) {\r\n\r\n\r\n        $scope.table_name=\"cb_profiles\";\r\n\r\n\t\t$scope.edit = function edit(){\r\n\t\t\t$scope.editing = true;\r\n\t\t}\r\n\r\n         $scope.keyDown = function(e) {\r\n          if ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)){\r\n            $scope.save();\r\n          }\r\n        };\r\n\r\n\t\t$scope.bind = function bind(){\r\n\t\t    \r\n\t\t\tRestApiService.get('query/get?code=cb_profile').\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t// here the data from the api is assigned to a variable named users\r\n\r\n\r\n\t\t\t\t$scope.editing = false;\r\n\t\t\t\t$scope.detail = {};\r\n\t\t\t\t$scope.detail.id = $stateParams.id;\r\n\t\t\t\tif ($stateParams.id!=0) {\r\n\t\t\t\t\t$scope.detail = data.items[0];\r\n\r\n\t\t\t\t}else{\r\n                \tif (Metronic.getParameterByName(\"df_account_id\")!=null){\r\n                \t\t$scope.detail.account_id = Metronic.getParameterByName(\"df_account_id\");    \r\n                \t}\r\n                }\r\n\t\t\t\t\r\n\t\t\t\t//PubSub.publish(\"bindBuComponents\",{});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t$scope.save = function save(){\r\n\t\t    //$scope.detail = {}\r\n\t\t\t//$scope.action =  $scope.detail.id == 0 ? \"insert\":\"update\";\r\n\r\n\t\t\tDMLService.update(  [ {table_name:$scope.table_name,action:\"upsert\", upsert_attrs:[\"user_id\"], values: [$scope.detail]}  ]).\r\n\t\t\t\tsuccess(function (data) {\r\n\t\t\t\t\tif (data.error!=\"0\") {\r\n\t\t\t\t\t\talert(data.error_text);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($scope.detail.id == 0) {\r\n\t\t\t\t\t\tdata.items.forEach(function (item, i, arr) {\r\n\t\t\t\t\t\t\tif (item.table_name==$scope.table_name){\r\n\t\t\t\t\t\t\t\t//location.href = \"%DETAILURL%\" +item.last_insert_id;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$scope.bind();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t$scope.cancel = function cancel(){\r\n\t\t    \r\n\t\t\t$scope.bind($stateParams.id);\r\n\t\t}\r\n\r\n\t\t$scope.bind($stateParams.id);\r\n\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\u003c/script\u003e\r\n\r\n\u003c!-- END MAIN CONTENT --\u003e\r\n","templateurl":"","title":"Профиль","updated_at":"2019-10-16 18:14:01","url":"/cb/profile"},{"code":"crm_users","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","filter_set_id":"211","filter_sets$code":"managers","icon":"fa fa-users","id":"546","is_auto":"0","is_cache":"0","module$code":"crm","module_id":"1","page_type$code":"list","page_type_id":"1","query$code":"crm_users","query_id":"615","sys$uuid":"19d2f658-8247-4e32-b023-a85ac2edd597","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\n\t\t ng-init=\"init({pageData:$state.current.data,filter_set:$state.current.data.pageFilterSetCode,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\n\t\t ng-controller=\"SimpleTableController\"\u003e\n\u003cdiv class=\"page-bar\"\u003e\n\t\u003cul class=\"page-breadcrumb\"\u003e\n\t\t\u003cli\u003e\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n\t\t\t\u003ctranslate\u003eПользователи и права\u003c/translate\u003e\n\t\t\u003c/li\u003e\n\t\u003c/ul\u003e\n\t\u003cdiv class=\"page-toolbar\"\u003e\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\n\t\t\t\u003c!--\u003ca  href=\"%DETAILURL%0\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003e\n\t\t\t\tAdd\u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\n\t\t\t\u003c/a\u003e--\u003e\n\t\t\t\u003cbutton translate type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\n\t\t\tActions \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\n\t\t\t\u003c/button\u003e\n\t\t\t\u003cul class=\"dropdown-menu pull-right\" user=\"menu\"\u003e\n\t\t\t    \u003cli\u003e\u003ca href=\"#/settings/user_params\"\u003eПараметры пользователей\u003c/a\u003e\u003c/li\u003e\n\t\t\t\t\u003cng-include src=\"'/restapi/widget/simpletable-select-actions'\" \u003e\n\t\t\t\t\u003c/ng-include\u003e\n\t\t\t\u003c/ul\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c!-- END PAGE HEADER--\u003e\n\n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n\u003c!-- BEGIN MAIN CONTENT --\u003e\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--SAMPLE NOTE:--\u003e\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\n\t\t\u003cdiv class=\"row\"\u003e\n\t\t    \u003cdiv class=\"col-lg-12\"\u003e\n    \t\t    \u003ca  ng-click=\"pubSubPublish('chooseBPMSModal',{'processCode':'crm_cloud_invite', 'init': [] })\"  type=\"button\" class=\"btn btn-fit-height btn-primary\" \u003e\n    \t\t\t\t\u003ci class=\"fa fa-plus\"\u003e\u003c/i\u003e Пригласить\n    \t\t\t\u003c/a\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e    \n\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\u003cdiv class=\"table-responsive\"\u003e\n\t\t\t\t\t\t\u003ctable st-table=\"rowCollection\"  class=\"table table-striped table-bordered\"\u003e\n\t\t\t\t\t\t\t\u003cthead\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eTitle\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eE-Mail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eОтдел\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eRoles\u003c/th\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/thead\u003e\n\t\t\t\t\t\t\t\u003ctbody\u003e\n\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in rowCollection\"\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\u003cng-include src=\"'views/blocks/simpletable-select-checkbox-row.html'\"\u003e\u003c/ng-include\u003e\n\t\t\t\t\t\t\t\t    \u003cimg ng-if=\"row.avatar_url\" alt=\"\" class=\"img-circle\"  style=\"max-height:25px\" src=\"{{row.avatar_url}}\"/\u003e\n\t\t\t\t\t\t\t\t\t\u003ca class=\"btn btn-xs\" href=\"#/settings/userdetails/{{row.id}}/?p[]=page::{{currentPage}}\"\u003e \u003cu\u003e{{row.title}}\u003c/u\u003e\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e{{row._dep_title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':0}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':1}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':2}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':3}}\u003c/span\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\t\t\t\t\t\t\t    \n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tbody\u003e\n\n\t\t\t\t\t\t\t\u003ctfoot\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003ctd colspan=\"5\" class=\"text-center\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tfoot\u003e\n\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003c!-- End: life time stats --\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c/section\u003e\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Пользователи и права","updated_at":"2019-10-16 18:14:01","url":"/crm/users/"},{"code":"crm_rep_byemp","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","id":"712","is_auto":"0","is_cache":"0","module$code":"crm","module_id":"1","page_type$code":"list","page_type_id":"1","query$code":"crm_rep_byemp","query_id":"644","sys$uuid":"5e52733d-253c-4319-aa6d-6073728f1b73","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\n\t\t ng-init=\"init({pageData:$state.current.data,filter_set:$state.current.data.pageFilterSetCode,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\n\t\t ng-controller=\"basicCtrl\"\u003e\n\u003ch3\u003e\n\n\t\t\t\u003ctranslate\u003eОтчет по сотрудникам\u003c/translate\u003e\n\t\t\t\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eEdit Page\u003c/translate\u003e\u003c/a\u003e\n\t\n\n\u003c/h3\u003e\n\u003c!-- END PAGE HEADER--\u003e\n\n\u003cdiv class=\"row well\"\u003e\n    \u003cdiv class=\"row\"\u003e\n        \u003cdiv class=\"col-md-3\"\u003e\n            \u003cbu-select label=\"Период\" query-code=\"periods_select\" id-model=\"detail.period_id\" value=\"detail.period\" on-change=\"changePeriod\" \u003e\u003c/bu-select\u003e\n        \u003c/div\u003e    \n        \u003cdiv class=\"col-md-3\"\u003e\n            \u003cbu-date  label=\"с\" id-model=\"detail.begin_at\" on-change=\"edit\" \u003e\u003c/bu-date\u003e\n        \u003c/div\u003e    \n        \u003cdiv class=\"col-md-3\"\u003e\n            \u003cbu-date  label=\"По\" id-model=\"detail.end_at\" on-change=\"edit\" \u003e\u003c/bu-date\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"col-md-3\"\u003e\n            \u003cbutton class=\"btn btn-primary\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n        \u003c/div\u003e        \n    \u003c/div\u003e        \n\u003c/div\u003e\n\u003c!-- BEGIN MAIN CONTENT --\u003e\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--SAMPLE NOTE:--\u003e\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\u003cdiv class=\"table-responsive\"\u003e\n\t\t\t\t\t\t\u003ctable st-table=\"rowCollection\"  class=\"table table-striped table-bordered\"\u003e\n\t\t\t\t\t\t\t\u003cthead\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003cth\u003e\u003ca ng-click=\"sortBy('title')\" translate\u003eTitle\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'title' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'title'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth\u003e\u003ca ng-click=\"sortBy('created_deals')\" translate\u003eСоздано сделок\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'created_deals' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'created_deals'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth\u003e\u003ca ng-click=\"sortBy('work_deals')\" translate\u003eСделок в работе\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'work_deals' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'work_deals'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth\u003e\u003ca ng-click=\"sortBy('created_accounts')\" translate\u003eСоздано контактов\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'created_accounts' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'created_accounts'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\n                                \u003cth\u003e\u003ca ng-click=\"sortBy('created_offers')\" translate\u003eСоздано КП\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'created_offers' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'created_offers'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\n                                \u003cth\u003e\u003ca ng-click=\"sortBy('created_invoices')\" translate\u003eСоздано СО\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'created_invoices' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'created_invoices'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\n    \n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/thead\u003e\n\t\t\t\t\t\t\t\u003ctbody\u003e\n\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in rowCollection\"\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\u003cng-include src=\"'views/blocks/simpletable-select-checkbox-row.html'\"\u003e\u003c/ng-include\u003e\n\t\t\t\t\t\t\t\t\t\u003cimg ng-if=\"row._user_avatar_url\" alt=\"\" class=\"img-circle\"  style=\"max-height:25px\" src=\"{{row._user_avatar_url}}\"/\u003e\n\t\t\t\t\t\t\t\t\t\u003ci class=\"{{row.icon}}\"\u003e\u003c/i\u003e {{row.title}}\n\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t   \u003ca href=\"#/crm/crm_rep_byemp_dtl1/?df_user_id={{row.id}}\u0026df_begin_at={{detail.begin_at}}\u0026df_end_at={{detail.end_at}}\"\u003e {{row.created_deals}}\u003c/a\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t    \u003ca href=\"#/crm/crm_rep_byemp_dtl2/?df_user_id={{row.id}}\u0026df_begin_at={{detail.begin_at}}\u0026df_end_at={{detail.end_at}}\"\u003e {{row.work_deals}}\u003c/a\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e    \n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t    \u003ca href=\"#/crm/crm_rep_byemp_dtl3/?df_user_id={{row.id}}\u0026df_begin_at={{detail.begin_at}}\u0026df_end_at={{detail.end_at}}\"\u003e {{row.created_accounts}}\u003c/a\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e \t\t\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t    {{row.created_offers}}\n\t\t\t\t\t\t\t\t\u003c/td\u003e \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t    {{row.created_invoices}}\n\t\t\t\t\t\t\t\t\u003c/td\u003e \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tbody\u003e\n\n\t\t\t\t\t\t\t\u003ctfoot\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003ctd colspan=\"5\" class=\"text-center\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tfoot\u003e\n\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003c!-- End: life time stats --\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c/section\u003e\n\n\u003cscript\u003e\nfunction basicCtrl($scope,RestApiService,PubSub,$filter){\n    \n    \n        $scope.detail = {};\n        \n        $scope.changePeriod = function(data){\n            console.log(data,\"data\");\n            if (data.code=='this_month'){\n                var date = new Date();\n                var firstDay = new Date(date.getFullYear(), date.getMonth(), 1);\n                var lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n                $scope.detail.begin_at = $filter('date')(firstDay, \"yyyy-MM-dd\"); //$filter('date')(firstDay, \"yyyy-MM-dd HH:mm:ss\");\n                $scope.detail.end_at =  $filter('date')(lastDay, \"yyyy-MM-dd\");  //$filter('date')(lastDay, \"yyyy-MM-dd HH:mm:ss\");\n            } else if (data.code=='this_week'){\n                \n            var curr = new Date; // get current date\n            var first = curr.getDate() - curr.getDay() + 1; // First day is the day of the month - the day of the week\n            var last = first + 6; // last day is the first day + 6\n            $scope.detail.begin_at =  $filter('date')(new Date(curr.setDate(first)), \"yyyy-MM-dd\"); \n            $scope.detail.end_at = $filter('date')(new Date(curr.setDate(last)), \"yyyy-MM-dd\"); \n            } else if (data.code==\"this_year\"){\n                var now = new Date();\n                $scope.detail.begin_at = $filter('date')(new Date(now.getFullYear(), 0, 1), \"yyyy-MM-dd\");  \n                $scope.detail.end_at = $filter('date')(new Date(now.getFullYear(), 12, 0), \"yyyy-MM-dd\");  \n            } else if (data.code =='this_quarter'){\n                var now = new Date();\n                var quarter = Math.floor((now.getMonth() + 3) / 3);\n                $scope.detail.begin_at = $filter('date')(new Date(now.getFullYear(), (quarter*3)-3, 1), \"yyyy-MM-dd\");  \n                $scope.detail.end_at = $filter('date')(new Date(now.getFullYear(), (quarter*3), 0), \"yyyy-MM-dd\");  \n            } else if (data.code =='today'){\n                var now = new Date();\n                $scope.detail.begin_at = $filter('date')(new Date(), \"yyyy-MM-dd\");  \n                $scope.detail.end_at = $filter('date')(new Date(), \"yyyy-MM-dd\");  \n            } else if (data.code =='yesterday'){\n                var now = new Date();\n                $scope.detail.begin_at = $filter('date')(new Date(new Date().getTime() - 86400000), \"yyyy-MM-dd\");  \n                $scope.detail.end_at = $filter('date')(new Date(new Date().getTime() - 86400000), \"yyyy-MM-dd\");  \n            }\n            \n            //$scope.detail.begin_at = $filter('date')($scope.detail.begin_at, \"yyyy-MM-dd HH:mm:ss\");\n            //$scope.detail.end_at = $filter('date')($scope.detail.end_at, \"yyyy-MM-dd HH:mm:ss\");\n            $scope.bind();\n        }\n        \n    \tif (Metronic.getParameterByName(\"df_begin_at\")!=null){\n    \t\t$scope.detail.begin_at = Metronic.getParameterByName(\"df_begin_at\");    \n    \t}\n    \t\n    \tif (Metronic.getParameterByName(\"df_end_at\")!=null){\n    \t\t$scope.detail.end_at = Metronic.getParameterByName(\"df_end_at\");    \n    \t}        \n        \n\t\t$scope.bind = function bind(){\n\t\t    Metronic.startPageLoading();\n\t\t\tRestApiService.get('query/get?code=crm_rep_byemp'+\n\t\t\t'\u0026param1='+$scope.detail.begin_at+'\u0026param2='+$scope.detail.end_at\n\t\t\t).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\t\t\t\t$scope.rowCollection = data.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\n\t\t\t\tPubSub.publish(\"bindBuComponents\",{});\n\n\t\t\t});\n\t\t}\n\t\t$scope.bind();\n}\n\u003c/script\u003e\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Отчет по сотрудникам","updated_at":"2019-10-16 18:14:01","url":"/crm/crm_rep_byemp"},{"code":"crm_rep_byemp_dtl1","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","id":"717","is_auto":"0","is_cache":"0","module$code":"crm","module_id":"1","page_type$code":"list","page_type_id":"1","sys$uuid":"46dee464-a15d-48a8-aeaf-79a67c26ffcb","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\r\n\t\t ng-init=\"init({pageData:$state.current.data,filter_set:$state.current.data.pageFilterSetCode,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\r\n\t\t ng-controller=\"basicCtrl\"\u003e\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca href=\"#/crm/crm_rep_byemp?df_begin_at={{detail.begin_at}}\u0026df_end_at={{detail.end_at}}\"\u003eОтчет по сотрудникам\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003eОтчет по сотруднику, Созданные сделки за период\u003c/translate\u003e\r\n\t\t\u003c/li\u003e\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\t\t\u003ca  href=\"%DETAILURL%0\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003e\r\n\t\t\t\tAdd\u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\r\n\t\t\t\u003c/a\u003e\r\n\t\t\t\u003cbutton translate type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\r\n\t\t\tActions \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\r\n\t\t\t\u003c/button\u003e\r\n\t\t\t\u003cul class=\"dropdown-menu pull-right\" user=\"menu\"\u003e\r\n\t\t\t\t\u003cng-include src=\"'/restapi/widget/simpletable-select-actions'\" \u003e\r\n\t\t\t\t\u003c/ng-include\u003e\r\n\t\t\t\u003c/ul\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c!-- END PAGE HEADER--\u003e\r\n\r\n\u003cdiv class=\"row well\"\u003e\r\n    \u003cdiv class=\"row\"\u003e\r\n        \r\n        \u003cdiv class=\"col-md-2\"\u003e\r\n            \u003cbu-select label=\"Менеджер\"  query-code=\"users_select\" id-model=\"detail.user_id\" on-change=\"edit\" \u003e\u003c/bu-select\u003e\r\n        \u003c/div\u003e        \r\n        \u003cdiv class=\"col-md-2\"\u003e\r\n            \u003cbu-date  label=\"Период с\" id-model=\"detail.begin_at\" on-change=\"edit\" \u003e\u003c/bu-date\u003e\r\n        \u003c/div\u003e    \r\n        \u003cdiv class=\"col-md-2\"\u003e\r\n            \u003cbu-date  label=\"По\" id-model=\"detail.end_at\" on-change=\"edit\" \u003e\u003c/bu-date\u003e\r\n        \u003c/div\u003e\r\n        \u003cdiv class=\"col-md-2\"\u003e\r\n            \u003cbutton class=\"btn btn-primary\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\r\n        \u003c/div\u003e        \r\n    \u003c/div\u003e        \r\n\u003c/div\u003e\r\n\u003c!-- BEGIN MAIN CONTENT --\u003e\r\n\u003cdiv class=\"row\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t\u003c!--\u003cp\u003e--\u003e\r\n\t\t\t\t\u003c!--SAMPLE NOTE:--\u003e\r\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\r\n\t\t\u003c!--\u003c/div\u003e--\u003e\r\n\t\t\u003c!-- Begin: life time stats --\u003e\r\n\t\t\u003cdiv class=\"portlet\"\u003e\r\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t\t\u003cdiv class=\"table-responsive\"\u003e\r\n\t\t\t\t\t\t\u003ctable st-table=\"rowCollection\"  class=\"table table-striped table-bordered\"\u003e\r\n\t\t\t\t\t\t\t\u003cthead\u003e\r\n\t\t\t\t\t\t\t\u003ctr\u003e\r\n\t\t\t\t\t\t\t\t\u003cth\u003e\u003ca ng-click=\"sortBy('title')\" translate\u003eTitle\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'title' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'title'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\r\n\t\t\t\t\t\t\t\t\u003cth\u003e\u003ca ng-click=\"sortBy('_stage_title')\" translate\u003eЭтап продаж\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == '_stage_title' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == '_stage_title'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\r\n\t\t\t\t\t\t\t\t\u003cth\u003e\u003ca ng-click=\"sortBy('amount')\" translate\u003eБюджет\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'amount' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'amount'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\r\n\t\t\t\t\t\t\t\t\u003cth\u003e\u003ca ng-click=\"sortBy('created_at')\" translate\u003eСоздано\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == 'created_at' \" class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == 'created_at'\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\u003c/th\u003e\r\n\t\t\t\t\t\t\t\u003c/tr\u003e\r\n\t\t\t\t\t\t\t\u003c/thead\u003e\r\n\t\t\t\t\t\t\t\u003ctbody\u003e\r\n\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in rowCollection\"\u003e\r\n\t\t\t\t\t\t\t\t\u003ctd\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cng-include src=\"'views/blocks/simpletable-select-checkbox-row.html'\"\u003e\u003c/ng-include\u003e\r\n\t\t\t\t\t\t\t\t\t\u003ci class=\"{{row.icon}}\"\u003e\u003c/i\u003e\r\n\t\t\t\t\t\t\t\t\t\u003ca href=\"#/crm/dealsdetails/{{row.id}}\"\u003e{{row.title}}\u003c/a\u003e\r\n\t\t\t\t\t\t\t\t\u003c/td\u003e\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\u003ctd\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:{{row._stage_color}}\"\u003e{{row._stage_title}}\u003c/span\u003e\r\n\t\t\t\t\t\t\t\t\u003c/td\u003e\r\n\t\t\t\t\t\t\t\t\u003ctd\u003e\r\n\t\t\t\t\t\t\t\t    {{row.amount | number:2}}\r\n\t\t\t\t\t\t\t\t\u003c/td\u003e    \r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\u003ctd\u003e\r\n\t\t\t\t\t\t\t\t    {{row.created_at}}\r\n\t\t\t\t\t\t\t\t\u003c/td\u003e  \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\u003c/tr\u003e\r\n\t\t\t\t\t\t\t\u003c/tbody\u003e\r\n\r\n\t\t\t\t\t\t\t\u003ctfoot\u003e\r\n\t\t\t\t\t\t\t\u003ctr\u003e\r\n\t\t\t\t\t\t\t\t\u003ctd colspan=\"5\" class=\"text-center\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\r\n\t\t\t\t\t\t\t\t\u003c/td\u003e\r\n\t\t\t\t\t\t\t\u003c/tr\u003e\r\n\t\t\t\t\t\t\t\u003c/tfoot\u003e\r\n\t\t\t\t\t\t\u003c/table\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c!-- End: life time stats --\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c/section\u003e\r\n\r\n\u003cscript\u003e\r\nfunction basicCtrl($scope,RestApiService,PubSub,$stateParams){\r\n    \r\n    \r\n        $scope.detail = {};\r\n        \r\n    \tif (Metronic.getParameterByName(\"df_user_id\")!=null){\r\n    \t\t$scope.detail.user_id = Metronic.getParameterByName(\"df_user_id\");    \r\n    \t}        \r\n        \r\n    \tif (Metronic.getParameterByName(\"df_begin_at\")!=null){\r\n    \t\t$scope.detail.begin_at = Metronic.getParameterByName(\"df_begin_at\");    \r\n    \t}\r\n    \t\r\n    \tif (Metronic.getParameterByName(\"df_end_at\")!=null){\r\n    \t\t$scope.detail.end_at = Metronic.getParameterByName(\"df_end_at\");    \r\n    \t}\t\r\n        \r\n\t\t$scope.bind = function bind(){\r\n\t\t    Metronic.startPageLoading();\r\n\t\t\tRestApiService.get('query/get?code=crm_rep_byemp_dtl1'+\r\n\t\t\t'\u0026param1='+$scope.detail.begin_at+'\u0026param2='+$scope.detail.end_at+\"\u0026param3=\"+$scope.detail.user_id\r\n\t\t\t).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t// here the data from the api is assigned to a variable named users\r\n\t\t\t\t$scope.rowCollection = data.items;\r\n\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t\t\r\n\t\t\t\tPubSub.publish(\"bindBuComponents\",{});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\t\t$scope.bind();\r\n}\r\n\u003c/script\u003e\r\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Отчет по сотруднику 1","updated_at":"2019-10-16 18:14:01","url":"/crm/crm_rep_byemp_dtl1"},{"code":"1c_users","created_at":"2017-02-10 13:25:35","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","filter_set_id":"211","filter_sets$code":"managers","id":"740","is_auto":"0","is_cache":"0","module$code":"1cdemo","module_id":"20","page_type$code":"list","page_type_id":"1","query$code":"1c_users","query_id":"679","sys$uuid":"297e8692-2463-451b-8e34-22393df5cf1e","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\n\t\t ng-init=\"init({pageData:$state.current.data,filter_set:$state.current.data.pageFilterSetCode,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\n\t\t ng-controller=\"SimpleTableController\"\u003e\n\u003cdiv class=\"page-bar\"\u003e\n\t\u003cul class=\"page-breadcrumb\"\u003e\n\t\t\u003cli\u003e\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n\t\t\t\u003ctranslate\u003eПользователи и права\u003c/translate\u003e\n\t\t\u003c/li\u003e\n\t\u003c/ul\u003e\n\t\u003cdiv class=\"page-toolbar\"\u003e\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\n\t\t\t\u003ca  href=\"#/settings/userdetails/0\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003e\n\t\t\t\tAdd\u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\n\t\t\t\u003c/a\u003e\n\t\t\t\u003cbutton translate type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\n\t\t\tActions \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\n\t\t\t\u003c/button\u003e\n\t\t\t\u003cul class=\"dropdown-menu pull-right\" user=\"menu\"\u003e\n\t\t\t\t\u003cng-include src=\"'/restapi/widget/simpletable-select-actions'\" \u003e\n\t\t\t\t\u003c/ng-include\u003e\n\t\t\t\u003c/ul\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c!-- END PAGE HEADER--\u003e\n\n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n\u003c!-- BEGIN MAIN CONTENT --\u003e\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--SAMPLE NOTE:--\u003e\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\u003cdiv class=\"table-responsive\"\u003e\n\t\t\t\t\t\t\u003ctable st-table=\"rowCollection\"  class=\"table table-striped table-bordered\"\u003e\n\t\t\t\t\t\t\t\u003cthead\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eTitle\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eE-Mail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eОтдел\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eRoles\u003c/th\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/thead\u003e\n\t\t\t\t\t\t\t\u003ctbody\u003e\n\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in rowCollection\"\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\u003cng-include src=\"'views/blocks/simpletable-select-checkbox-row.html'\"\u003e\u003c/ng-include\u003e\n\t\t\t\t\t\t\t\t    \u003cimg ng-if=\"row._user_pic_file\" alt=\"\" class=\"img-circle\"  style=\"max-height:25px\" src=\"/restapi/getfile?code={{row._user_pic_file}}\"/\u003e\n\t\t\t\t\t\t\t\t\t\u003ca class=\"btn btn-xs\" href=\"#/settings/userdetails/{{row.id}}/?p[]=page::{{currentPage}}\"\u003e \u003cu\u003e{{row.title}}\u003c/u\u003e\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e{{row._dep_title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':0}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':1}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':2}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':3}}\u003c/span\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\t\t\t\t\t\t\t    \n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tbody\u003e\n\n\t\t\t\t\t\t\t\u003ctfoot\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003ctd colspan=\"5\" class=\"text-center\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tfoot\u003e\n\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003c!-- End: life time stats --\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c/section\u003e\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Пользователи","updated_at":"2019-10-16 18:14:01","url":"/1c/users"},{"code":"users_lookup","created_at":"2017-10-18 03:20:45","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","id":"2687","is_auto":"0","is_cache":"0","module$code":"core","module_id":"4","page_type$code":"simple","page_type_id":"6","sys$uuid":"ba589f60-edda-4936-9063-c7221a1c2d27","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\"\u003e\n\u003ch1\u003eПользователи\u003c/h1\u003e\n\n\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eEdit Page\u003c/translate\u003e\u003c/a\u003e\n\n\u003c!-- END PAGE HEADER--\u003e\n\u003c!-- BEGIN MAIN CONTENT --\u003e\n\u003cdiv class=\"row\"  ng-keydown=\"keyDown($event)\"\u003e\n\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n                            \u003cinput type=\"text\" class=\"form-control\" placeholder=\"Поиск пользователя по Email,Названию\" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\"/\u003e\n                            \n                            \u003c!-- as a Dom element --\u003e\n                            \n                            \u003ctable class=\"table table-bordered\"\u003e\n                                \n                                \u003ctr\u003e\n                                    \u003cth\u003eИмя пользователя\u003c/th\u003e\n                                    \u003cth\u003eДолжность\u003c/th\u003e\n                                    \u003cth\u003eEmail\u003c/th\u003e\n                                \u003c/tr\u003e\n                                \u003ctr ng-repeat=\"item in items\"\u003e\n                                    \u003ctd\u003e\n                                        \u003cimg ng-if=\"item.avatar_url\" alt=\"\" class=\"img-circle\"  style=\"max-height:25px\" src=\"{{item.avatar_url}}\"/\u003e\n                                        {{item.title}}\u003c/td\u003e\n                                    \u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n                                    \u003ctd\u003e{{item.email}}\u003c/td\u003e\n                                    \u003ctd\u003e\u003ca  ng-click=\"parentCallBack($parent,item)\"\u003e \u003ctranslate\u003eChoose\u003c/translate\u003e\u003c/a\u003e\u003c/td\u003e\n                                \u003c/tr\u003e\n                            \u003c/table\u003e\n                            \n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003c!-- End: life time stats --\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\n\n\tfunction basicsCtrl($scope, $http,$log,$stateParams,DMLService,RestApiService,PubSub) {\n      \n      $scope.searchTitle = \"\";\n      \n      \n      $scope.search = function(searchTitle){\n          \n            $scope.searchTitle = searchTitle;\n                                   \n            $scope.bind();\n          \n      }\n      \n      $scope.parentCallBack = function(parent,user){\n          //alert(parent.current);\n          parent.closeWithParams(parent.modals[parent.current],user);\n          \n      }\n      \n      $scope.parentChoose = function(parent,id){\n          parent.choose(id);\n          $scope.searchText = \"\";\n      }      \n     \n\t\t$scope.bind = function bind(){\n\t\t    \n\t\t    Metronic.startPageLoading();\n\t\t    uri = \"query/get?code=users_by_email_title\u0026perpage=100\u0026page=1\u0026param1=\"+$scope.searchTitle+\"\u0026param2=\"+$scope.searchTitle;\n\t\t    \n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\t\t\t\t\n\t\t\t    $scope.items =data.items;\n\t\t\t\t\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\",{});\n\n\t\t\t});\n\t\t}\n\n\t\t$scope.bind();\n\n\t};\n\n\n\n\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e\n","templateurl":"","title":"Поиск пользователя","updated_at":"2019-10-16 18:14:01","url":"/users/lookup"},{"code":"cloud_user_balances","created_at":"2017-10-25 00:00:26","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","filter_set_id":"1400","filter_sets$code":"user_balance","icon":"fa fa-user","id":"2734","is_auto":"0","is_cache":"0","module$code":"cloud","module_id":"22","page_type$code":"list","page_type_id":"1","query$code":"users_balance","query_id":"3234","sys$uuid":"da83b48f-f743-407a-a8ac-b6a4ab6c352f","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\n\t\t ng-init=\"init({pageData:$state.current.data,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\n\t\t ng-controller=\"SimpleTableController\"\u003e\n\u003cdiv class=\"page-bar\"\u003e\n\t\u003cul class=\"page-breadcrumb\"\u003e\n\t\t\u003cli\u003e\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n\t\t\t\u003ctranslate\u003eБалансы пользователей\u003c/translate\u003e\n\t\t\u003c/li\u003e\n\t\u003c/ul\u003e\n\t\u003cdiv class=\"page-toolbar\"\u003e\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\n\t\t\t\u003ca  href=\"%DETAILURL%0\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003e\n\t\t\t\tAdd\u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\n\t\t\t\u003c/a\u003e\n\t\t\t\u003cbutton translate type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\n\t\t\tActions \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\n\t\t\t\u003c/button\u003e\n\t\t\t\u003cul class=\"dropdown-menu pull-right\" user=\"menu\"\u003e\n\t\t\t\t\u003cng-include src=\"'/restapi/widget/simpletable-select-actions'\" \u003e\n\t\t\t\t\u003c/ng-include\u003e\n\t\t\t\u003c/ul\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c!-- END PAGE HEADER--\u003e\n\n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n\u003c!-- BEGIN MAIN CONTENT --\u003e\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--SAMPLE NOTE:--\u003e\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\u003cdiv class=\"table-responsive\"\u003e\n\t\t\t\t\t\t\u003ctable st-table=\"rowCollection\"  class=\"table table-striped table-bordered\"\u003e\n\t\t\t\t\t\t\t\u003cthead\u003e\n    \t\t\t\t\t\t\t\u003ctr\u003e\n    \t\t\t\t\t\t\t\t\u003cth\u003e\n                    \t\t\t\t\t\u003cdiv ng-if=\"filterSetCols\" class=\"btn-group\"\u003e\t\t\t    \n                                \t\t\t\u003ca type=\"button\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\n                                    \t\t\t\u003ci class=\"fa fa-columns\"\u003e\u003c/i\u003e\n                                \t\t\t\u003c/a\u003e\n                                    \t\t\t\u003cul class=\"dropdown-menu\" style=\"left: auto; !important\" role=\"menu\"\u003e\n                                                    \u003cli ng-repeat=\"ppb in filterSetCols\" ng-if=\"ppb.is_advanced == 1\"\u003e\n                                                        \u003clabel\u003e\n                                                            \u003cspan ng-if=\"getShowIsAdvancedCol(ppb)!=null\" ng-init=\"ppb.value = getShowIsAdvancedCol(ppb)\"\u003e\u003c/span\u003e\n                                                            \u003ccheckbox ng-model=\"ppb.value\"  ng-change=\"setShowIsAdvancedCol(ppb)\"  ng-true-value=\"1\"   ng-false-value=\"0\" \u003e\u003c/checkbox\u003e\n                                                            {{ppb.title}}\n                                                        \u003c/label\u003e\n                                                    \u003c/li\u003e        \t\t\t    \n                                    \t\t\t\u003c/ul\u003e\t\n                            \t\t\t\u003c/div\u003e\n    \t\t\t\t\t\t\t\t    \u003c/th\u003e\n    \t\t\t\t\t\t\t\t    \u003cth ng-repeat=\"col in filterSetCols\" ng-if=\"getShowIsAdvancedCol(col)==1 || col.is_advanced!=1\"\u003e\n    \t\t\t\t\t\t\t\t        \u003ca ng-click=\"sortBy(col.alias)\"\u003e{{col.title}}\u003c/a\u003e \u003ci ng-if=\"sortFieldAsc \u0026\u0026 sortField == col.alias \" \n    \t\t\t\t\t\t\t\t        class=\"fa fa-sort-alpha-asc\"\u003e\u003c/i\u003e\u003ci ng-if=\"sortFieldAsc == false \u0026\u0026 sortField == col.alias\"  class=\"fa fa-sort-alpha-desc\"\u003e\u003c/i\u003e\n    \t\t\t\t\t\t\t\t    \u003c/th\u003e\n    \t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/thead\u003e\n\t\t\t\t\t\t\t\u003ctbody\u003e\n\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in rowCollection\"\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\u003cng-include src=\"'views/blocks/simpletable-select-checkbox-row.html'\"\u003e\u003c/ng-include\u003e\n\t\t\t\t\t\t\t\t\t\u003c!--\u003ca href=\"%DETAILURL%{{row.id}}\"\u003e \u003ci class=\"fa fa-pencil\"\u003e\u003c/i\u003e\u003c/a\u003e--\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\t\t\t\t\t\t\t    \n\t\t\t\t\t\t\t\t\u003ctd ng-repeat=\"col in filterSetCols\"  ng-if=\"getShowIsAdvancedCol(col)==1 ||  col.is_advanced != 1\"\u003e\n\t\t\t\t\t\t\t\t\t{{row[col.alias]}}\n\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tbody\u003e\n\n\t\t\t\t\t\t\t\u003ctfoot\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003ctd colspan=\"50\" class=\"text-center\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tfoot\u003e\n\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003c!-- End: life time stats --\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c/section\u003e\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Балансы пользователей","updated_at":"2019-10-16 18:14:01","url":"/cloud/balances"},{"code":"sd_users","created_at":"2018-08-22 22:39:26","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","filter_set_id":"376","filter_sets$code":"users","id":"4087","is_auto":"0","is_cache":"0","module$code":"sd","module_id":"37","page_type$code":"list","page_type_id":"1","query$code":"crm_users","query_id":"615","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\n\t\t ng-init=\"init({pageData:$state.current.data,filter_set:$state.current.data.pageFilterSetCode,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\n\t\t ng-controller=\"SimpleTableController\"\u003e\n\u003cdiv class=\"page-bar\"\u003e\n\t\u003cul class=\"page-breadcrumb\"\u003e\n\t\t\u003cli\u003e\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n\t\t\t\u003ctranslate\u003eПользователи и права\u003c/translate\u003e\n\t\t\u003c/li\u003e\n\t\u003c/ul\u003e\n\t\u003cdiv class=\"page-toolbar\"\u003e\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\n\t\t\t\u003c!--\u003ca  href=\"%DETAILURL%0\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003e\n\t\t\t\tAdd\u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\n\t\t\t\u003c/a\u003e--\u003e\n\t\t\t\u003cbutton translate type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\"\u003e\n\t\t\tActions \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\n\t\t\t\u003c/button\u003e\n\t\t\t\u003cul class=\"dropdown-menu pull-right\" user=\"menu\"\u003e\n\t\t\t    \u003cli\u003e\u003ca href=\"#/settings/user_params\"\u003eПараметры пользователей\u003c/a\u003e\u003c/li\u003e\n\t\t\t\t\u003cng-include src=\"'/restapi/widget/simpletable-select-actions'\" \u003e\n\t\t\t\t\u003c/ng-include\u003e\n\t\t\t\u003c/ul\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c!-- END PAGE HEADER--\u003e\n\n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n\u003c!-- BEGIN MAIN CONTENT --\u003e\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--SAMPLE NOTE:--\u003e\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\n\t\t\u003cdiv class=\"row\"\u003e\n\t\t    \u003cdiv class=\"col-lg-12\"\u003e\n    \t\t    \u003ca  ng-click=\"pubSubPublish('chooseBPMSModal',{'processCode':'sd_user_invite', 'init': [] })\"  type=\"button\" class=\"btn btn-fit-height btn-primary\" \u003e\n    \t\t\t\t\u003ci class=\"fa fa-plus\"\u003e\u003c/i\u003e Пригласить\n    \t\t\t\u003c/a\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e    \n\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\u003cdiv class=\"table-responsive\"\u003e\n\t\t\t\t\t\t\u003ctable st-table=\"rowCollection\"  class=\"table table-striped table-bordered\"\u003e\n\t\t\t\t\t\t\t\u003cthead\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eTitle\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eE-Mail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eОтдел\u003c/th\u003e\n\t\t\t\t\t\t\t\t\u003cth translate\u003eRoles\u003c/th\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/thead\u003e\n\t\t\t\t\t\t\t\u003ctbody\u003e\n\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in rowCollection\"\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\u003cng-include src=\"'views/blocks/simpletable-select-checkbox-row.html'\"\u003e\u003c/ng-include\u003e\n\t\t\t\t\t\t\t\t    \u003cimg ng-if=\"row.avatar_url\" alt=\"\" class=\"img-circle\"  style=\"max-height:25px\" src=\"{{row.avatar_url}}\"/\u003e\n\t\t\t\t\t\t\t\t\t\u003ca class=\"btn btn-xs\" href=\"#/settings/userdetails/{{row.id}}/?p[]=page::{{currentPage}}\"\u003e \u003cu\u003e{{row.title}}\u003c/u\u003e\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e{{row._dep_title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':0}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':1}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':2}}\u003c/span\u003e\n\n\t\t\t\t\t\t\t\t\t\u003cspan style=\"background-color:#C9DFF5\"\u003e{{row.roles | split:';':3}}\u003c/span\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\t\t\t\t\t\t\t    \n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tbody\u003e\n\n\t\t\t\t\t\t\t\u003ctfoot\u003e\n\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\u003ctd colspan=\"5\" class=\"text-center\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\u003c/tfoot\u003e\n\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003c!-- End: life time stats --\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\u003c/section\u003e\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Пользователи","updated_at":"2019-10-16 18:14:01","url":"/sd/users"},{"code":"usersdetails","created_at":"2018-12-18 18:13:06","created_by":"1","db_template":"1","entity$code":"users","entity_id":"22","id":"4735","is_auto":"1","module$code":"core","module_id":"4","page_type$code":"details","page_type_id":"5","sys$uuid":"5aec39b7-0fcf-4010-8486-a1e5fa10fca3","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\"\u003e\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ci class=\"{{$state.current.data.pageIcon}}\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca href=\"#/settings/users/?{{lastpagestr}}\" translate\u003eUsers\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003e{{detail.title}}\u003c/translate\u003e\r\n\r\n\t\t\u003c/li\u003e\r\n\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\t    \r\n\t\t    \u003cbutton ng-if=\"!editing \u0026\u0026 detail.id != 0 \" class=\"btn btn-primary green\" ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack, 'processCode':'exp_template', 'input': {'url':'?code='+table_name+'\u0026amp;ids='+detail.id,'entity_id':$state.current.data.entityId} })\" \u003e\r\n                        \u003ci class=\"fa fa-file-excel-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eПечать\u003c/translate\u003e\r\n            \u003c/button\u003e\t\t    \r\n\t\t    \r\n\t\t\t\u003cbutton ng-if=\"!editing \u0026\u0026 entityActions.length\u003e0\"  type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-hover=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\" \u003e\r\n\t\t\t\u003ctranslate\u003eActions\u003c/translate\u003e \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\r\n\t\t\t\u003c/button\u003e\r\n\t\t\t\u003cul ng-if=\"!editing\"  class=\"dropdown-menu\" style=\"left: auto; right: 100px;!important\" role=\"menu\"\u003e\r\n                \u003cli ng-repeat= \"action in entityActions\"\u003e\r\n                    \u003ca ng-if=\"action.process_type_code=='entityAction'\" ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:bindCallBack,'processCode':action.code, 'input': {'url':'?code='+table_name+'\u0026amp;ids='+detail.id} })\" \u003e\r\n                        \u003ci class=\"{{action.action_icon}}\"\u003e\u003c/i\u003e \u003ctranslate\u003e{{action.title}}\u003c/translate\u003e\u003c/a\u003e\r\n                        \r\n                    \u003ca ng-if=\"action.process_type_code=='entityActionByID'\" ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:bindCallBack, 'processCode':action.code, 'input': {'id':detail.id} })\" \u003e\r\n                        \u003ci class=\"{{action.action_icon}}\"\u003e\u003c/i\u003e \u003ctranslate\u003e{{action.title}}\u003c/translate\u003e\u003c/a\u003e\r\n                        \r\n                    \u003ca ng-if=\"session_roles.admin\" href=\"#/bpms/modeler/{{action.id}}\" title=\"Диаграмма\"\u003e\u003ci class=\"glyphicon glyphicon-th-large\"\u003e\u003c/i\u003e\u003c/a\u003e\r\n                \u003c/li\u003e\r\n\t\t\t\u003c/ul\u003e\r\n\t\t\t\r\n\t\t    \u003ca ng-if=\"!editing \u0026\u0026 detail.id != 0 \" href=\"#/settings/usersdetails/0\" class=\"btn btn-primary\"\u003e\u003ci class=\"fa fa-plus\"\u003e\u003c/i\u003e  \u003ctranslate\u003eAdd\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-primary\" ng-click=\"save()\" translate\u003eSave\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-warning\" ng-click=\"cancel()\" translate\u003eCancel\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"!editing\" class=\"btn btn-warning\" translate\u003eSaved\u003c/button\u003e\r\n\t\t\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eEdit Page\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c!-- END PAGE HEADER--\u003e\r\n\u003c!-- BEGIN MAIN CONTENT --\u003e\r\n\u003cdiv class=\"row\"  ng-keydown=\"keyDown($event)\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t\u003c!--\u003cp\u003e--\u003e\r\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\r\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\r\n\t\t\u003c!--\u003c/div\u003e--\u003e\r\n\t\t\u003c!-- Begin: life time stats --\u003e\r\n\t\t\u003cdiv class=\"portlet\"\u003e\r\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\r\n\t\t\t\t\t\t\u003cform role=\"form\"\u003e\r\n\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\r\n\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t    \u003cdiv ng-if=\"error_code != 'entity_code' \u0026\u0026 error_text \" class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t        \u003clabel  class=\"text-danger\"\u003e\u003ci class=\"fa fa-warning (alias)\"\u003e\u003c/i\u003e {{error_text}}\u003c/label\u003e\r\n\t\t\t\t\t\t\t    \u003c/div\u003e\r\n\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t    \u003cdiv ng-if=\"error_code == 'entity_code' \" class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t        \u003clabel  class=\"text-danger\"\u003e\u003ci class=\"fa fa-warning (alias)\"\u003e\u003c/i\u003e {{error_text}}\u003c/label\u003e\r\n\t\t\t\t\t\t\t    \u003c/div\u003e\t\r\n\t\t\t\t\t\t\t    \r\n                                    \u003cdiv class = \"row\"\u003e    \r\n\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Title\" id-model=\"detail.title\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Email\" id-model=\"detail.email\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Device Token\" id-model=\"detail.device_token\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cdu-select label=\"Account\" lookup_page_code=\"\u003cno value\u003e\" lookup_call_back=\"account_idEditCallBack\" ng-model=\"value.account_id\" icon=\"\u003cno value\u003e\" query-code=\"accounts_select\" id-model=\"detail.account_id\" ng-change=\"edit()\" \u003e\u003c/du-select\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cdu-select label=\"BI Address\" lookup_page_code=\"\u003cno value\u003e\" lookup_call_back=\"bi_address_idEditCallBack\" ng-model=\"value.bi_address_id\" icon=\"\u003cno value\u003e\" query-code=\"bi_addresses_select\" id-model=\"detail.bi_address_id\" ng-change=\"edit()\" \u003e\u003c/du-select\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cdu-select label=\"Грузополучатель\" lookup_page_code=\"\u003cno value\u003e\" lookup_call_back=\"bi_consignee_idEditCallBack\" ng-model=\"value.bi_consignee_id\" icon=\"\u003cno value\u003e\" query-code=\"accounts_select\" id-model=\"detail.bi_consignee_id\" ng-change=\"edit()\" \u003e\u003c/du-select\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Billing account\" id-model=\"detail.bill_account\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cdu-select label=\"CRM Department\" lookup_page_code=\"\u003cno value\u003e\" lookup_call_back=\"dep_idEditCallBack\" ng-model=\"value.dep_id\" icon=\"\u003cno value\u003e\" query-code=\"deps_select\" id-model=\"detail.dep_id\" ng-change=\"edit()\" \u003e\u003c/du-select\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Mobile\" id-model=\"detail.mobile\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cdu-select label=\"LDAP\" lookup_page_code=\"\u003cno value\u003e\" lookup_call_back=\"ldap_idEditCallBack\" ng-model=\"value.ldap_id\" icon=\"\u003cno value\u003e\" query-code=\"ldaps_select\" id-model=\"detail.ldap_id\" ng-change=\"edit()\" \u003e\u003c/du-select\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Avatar URL\" id-model=\"detail.avatar_url\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cdu-select label=\"Line Manager\" lookup_page_code=\"users_lookup\" lookup_call_back=\"lm_user_idEditCallBack\" ng-model=\"value.lm_user_id\" icon=\"\u003cno value\u003e\" query-code=\"users_select\" id-model=\"detail.lm_user_id\" ng-change=\"edit()\" \u003e\u003c/du-select\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Login\" id-model=\"detail.login\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Job Title\" id-model=\"detail.jobtitle\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-checkbox icon=\"\u003cno value\u003e\" label=\"Is Locked\" id-model=\"detail.is_locked\" on-change=\"edit\" \u003e\u003c/bu-checkbox\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Code\" id-model=\"detail.code\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cdu-select label=\"Created By\" lookup_page_code=\"users_lookup\" lookup_call_back=\"created_byEditCallBack\" ng-model=\"value.created_by\" icon=\"\u003cno value\u003e\" query-code=\"users_select\" id-model=\"detail.created_by\" ng-change=\"edit()\" \u003e\u003c/du-select\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n\r\n                                \u003c/div\u003e\r\n                                \r\n                                \u003cdiv class=\"row\"\u003e\r\n                                    \r\n                                    \u003cdiv class=\"col-md-12\"\u003e\r\n                                        \r\n\r\n\u003c!--\r\nТабличная часть\r\n--\u003e\r\n\r\n\r\n\r\n\r\n\u003c!--\r\nТабличная часть. Конец\r\n--\u003e\r\n\r\n                                    \u003c/div\u003e                                    \r\n                                \u003c/div\u003e    \r\n\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003c/form\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c!-- End: life time stats --\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c/section\u003e\r\n\r\n\r\n\u003cscript type=\"text/javascript\"\u003e\r\n\r\n\r\n\tfunction basicsCtrl($scope,$rootScope, $http,$log,$stateParams,DMLService,RestApiService,UIService,PubSub,$location) {\r\n\r\n\r\n        \r\n\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n    \r\n    \r\n    \r\n        $scope[\"account_idEditCallBack\"] = function(data){\r\n            $scope.detail[\"account_id\"] = data.id;\r\n            $scope.edit();\r\n        }\r\n            \r\n\r\n    \r\n    \r\n    \r\n        $scope[\"bi_address_idEditCallBack\"] = function(data){\r\n            $scope.detail[\"bi_address_id\"] = data.id;\r\n            $scope.edit();\r\n        }\r\n            \r\n\r\n    \r\n    \r\n    \r\n        $scope[\"bi_consignee_idEditCallBack\"] = function(data){\r\n            $scope.detail[\"bi_consignee_id\"] = data.id;\r\n            $scope.edit();\r\n        }\r\n            \r\n\r\n            \r\n\r\n    \r\n    \r\n    \r\n        $scope[\"dep_idEditCallBack\"] = function(data){\r\n            $scope.detail[\"dep_id\"] = data.id;\r\n            $scope.edit();\r\n        }\r\n            \r\n\r\n            \r\n\r\n    \r\n    \r\n    \r\n        $scope[\"ldap_idEditCallBack\"] = function(data){\r\n            $scope.detail[\"ldap_id\"] = data.id;\r\n            $scope.edit();\r\n        }\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n    \r\n    \r\n    \r\n        $scope[\"lm_user_idEditCallBack\"] = function(data){\r\n            $scope.detail[\"lm_user_id\"] = data.id;\r\n            $scope.edit();\r\n        }\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n    \r\n    \r\n    \r\n        $scope[\"created_byEditCallBack\"] = function(data){\r\n            $scope.detail[\"created_by\"] = data.id;\r\n            $scope.edit();\r\n        }\r\n            \r\n\r\n\r\n\r\n        \r\n        $scope.value = {};\r\n        \r\n        $scope.lastpagestr = $location.search().lastpage?\"page=\"+$location.search().lastpage:\"\";\r\n        \r\n        $scope.pubSubPublish = function(a,b){\r\n            PubSub.publish(a,b);\r\n        }\r\n        \r\n\t\t$scope.edit = function edit(){\r\n\t\t\t$scope.editing = true;\r\n\t\t\t$rootScope.promptExit =true;\r\n\t\t}\r\n\t\t$scope.closeEdit = function (){\r\n\t\t\t$scope.editing = false;\r\n\t\t\t$rootScope.promptExit =false;\r\n\t\t}\r\n\r\n         $scope.keyDown = function(e) {\r\n          if ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)){\r\n            $scope.save();\r\n          }\r\n        };\r\n        \r\n        $scope.bindCallBack = function(params){\r\n            $scope.bind();\r\n        }  \r\n        \r\n        \r\n        $scope.printCallBack = function(params){\r\n            //console.log('printCallBack',params);\r\n            if (params.vars \u0026\u0026 params.vars.file_url){\r\n            location.href = params.vars.file_url;\r\n            }\r\n            //$scope.details.ns.push({_inserted:1, id:0,doc_id:$scope.detail.sys$uuid,nomen_id:params.id,_nomen_title:params.title,quantity:1,price:params.price,amount:params.price});\r\n        \r\n            \r\n        }  \r\n        \r\n\r\n\t\t$scope.bind = function bind(){\r\n\t\t    \r\n\t\t    \r\n\r\n\t\t    Metronic.startPageLoading();\r\n\t\t\tRestApiService.get('detail?code=users\u0026id='+$stateParams.id).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t    Metronic.stopPageLoading();\r\n\t\t\t\t// here the data from the api is assigned to a variable named users\r\n\r\n                $scope.table_name=\"users\";\r\n                \r\n                \r\n        \t\tif ($stateParams.id!=0) {\t\t    \r\n        \t    \r\n        \t\tRestApiService.get('services/run/entity_acts?entity_code='+$scope.table_name+\"\u0026id=\"+$stateParams.id).\r\n        \t\tsuccess(function(data) { \r\n        \t\t    $scope.entityActions = data;\r\n        \t\t});\r\n        \t\t}\r\n\t\t\r\n\t\t\r\n                \r\n    \t\t\tRestApiService.get('query/get?code=entity_attrs_by_code\u0026param1='+$scope.table_name).\r\n    \t\t\tsuccess(function(data) { \r\n    \t\t\t    $scope.fields = data.items;\r\n    \t\t\t});\t    \r\n    \t\t\t\r\n\t\t\t\t$scope.closeEdit();\r\n\t\t\t\t$scope.details = data;\r\n\t\t\t\t$scope.detail = {};\r\n\t\t\t\t$scope.detail.id = $stateParams.id;\r\n\t\t\t\tif ($stateParams.id!=0) {\r\n\t\t\t\t\t$scope.detail = data[\"users\"][0];\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t    Metronic.setDefaultValuesFromUrl($scope.detail);\r\n                \t//if (Metronic.getParameterByName(\"df_account_id\")!=null){\r\n                \t//\t$scope.detail.account_id = Metronic.getParameterByName(\"df_account_id\");    \r\n                \t//}\r\n                \t$scope.detail.sys$uuid = Metronic.getUUID();\r\n                }\r\n\t\t\t\t\r\n\t\t\t\tPubSub.publish(\"bindBuComponents\",{});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t$scope.save = function save(){\r\n\r\n\r\n\r\n\t\t\t$scope.action =  $scope.detail.id == 0 ? \"insert\":\"update\";\r\n\t\t\t\r\n\t\t\t$scope.error_code = \"\"\r\n\t\t\t$scope.error_text = \"\";\r\n\t\t\t\r\n\t\t\tMetronic.startPageLoading();\r\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\r\n\t\t\t\r\n\t\t\t\r\n\r\n\r\n\t\t\tDMLService.update( $scope.saveValues ).\r\n\t\t\t\tsuccess(function (data) {\r\n\t\t\t\t\tif (data.error!=\"0\") {\r\n\t\t\t\t\t\t$scope.error_code = data.error_code;\r\n\t\t\t\t\t\t$scope.error_text = data.error_text;\r\n\t\t\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($scope.detail.id == 0) {\r\n\t\t\t\t\t\tdata.items.forEach(function (item, i, arr) {\r\n\t\t\t\t\t\t\tif (item.table_name==$scope.table_name){\r\n\t\t\t\t\t\t\t\tlocation.href = \"#/settings/usersdetails/\" +item.last_insert_id;\r\n\t\t\t\t\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t\t\t\t\t\t$scope.closeEdit();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t    Metronic.stopPageLoading();\r\n\t\t\t\t\t\t$scope.bind();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t$scope.cancel = function cancel(){\r\n\t\t    \r\n\t\t\t$scope.bind($stateParams.id);\r\n\t\t}\r\n\r\n\t\t$scope.bind($stateParams.id);\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\u003c/script\u003e\r\n\r\n\u003c!-- END MAIN CONTENT --\u003e\r\n","templateurl":"","title":"Users","updated_at":"2020-05-25 19:01:36","url":"/settings/usersdetails/{id}"}],"queries":[{"code":"users","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"1","is_auto":"0","is_public":"0","sql_text":"SELECT main.login,main.id,main.is_locked,main.name,main.title,main.avatar_url,main.email,\ncoalesce((select GROUP_CONCAT(r.title SEPARATOR ';') from user_roles ur, roles r where r.id=ur.role_id and ur.user_id=main.id),\"\") roles FROM users main\n\n\n%filter%\n\n%order%","sys$uuid":"ad9c6695-f815-4268-b142-a4ac4f1f9d94","title":"Users","updated_at":"2019-10-16 18:14:21"},{"code":"sessioninfo","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"21","is_auto":"0","is_public":"0","sql_text":"select u.dep_id,u.id,u.email,u.title,u.avatar_url,\n  (select r.default_dashboard_id from roles r,user_roles  ur, dashboards d where r.id=ur.role_id and ur.user_id=u.id and d.id= r.default_dashboard_id limit 1) default_dashboard_id,\n  u.account_id,\n  u.bi_consignee_id,\n  u.bi_address_id,\n  (select title from accounts a where a.id=u.account_id) account,\n  (select up.value from user_params up,params p where p.id=up.param_id and p.code='disable_header_logo' and up.user_id=u.id) disable_header_logo,\n  (select title from bi_deals a where a.id=u.bi_deal_id) bi_deal,\n  (select f.code from files f,customs c where c.default_logo_id=f.id and c.code=(select value from params where code='custom') ) custom_default_logo,\n  (select title from accounts a where a.id=u.bi_consignee_id) bi_consignee,\n  (select title from bi_addresses a where a.id=u.bi_address_id) bi_address,\n  (select group_concat(r.code) from user_roles ur join roles r on r.id = ur.role_id where ur.user_id = u.id) as roles\nfrom users u where id=:user_id","sys$uuid":"036996d2-e7e4-493f-92a0-c2ff17512b96","title":"SessionInfo","updated_at":"2020-05-20 12:18:34"},{"code":"users_select","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"413","is_auto":"0","is_public":"0","sql_text":"select main.id,main.title as name from users main\n%filter% and coalesce( is_locked ,0) =0\norder by 2","sys$uuid":"bd537c47-3568-4f81-aa59-96324ec7c74a","title":"Выберите пользователя","updated_at":"2019-10-16 18:14:21"},{"code":"crm_users","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"615","is_auto":"0","is_public":"0","sql_text":"SELECT main.*,\n(select title from deps where id=main.dep_id) _dep_title,\n (select f.code from files f where main.user_pic_file_id=f.id) _user_pic_file,\ncoalesce((select GROUP_CONCAT(r.title SEPARATOR ';') from user_roles ur, roles r where r.id=ur.role_id and ur.user_id=main.id),\";\") roles FROM users main\n\n%filter%\n\n#(main.id in (select user_id from user_roles ur,roles r where r.id=ur.role_id and r.code in ('crm_manager_sales','crm_teamlead_sales','crm') ))\n\n%order%","sys$uuid":"482384d5-bfc1-47b5-ae4a-304ab22ae9f9","title":"Пользователи CRM","updated_at":"2019-10-16 18:14:21"},{"code":"crm_rep_byemp","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"644","is_auto":"0","is_public":"0","sql_text":"select \r\nmain.id,\r\nmain.title,\r\ncount(distinct d.id) created_deals,\r\ncount(distinct d_work.id) work_deals,\r\ncount(distinct o.id) created_offers,\r\ncount(distinct i.id) created_invoices,\r\n\r\nconcat(count( distinct a.id),'') created_accounts,\r\nmain.avatar_url _user_avatar_url\r\nfrom users  main\r\n                            join (select str_to_date(concat(?,''),'%Y-%m-%d') begin_at,str_to_date(concat(DATE_ADD(?,interval 1 day)),'%Y-%m-%d') end_at) period\r\n                            left join deals d on d.created_by = main.id and d.created_at between period.begin_at and period.end_at\r\n                            left join crm_offers o on o.created_by = main.id and o.created_at between period.begin_at and period.end_at\r\n                            left join crm_invoices i on i.created_by = main.id and i.created_at between period.begin_at and period.end_at\r\n                            \r\n                            left join deals d_work on d_work.manager_id = main.id and d_work.created_at between period.begin_at and period.end_at and d_work.stage_id in (select id from dealstages where is_finish=0)\r\n                            left join accounts a on a.created_by = main.id and a.created_at between period.begin_at and period.end_at\r\n                    \r\n\r\ngroup by main.id\r\n","sys$uuid":"5ce84730-4d37-41d4-afe0-ac8576f54d3c","title":"crm_rep_byemp","updated_at":"2019-10-16 18:14:21"},{"code":"crm_rep_byemp_dtl1","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"650","is_auto":"0","is_public":"0","sql_text":"select \n(select color from dealstages where id=main.stage_id) _stage_color,\n(select title  from dealstages where id=main.stage_id) _stage_title,\nmain.* from\ndeals main where created_at between ? and ? and  created_by=? ","sys$uuid":"f60ed407-41f9-45ac-9866-cdc73efad18b","title":"crm_rep_byemp_dtl1","updated_at":"2019-10-16 18:14:21"},{"code":"crm_rep_byemp_tes","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"651","is_auto":"0","is_public":"0","sql_text":"select\r\nmain.id,\r\nmain.title,\r\n  ( select count(1) cnt from deals where created_by=main.id and created_at between period.begin_at and  period.end_at  ) created_deals,\r\n  ( select count(1) cnt from deals where created_by=main.id and created_at between period.begin_at and  period.end_at  ) work_deals,  \r\n  ( select count(1) cnt from accounts where created_by=main.id and created_at between period.begin_at and  period.end_at  ) created_accounts\r\nfrom users main,(select ? as begin_at,? as end_at)   period\r\n\r\n\r\n","sys$uuid":"ac1fc947-ea07-4d1b-8b3b-36505179f46d","title":"crm_rep_byemp_tes","updated_at":"2019-10-16 18:14:21"},{"code":"1c_users","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"679","is_auto":"0","is_public":"0","sql_text":"SELECT main.*,\n(select title from deps where id=main.dep_id) _dep_title,\n (select f.code from files f where main.user_pic_file_id=f.id) _user_pic_file,\ncoalesce((select GROUP_CONCAT(r.title SEPARATOR ';') from user_roles ur, roles r where r.id=ur.role_id and ur.user_id=main.id),\";\") roles FROM users main\n\n%filter%\nand\n\n(main.id in (select user_id from user_roles ur,roles r where r.id=ur.role_id and r.code in ('1cdemo') ))\n\n%order%","sys$uuid":"64a0c3bf-a4de-47b3-9db2-ed19b2e5b72e","title":"Пользователи 1С","updated_at":"2019-10-16 18:14:21"},{"code":"resetmypassword","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"867","is_auto":"0","is_public":"0","sql_text":"select title from users where id=:user_id","sys$uuid":"5062675a-139e-4471-99b9-2c04a13ea229","title":"resetmypassword","updated_at":"2019-10-16 18:14:21"},{"code":"cb_zvanda_balance","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"1958","is_auto":"0","is_public":"0","sql_text":"select main.value\nfrom acc$cb_user_balance main\nwhere user = :user_id","sys$uuid":"c9631a28-269c-491f-8c3a-7297c92195e0","title":"CallBack Zvanda Balance","updated_at":"2019-10-16 18:14:21"},{"code":"cus_users_by_line_manager","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"2045","is_auto":"0","is_public":"0","sql_text":"select main.id,main.title as name from users main %filter%\r\nand main.lm_user_id=:user_id","sys$uuid":"b70d8480-715a-495d-853a-a940fa35e74c","title":"cus_users_by_line_manager","updated_at":"2019-10-16 18:14:21"},{"code":"col_rep01","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"2286","is_auto":"0","is_public":"0","sql_text":"select\r\n\r\n  u.title _user_title,\r\n  coalesce(sum(case when cac.code = 'out_call' then 1 else 0 end),0) out_call_count,\r\n  coalesce(sum(case when cac.code = 'in_call' then 1 else 0 end),0) in_call_count,\r\n  coalesce(sum(case when cac.code = 'autodial' then 1 else 0 end),0) autodial_count,\r\n  coalesce(sum(case when coalesce(car.code,'') \u003c\u003e 'busy' then 1 else 0 end),0) nobusy,\r\n  coalesce(sum(case when ctt.code = 'zaem' then 1 else 0 end),0) zaem_count,\r\n  coalesce(sum(case when car.code = 'promise_to_pay' then 1 else 0 end),0) promise_to_pay,\r\n  coalesce(sum(case when car.code = 'promise_to_pay' then ca.promise_amount else 0 end),0) promise_amount\r\n  \r\n  \r\n  \r\n  \r\n\r\nfrom users u\r\n    left join col_activities ca on ca.created_by=u.id\r\n    left join col_ac_results car on car.id=ca.res_id\r\n    left join col_third_types ctt on ctt.id=ca.tt_id\r\n    left join col_ac_channels cac on cac.id=ca.channel_id\r\n    \r\nwhere \r\n       ca.updated_at between\r\n      ? and  DATE_ADD( ?,interval 1 DAY)\r\n      and coalesce(ca.updated_by,0)=(case when ? ='my' then :user_id else coalesce(ca.updated_by,0) end)\r\ngroup by ca.created_by\r\norder by 2 desc","sys$uuid":"f01e6118-151c-4a14-ad92-46411ff6cd09","title":"Отчет по звонкам","updated_at":"2019-10-16 18:14:21"},{"code":"users_by_email_title","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"3178","is_auto":"0","is_public":"0","sql_text":"select  main.jobtitle, main.title,main.id,main.avatar_url,main.email from\nusers main\n%filter%\nand\n(\nmain.email like concat('%',?,'%')\nor\nmain.title like concat('%',?,'%')\n)","sys$uuid":"2069f987-7e6d-4310-8719-8b8c3e7795b0","title":"users_by_email_title","updated_at":"2019-10-16 18:14:21"},{"code":"users_balance","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"3234","is_auto":"0","is_public":"0","sql_text":"SELECT \nb.value,\nmain.avatar_url,main.title,main.id,main.email,\ncoalesce((select GROUP_CONCAT(r.title SEPARATOR ';') from user_roles ur, roles r where r.id=ur.role_id and ur.user_id=main.id),\";\") roles FROM users main\njoin acc$user_balance b on b.user_id=main.id\n\n%filter%\n\n%order%","sys$uuid":"f7aeff48-1562-4f50-9462-6d0ee1211e7e","title":"Баланс пользователей","updated_at":"2019-10-16 18:14:21"},{"code":"users_select_by_role_code","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"3922","is_auto":"0","is_public":"0","sql_text":"select main.id,main.title as name from users main\n%filter% and coalesce( is_locked ,0) =0\nand exists\n(select 1 from roles r\njoin user_roles ur on ur.role_id=r.id\nwhere\nr.code=? and ur.user_id=main.id\n)\norder by 2","sys$uuid":"1cee65f8-a710-4635-bef2-116861d6b4f8","title":"Users Select","updated_at":"2019-10-16 18:14:21"},{"code":"realty_avaiable_users_by_day","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"4046","is_auto":"0","is_public":"0","sql_text":"select main.title,main.id,main.email,main.avatar_url from users main\n\n\n%filter%\n\nand exists\n\n(select 1 from user_roles ur,roles r where r.id=ur.role_id and ur.user_id=main.id and\nr.code like 'realty%'\n)\nand\n\nnot exists\n\n(select 1 from realty_shifts s where s.user_id = main.id and s.shift_at = ?)","title":"Свободные люди на день","updated_at":"2019-10-16 18:14:21"},{"code":"realty_users_select_by_role_shift","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"4397","is_auto":"0","is_public":"0","sql_text":"select main.id,main.title as name from users main\n%filter% and coalesce( is_locked ,0) =0\nand exists\n(select 1 from roles r\njoin user_roles ur on ur.role_id=r.id\nwhere\nr.code=? and ur.user_id=main.id\n)\nand exists (select 1 from realty_shifts s  where user_id=main.id and date(now())=s.shift_at)\n\norder by 2","title":"Realty Users select By role shift","updated_at":"2019-10-16 18:14:21"},{"code":"realty_users_by_shift_workers","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"4416","is_auto":"0","is_public":"0","sql_text":"select main.id,main.title as name from users main\n%filter% and coalesce( is_locked ,0) =0\nand exists\n(select 1 from roles r\njoin user_roles ur on ur.role_id=r.id\nwhere\nr.code in ('realty_acceptor','realty_handyman') and ur.user_id=main.id\n)\nand exists (select 1 from realty_shifts s  where user_id=main.id and date(now())=s.shift_at)\n\norder by 2","title":"Users","updated_at":"2019-10-16 18:14:21"},{"code":"users_for_sd_user_select","created_at":"2018-09-11 16:30:41","created_by":"1","entity$code":"users","entity_id":"22","id":"5116","is_auto":"0","is_public":"0","sql_text":"select main.title as name,main.id from users main\nwhere\nmain.id in (select ur.user_id from user_roles ur join roles r where ur.role_id=r.id and r.code='sd_manager')\nor\nmain.id in (select ur.user_id from user_roles ur join roles r where ur.role_id=r.id and r.code='sd_user' and main.account_id=(select account_id from users u where u.id=:user_id))","title":"users_for_sd_user_select","updated_at":"2019-10-16 18:14:21"},{"code":"report$erp_report_cashiers","created_at":"2018-10-02 21:48:59","created_by":"1","entity$code":"users","entity_id":"22","id":"5359","is_auto":"0","is_public":"0","sql_text":"SELECT main.title,main.id,\n\nub.value as user_bonus_amount_current,\n(select sum(coalesce(user_bonus_amount,0)) from erp_doc_sale_nomens where created_by = main.id and\ncreated_at between dates.begin_at and dates.end_at\n) user_bonus_amount,\n\n\n(select sum(pay_in_total) from erp_doc_sale_nomens where created_by = main.id and\ncreated_at between dates.begin_at and dates.end_at\n) amount_pay,\n\n\n(select sum(cash_in_total-coalesce(cash_change_total,0)) from erp_doc_sale_nomens where created_by = main.id and\ncreated_at between dates.begin_at and dates.end_at\n) amount_cash,\n\n(select count(1) from accounts where created_by = main.id and\ncreated_at between dates.begin_at and dates.end_at\n) new_clients\n\nfrom users main\nleft join acc$user_bonus ub on ub.user=main.id\njoin (select ? as  begin_at,date_add(?,interval 1 day) as end_at from dual) dates\n\n\n%filter% and  main.id in (select ur.user_id from user_roles ur join roles r on r.id=ur.role_id and r.code='trd_cashier')","sys$uuid":"b6a9aedb-464e-4a8a-95af-52f5cbdd0277","title":"Отчет по продавцам","updated_at":"2018-11-26 12:04:55"},{"code":"report$qol_doc_jrn_7_6","created_at":"2018-12-01 15:41:15","created_by":"1","entity$code":"users","entity_id":"22","id":"5781","is_auto":"0","is_public":"0","sql_text":"SELECT main.email,main.title,\r\n(select count(1) from qol_tasks where user_id=main.id and created_at between dates.begin_at and dates.end_at) cnt_all,\r\n(select count(1) from qol_tasks where user_id=main.id and coalesce(is_closed,0)=1 and due_at\u003enow() and created_at between dates.begin_at and dates.end_at) cnt_nook,\r\n(select count(1) from qol_tasks where user_id=main.id and coalesce(is_closed,0)=1 and due_at\u003c=now() and created_at between dates.begin_at and dates.end_at) cnt_ok,\r\n(select count(1) from qol_tasks where user_id=main.id and coalesce(is_closed,0)=0 and due_at\u003enow() and created_at between dates.begin_at and dates.end_at) due_open_cnt\r\nfrom users main\r\njoin (select ? begin_at , date_add( ?,interval 1 day) end_at from dual) dates\r\n%filter%\r\nand ? = main.dep_id","sys$uuid":"bebc9d8f-d798-409d-811d-5d4b4bb16295","title":"Отчет об исполнительской дисциплине работников","updated_at":"2018-12-06 16:54:43"},{"code":"report$ksk_region_users","created_at":"2018-12-27 00:13:42","created_by":"1","entity$code":"users","entity_id":"22","id":"5935","is_auto":"0","is_public":"0","sql_text":"SELECT count(1) cnt,ct.title,max(main.created_at) last_reg from users main\r\njoin ksk_citizens c on c.user_id=main.id\r\njoin ksk_complexs cp on cp.id=c.complex_id\r\njoin cities ct on ct.id=cp.city_id\r\n\r\n%filter%\r\ngroup by ct.title\r\n%order%\r\n","sys$uuid":"187c9a54-ba35-4ae9-9542-d40bf59a4fe5","title":"Зарегистированные клиенты по городам","updated_at":"2018-12-27 03:09:49"},{"code":"mfo_users_select_collector_users","created_at":"2019-04-13 21:07:44","created_by":"1","entity$code":"users","entity_id":"22","id":"6320","is_auto":"0","is_public":"0","sql_text":"select main.id,main.title as name from users main\n%filter%\nand exists (select 1 from user_roles ur join roles r on r.id=ur.role_id where ur.user_id=main.id and r.code like 'mfo_%collect%' )\n%order%","sys$uuid":"7a71ebd4-2bd5-47bd-8a7b-17acf2db774a","title":"-","updated_at":"2019-04-13 21:10:09"},{"code":"mfo_verify_changes","created_at":"2020-05-23 11:51:42","created_by":"1","entity$code":"users","entity_id":"22","id":"6988","is_auto":"0","is_public":"0","sql_text":"select main.id,main.title as name\n  from users main\n  join user_roles ur on ur.user_id = main.id\n  join roles r on r.id = ur.role_id\n  join mfo_changes c on c.manager_id = main.id\n  %filter% \n   and r.code in ('mfo_verify')\n   and c.dt = current_date()","sys$uuid":"0102d7f4-34c5-4e32-aee9-7ffae195e7fd","title":"Верификаторы","updated_at":"2020-05-23 12:26:01"},{"code":"mfo_collection_changes","created_at":"2020-05-28 10:47:36","created_by":"1","entity$code":"users","entity_id":"22","id":"7029","is_auto":"0","is_public":"0","sql_text":"select main.id,main.title as name\n  from users main\n  join user_roles ur on ur.user_id = main.id\n  join roles r on r.id = ur.role_id\n  join mfo_changes c on c.manager_id = main.id\n  %filter% \n   and r.code in ('mfo_collection')\n   and c.dt = current_date()","sys$uuid":"20c24c3d-1af0-4292-b6d5-a1f7d9075742","title":"Коллекторы","updated_at":"2020-05-28 10:47:36"},{"code":"ora_detail","created_at":"2021-10-19 15:03:34","created_by":"1","entity$code":"users","entity_id":"22","id":"7070","is_auto":"0","is_public":"0","sql_text":"select  main.jobtitle, main.title,main.id,main.avatar_url,main.email, main.created_at, main.updated_at from\nusers main\n%filter%","sys$uuid":"5ac3c3e0-c31a-4a4f-aa42-83e44a28e718","title":"Ora details test","updated_at":"2021-10-21 17:39:13"}],"table_parts":[],"validators":[]},"detail_code":"entities_export","object_type":"entity","object_version":"1.0"}]