[{"detail":{"_extra":[],"attrs":[{"code":"code","created_at":"2021-09-21 17:20:59","data_type$code":"varchar","data_type_id":"1","entity$code":"meiran_test","entity_id":"1082","id":"11384","len":"30","rq":"0","short_title":"Code","sys$uuid":"0ac9b810-77fa-4c40-ad34-2fb086851188","title":"Code","updated_at":"2021-09-21 17:20:59","uq":"1"},{"code":"created_at","created_at":"2021-09-21 17:20:59","data_type$code":"current_datetime","data_type_id":"15","entity$code":"meiran_test","entity_id":"1082","id":"11386","len":"0","rq":"0","short_title":"Created At","sys$uuid":"65b413c0-31a6-455a-a5fd-bcfe1c075527","title":"Created At","updated_at":"2021-09-21 17:20:59","uq":"0"},{"code":"created_by","created_at":"2021-09-21 17:20:59","data_type$code":"reference","data_type_id":"7","entity$code":"meiran_test","entity_id":"1082","entity_link$code":"users","entity_link_id":"22","id":"11388","is_default_current_user":"1","len":"0","rq":"0","short_title":"Created By","show_col":"0","sys$uuid":"5a3183fa-8553-4149-801e-0eb2b980736b","title":"Created By","updated_at":"2021-09-21 17:20:59","uq":"0"},{"code":"id","created_at":"2021-09-21 17:20:59","data_type$code":"serial","data_type_id":"8","entity$code":"meiran_test","entity_id":"1082","id":"11383","len":"0","rq":"0","short_title":"Id","sys$uuid":"e8d80dcd-8a77-4dbc-b7f4-8aee1743d385","title":"Id","updated_at":"2021-09-21 17:20:59","uq":"0"},{"code":"meiran_test","created_at":"2021-09-21 17:28:46","created_by":"1","data_type$code":"varchar","data_type_id":"1","entity$code":"meiran_test","entity_id":"1082","hide_field":"0","id":"11390","is_formula":"0","len":"255","restrict_edit":"0","rq":"0","short_title":"meiran_test","show_col":"1","sys$uuid":"740b8329-33ac-489f-a70d-78e3c16c5c73","title":"meiran_test","updated_at":"2021-09-21 17:28:46","uq":"0"},{"code":"title","created_at":"2021-09-21 17:20:59","data_type$code":"varchar","data_type_id":"1","entity$code":"meiran_test","entity_id":"1082","id":"11385","is_default_current_user":"0","len":"100","rq":"0","short_title":"Title","show_col":"1","sys$uuid":"40f2caaf-3298-42fd-94d9-9cea78cc853e","title":"Title","updated_at":"2021-09-21 17:20:59","uq":"0"},{"code":"updated_at","created_at":"2021-09-21 17:20:59","data_type$code":"current_and_on_update_datetime","data_type_id":"16","entity$code":"meiran_test","entity_id":"1082","id":"11387","len":"0","rq":"0","short_title":"Updated At","sys$uuid":"d87c1ac5-fc60-4697-bbf9-9d951ec8c12b","title":"Updated At","updated_at":"2021-09-21 17:20:59","uq":"0"}],"detail_queries":[{"code":"meiran_test","created_at":"2021-09-21 17:21:01","created_by":"1","detail$code":"meiran_test","detail_id":"2552","id":"2914","is_auto":"0","sql_condition_build_text":"","sql_text":"select main.* from `meiran_test` main\r\nwhere main.id=?","table_name":"","title":"meiran_test","updated_at":"2021-09-21 17:21:01"},{"code":"meiran_main_report_sql_test","created_at":"2021-10-18 16:51:22","detail$code":"meiran_main_report","detail_id":"2555","entity_id":"1082","id":"2920","is_auto":"0","sql_condition_build_text":"","sql_text":"select r.code as doc_num, -- Номер документа\n\t   s.title as req_stat, -- Статус заявки\n\t   a.title as name, -- ФИО\n\t   t.title as position, -- Занятость \n\t   r.monthly_income as income, -- Уровень дохода\n\t   p.title as purpose, -- Цель займа\n\t   r.req_amount, -- Запрошенная сумма\n\t   coalesce(l.amount,0) as amount, -- Выданная сумма\n\t   coalesce(r.req_term_day,0) as term, -- Срок\n\t   r.created_at, -- Дата заявки\n\t   l.doc_at, -- Дата документа\n\t   l.doc_end, -- Дата окончания\n\t   l.doc_end_fact, -- Дата фактического закрытия\n\t   (select count(1) from mfo_reqs where id \u003c= r.id and account_id = a.id) as cnt -- Очередность займа\n  from accounts a\n  left join mfo_reqs r on r.account_id = a.id\n  left join mfo_req_stats s on s.id=r.stat_id\n  left join mfo_position_types t on t.id = r.position_type_id\n  left join mfo_ln_purpose p on p.id = r.lending_purpose\n  left join mfo_lns l on l.req_id = r.id\n where a.id = ?","table_name":"","title":"Meiran main report sql test","updated_at":"2021-10-18 16:51:22"},{"code":"ora_detail","created_at":"2021-10-18 17:36:26","detail$code":"ora_detail","detail_id":"2556","entity_id":"1082","id":"2921","is_auto":"0","sql_condition_build_text":"","sql_text":"select  main.jobtitle, main.title,main.id,main.avatar_url,main.email, main.created_at, main.updated_at from\nusers main\nwhere  \nmain.id = 1","table_name":"","title":"ora детали","updated_at":"2021-10-18 17:36:26"},{"code":"ora_detail_for_report1","created_at":"2021-11-18 17:50:38","detail$code":"ora_detail_for_report1","detail_id":"2560","entity_id":"1082","id":"2926","is_auto":"0","sql_condition_build_text":"","sql_text":"select oct2.*,\nSTR_TO_DATE(oct2.fct_tran_ymd,'%Y%m%d') as fct_tran_date ,\nSTR_TO_DATE(oct2.tran_ymd,'%Y%m%d') as tran_date\nfrom damucrm.one_crm_transaction oct2 \nwhere STR_TO_DATE(oct2.tran_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\nand bin_or_iin = ?","table_name":"","title":"ora детали для отчета1","updated_at":"2021-11-18 17:50:38"},{"code":"ora_detail_for_report2","created_at":"2021-11-29 17:52:51","detail$code":"ora_detail_for_report2","detail_id":"2561","entity_id":"1082","id":"2927","is_auto":"0","sql_condition_build_text":"","sql_text":"select  \nmain.fmb_ph_num,\nmain.cust_nm,\nSTR_TO_DATE(main.sell_ymd,'%Y%m%d') as sell_date,\nSTR_TO_DATE(main.avty_ymd,'%Y%m%d') as active_date,\nmain.sale_city,\nmain.sale_place_urp,\nmain.salesman ,\nmain.salesman_phn_num ,\nmain.trf_nm,\nmain.porty_yn as type\nfrom\ndamucrm.one_crm_abonent main\nwhere STR_TO_DATE(main.sell_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\n","table_name":"","title":"ora детали для отчета2","updated_at":"2021-11-29 17:52:51"}],"details":[{"code":"meiran_test","created_at":"2021-09-21 17:21:01","entity$code":"meiran_test","entity_id":"1082","id":"2552","is_auto":"1","title":"meiran_test","updated_at":"0000-00-00 00:00:00"},{"code":"meiran_main_report","created_at":"2021-10-18 16:50:57","entity$code":"meiran_test","entity_id":"1082","id":"2555","is_auto":"1","title":"Meiran main report","updated_at":"0000-00-00 00:00:00"},{"code":"ora_detail","created_at":"2021-10-18 17:34:12","entity$code":"meiran_test","entity_id":"1082","id":"2556","is_auto":"0","title":"Ora детали для шаблона","updated_at":"0000-00-00 00:00:00"},{"code":"ora_detail_for_report1","created_at":"2021-11-18 17:49:16","entity$code":"meiran_test","entity_id":"1082","id":"2560","is_auto":"0","title":"Ora детали для отчета1","updated_at":"0000-00-00 00:00:00"},{"code":"ora_detail_for_report2","created_at":"2021-11-29 17:51:10","entity$code":"meiran_test","entity_id":"1082","id":"2561","is_auto":"0","title":"Ora детали для отчета2","updated_at":"0000-00-00 00:00:00"}],"entity_view_limits":[{"code":"meiran_test","created_at":"2021-09-21 17:21:02","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"1202","is_auto":"1","subquery":"1 = 1","sys$uuid":"110804fe-e5dc-4af3-9db3-6e56761b0384","title":"meiran_test_crm_fm","updated_at":"2021-09-28 17:30:04"}],"filter_set_dtls":[{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2021-09-21 17:21:01","entity_attr$code":"code","entity_attr_id":"11384","id":"34113","set$code":"meiran_test","set_id":"2700","sys$uuid":"d46db312-0214-4f64-b1c0-f12bafa19aa6","updated_at":"2021-09-21 17:21:01"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2021-09-21 17:21:01","entity_attr$code":"created_at","entity_attr_id":"11386","id":"34114","set$code":"meiran_test","set_id":"2700","sys$uuid":"8ca46b2b-71ec-4b39-abc0-f81c82c9a599","updated_at":"2021-09-21 17:21:01"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2021-09-21 17:21:01","entity_attr$code":"created_by","entity_attr_id":"11388","id":"34115","is_advanced":"0","set$code":"meiran_test","set_id":"2700","sys$uuid":"f82ba4a2-4eab-4677-ba79-9b731d3dbfd8","updated_at":"2021-09-21 17:21:01"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2021-09-21 17:21:01","entity_attr$code":"id","entity_attr_id":"11383","id":"34116","set$code":"meiran_test","set_id":"2700","sys$uuid":"f42dcdeb-2912-45f1-9e1a-639976c62715","updated_at":"2021-09-21 17:21:01"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2021-09-21 17:21:01","entity_attr$code":"title","entity_attr_id":"11385","id":"34117","set$code":"meiran_test","set_id":"2700","sys$uuid":"35e96877-6898-4cf6-9968-d195de25e1fb","updated_at":"2021-09-21 17:21:01"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2021-09-21 17:21:01","entity_attr$code":"updated_at","entity_attr_id":"11387","id":"34118","set$code":"meiran_test","set_id":"2700","sys$uuid":"bab8e1dc-3926-4db6-931f-7829ad5bfa4f","updated_at":"2021-09-21 17:21:01"},{"alias":"main","col$code":"col-md-6","col_id":"1","created_at":"2021-09-21 17:29:01","entity_attr$code":"meiran_test","entity_attr_id":"11390","id":"34120","set$code":"meiran_test","set_id":"2700","sys$uuid":"b2c90c15-240a-4213-bf5d-8ff463a9426f","updated_at":"2021-09-21 17:29:01"}],"filter_sets":[{"code":"meiran_test","created_at":"2021-09-21 17:21:01","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"2700","is_auto":"1","sys$uuid":"5bccecb7-8c33-475f-9265-f6da2dacffcb","title":"meiran_test_crm_fm","updated_at":"2021-09-28 17:30:01"}],"main":[{"code":"meiran_test","created_at":"2021-09-21 17:19:56","created_by":"1","def_sel_query$code":"meiran_test_select","def_sel_query_id":"7059","detail_id":"2552","detail_page_id":"5409","entity_type$code":"reference","entity_type_id":"1","id":"1082","is_full_audit":"0","list_page_id":"5408","module$code":"fm_crm_test","module_id":"43","nogit":"0","rewrite_cloud":"0","sys$uuid":"d1498e79-5482-4671-86ce-fb1eea16a114","title":"meiran_test_crm_fm","to_cloud":"0","updated_at":"2021-09-28 17:29:56"}],"pages":[{"code":"meiran_test","created_at":"2021-09-21 17:21:01","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","filter_set_id":"2700","filter_sets$code":"meiran_test","id":"5408","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","query$code":"meiran_test","query_id":"7058","sys$uuid":"ea92fed7-3a80-4c0f-a77d-27fb1865020b","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\n\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\nng-init=\"init({pageData:$state.current.data,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\" \nng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary yellow\" ng-click=\"pubSubPublish('chooseBPMSModal',{\n            callBack: print_bpm_callback, \n            'processCode': 'jubak_test', \n            'input': {'encoding':  89, 'status': 'test stat input'} \n        })\"\u003e\n\t\t\u003ci class=\"fa fa-comments\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003e test bpm\u003c/translate\u003e\n\t\u003c/button\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\t\u003c!--\u003cli ng-if=\"getSelectedIDs().length==0\"\u003e--\u003e\n\t\u003cli\u003e\n    \u003ca \n    ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:expTemplateCallBack,'processCode':'exp_template', input: {entity_id:1082,'url':'?code=mfo_accounts'+'\u0026amp;ids=43032' } })\"\n    \u003e\n        \u003ci class=\"fa fa-file-excel-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eExport\u003c/translate\u003e ( {{getSelectedIDs().length}} \u003ctranslate\u003eRecords\u003c/translate\u003e)\u003c/a\u003e\n    \u003c/li\u003e\n    \n    \u003cli\u003e\n    \u003ca ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:expTemplateCallBack,'processCode':'exp_template', input: {entity_id:1082,'url':'?code=meiran_main_accounts'+'\u0026amp;ids=43030,43031,43032'} })\"\u003e\n    \u003ci class=\"fa fa-file-excel-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eExport2\u003c/translate\u003e \u003c/a\u003e\n    \u003c/li\u003e\n     \u003cli\u003e\n    \u003ca ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:expTemplateCallBack,'processCode':'exp_template', input: {entity_id:1082,'url':'?code=meiran_main_accounts'} })\"\u003e\n    \u003ci class=\"fa fa-file-excel-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eExport3\u003c/translate\u003e \u003c/a\u003e\n    \u003c/li\u003e\n\u003cbutton  class=\"btn btn-primary green\" ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack, 'processCode':'exp_template', 'input': {'url':'?code=meiran_test'+'\u0026amp;ids=43030,43031,43032',entity_id:1082} })\" \u003e\n\u003c!--\u003cbutton  class=\"btn btn-primary green\" ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack, 'processCode':'exp_template', 'input': {'url':'?code='+table_name+'\u0026amp;ids='+detail.id,'entity_id':$state.current.data.entityId} })\" \u003e--\u003e\n\n\t\t\t\t\t\u003ci class=\"fa fa-file-excel-o\"\u003e\u003c/i\u003e \n\t\t\t\t\t\u003ctranslate\u003eПечать\u003c/translate\u003e\n\t\t\t\t\u003c/button\u003e\n    \n    \n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t\t\n\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\n\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t  \u003ca href=\"#/mfo/meiran_test_report\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003ereport page\u003c/a\u003e\n  \t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv id=\"report_hide\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ch1\u003eПо каналам\u003c/h1\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003ctable class=\"table striped\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eКанал\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003e{{textAnalyt[analyt]}}\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in data02\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.title}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row[analyt]}} \u003c/td\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-3\"\u003e\n\n\t\t\t\t\t\t\t\t\t\u003ccanvas id=\"radar\" class=\"chart chart-pie\" chart-data=\"charts02\" chart-labels=\"labels02\"\u003e\u003c/canvas\u003e\n\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003cdiv\u003e\n\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eПроданных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv\u003e\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eАктивных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total2\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\"Поиск пользователя по Email,Названию\" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСсылка в модуль \"Продукт FM\" \u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003cimg ng-if=\"item.avatar_url\" alt=\"\" class=\"img-circle\" style=\"max-height:25px\" src=\"{{item.avatar_url}}\" /\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{item.title}}\n\t\t\t\t\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003ctranslate\u003eProduct FM\u003c/translate\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003ch2\u003eПродукты банка\u003c/h2\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eRole\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in roles\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.role_id}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eНовости по продукту ForteMobile\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cul\u003e\n\t\t\t\u003cli\u003eCoffee\u003c/li\u003e\n\t\t\t\u003cli\u003eTea\u003c/li\u003e\n\t\t\t\u003cli\u003eMilk\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope,$rootScope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter,$location) {\n\n        document.getElementById(\"report_hide\").style.display = 'none';\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\t\t\n\t\t\n\t\t$scope.bindCallBack = function(params) {\n        $scope.bind();\n        }\n        \n        $scope.printCallBack = function(params) {\n        if (params.vars \u0026\u0026 params.vars.file_url) {\n            location.href = params.vars.file_url;\n        }\n        }\n        \n         $scope.expTemplateCallBack = function(params) {\n        if (params.vars \u0026\u0026 params.vars.file_url) {\n            location.href = params.vars.file_url;\n        }\n        }\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n            $scope.table_name = 'meiran_test';\n            $scope.lastpagestr = $location.search().lastpage?\"page=\"+$location.search().lastpage:\"\";\n            //test2 = angular.element(document.body).injector().get('$scope');\n            console.log(\"aaaaa\");\n            console.log($location);\n            console.log(\"aaaaa\");\n\t\t\tMetronic.startPageLoading();\n\t\t\tif ($stateParams.id!=0) {\t\t    \n    \t    \n    \t\tRestApiService.get('services/run/entity_acts?entity_code='+$scope.table_name+\"\u0026id=\"+$stateParams.id).\n    \t\tsuccess(function(data) { \n    \t\t    $scope.entityActions = data;\n    \t\t});\n    \t\t}\n    \t\t\n    \t\tRestApiService.get('query/get?code=entity_attrs_by_code\u0026param1='+$scope.table_name).\n    \t\t\tsuccess(function(data) { \n    \t\t\t    $scope.fields = data.items;\n    \t\t\t});\t\n\t\t\t\n            RestApiService.get('query/get?code=entity_attrs_by_code\u0026param1=meiran_main_accounts').\n            success(function(data) {\n                $scope.fields = data.items;\n            });\n    \t\t\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n                console.log($scope.table_name);\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t\tRestApiService.get(uri1).\n\t\t\tsuccess(function(data_1) {\n\t\t\t\t$scope.roles = data_1.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=crm_report_inter01_02\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + \"all\").\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\t\t$scope.bind($stateParams.id);\n\n\t};\n\t\n\u003c/script\u003e\n\u003cscript\u003e\nconsole.log('test1')\n\ntest = angular.element(document.body).injector().get('$state')\ntest1 = angular.element(document.body).injector().get('$stateParams')\n\nconsole.log(test)\nconsole.log(test1)\n//console.log(test['current']['data']['entityId'])\nconsole.log(test['current'])\nconsole.log('test2')\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Main test page for ForteMobile crm","updated_at":"2021-10-25 11:43:25","url":"/mfo/meiran_test"},{"code":"meiran_testdetails","created_at":"2021-09-21 17:21:01","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5409","is_auto":"1","module$code":"fm_crm_test","module_id":"43","page_type$code":"details","page_type_id":"5","sys$uuid":"eb85b9dc-debf-4f67-a070-2c2b4098be76","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\"\u003e\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ci class=\"{{$state.current.data.pageIcon}}\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ca href=\"#/fm_crm_test/meiran_test/?{{lastpagestr}}\" translate\u003emeiran_test_crm_fm\u003c/a\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003e{{detail.title}}\u003c/translate\u003e\r\n\r\n\t\t\u003c/li\u003e\r\n\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t\t\u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\t    \r\n\t\t    \u003cbutton ng-if=\"!editing \u0026\u0026 detail.id != 0 \" class=\"btn btn-primary green\" ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack, 'processCode':'exp_template', 'input': {'url':'?code='+table_name+'\u0026amp;ids='+detail.id,'entity_id':$state.current.data.entityId} })\" \u003e\r\n                        \u003ci class=\"fa fa-file-excel-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eПечать\u003c/translate\u003e\r\n            \u003c/button\u003e\t\t    \r\n\t\t    \r\n\t\t\t\u003cbutton ng-if=\"!editing \u0026\u0026 entityActions.length\u003e0\"  type=\"button\" class=\"btn btn-fit-height green dropdown-toggle\" data-toggle=\"dropdown\" data-hover=\"dropdown\" data-delay=\"1000\" data-close-others=\"true\" \u003e\r\n\t\t\t\u003ctranslate\u003eActions\u003c/translate\u003e \u003ci class=\"fa fa-angle-down\"\u003e\u003c/i\u003e\r\n\t\t\t\u003c/button\u003e\r\n\t\t\t\u003cul ng-if=\"!editing\"  class=\"dropdown-menu\" style=\"left: auto; right: 100px;!important\" role=\"menu\"\u003e\r\n                \u003cli ng-repeat= \"action in entityActions\"\u003e\r\n                    \u003ca ng-if=\"action.process_type_code=='entityAction'\" ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:bindCallBack,'processCode':action.code, 'input': {'url':'?code='+table_name+'\u0026amp;ids='+detail.id} })\" \u003e\r\n                        \u003ci class=\"{{action.action_icon}}\"\u003e\u003c/i\u003e \u003ctranslate\u003e{{action.title}}\u003c/translate\u003e\u003c/a\u003e\r\n                        \r\n                    \u003ca ng-if=\"action.process_type_code=='entityActionByID'\" ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:bindCallBack, 'processCode':action.code, 'input': {'id':detail.id} })\" \u003e\r\n                        \u003ci class=\"{{action.action_icon}}\"\u003e\u003c/i\u003e \u003ctranslate\u003e{{action.title}}\u003c/translate\u003e\u003c/a\u003e\r\n                        \r\n                    \u003ca ng-if=\"session_roles.admin\" href=\"#/bpms/modeler/{{action.id}}\" title=\"Диаграмма\"\u003e\u003ci class=\"glyphicon glyphicon-th-large\"\u003e\u003c/i\u003e\u003c/a\u003e\r\n                \u003c/li\u003e\r\n\t\t\t\u003c/ul\u003e\r\n\t\t\t\r\n\t\t    \u003ca ng-if=\"!editing \u0026\u0026 detail.id != 0 \" href=\"#/fm_crm_test/meiran_testdetails/0\" class=\"btn btn-primary\"\u003e\u003ci class=\"fa fa-plus\"\u003e\u003c/i\u003e  \u003ctranslate\u003eAdd\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-primary\" ng-click=\"save()\" translate\u003eSave\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"editing\" class=\"btn btn-warning\" ng-click=\"cancel()\" translate\u003eCancel\u003c/button\u003e\r\n\t\t\t\u003cbutton ng-if=\"!editing\" class=\"btn btn-warning\" translate\u003eSaved\u003c/button\u003e\r\n\t\t\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eEdit Page\u003c/translate\u003e\u003c/a\u003e\r\n\t\t\u003c/div\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c!-- END PAGE HEADER--\u003e\r\n\u003c!-- BEGIN MAIN CONTENT --\u003e\r\n\u003cdiv class=\"row\"  ng-keydown=\"keyDown($event)\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t\u003c!--\u003cp\u003e--\u003e\r\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\r\n\t\t\t\u003c!--\u003c/p\u003e--\u003e\r\n\t\t\u003c!--\u003c/div\u003e--\u003e\r\n\t\t\u003c!-- Begin: life time stats --\u003e\r\n\t\t\u003cdiv class=\"portlet\"\u003e\r\n\t\t\t\u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t\t\u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\r\n\t\t\t\t\t\t\u003cform role=\"form\"\u003e\r\n\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\r\n\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t    \u003cdiv ng-if=\"error_code != 'entity_code' \u0026\u0026 error_text \" class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t        \u003clabel  class=\"text-danger\"\u003e\u003ci class=\"fa fa-warning (alias)\"\u003e\u003c/i\u003e {{error_text}}\u003c/label\u003e\r\n\t\t\t\t\t\t\t    \u003c/div\u003e\r\n\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t    \u003cdiv ng-if=\"error_code == 'entity_code' \" class=\"form-group\"\u003e\r\n\t\t\t\t\t\t\t        \u003clabel  class=\"text-danger\"\u003e\u003ci class=\"fa fa-warning (alias)\"\u003e\u003c/i\u003e {{error_text}}\u003c/label\u003e\r\n\t\t\t\t\t\t\t    \u003c/div\u003e\t\r\n\t\t\t\t\t\t\t    \r\n                                    \u003cdiv class = \"row\"\u003e    \r\n\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Code\" id-model=\"detail.code\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"Title\" id-model=\"detail.title\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cdu-select label=\"Created By\" lookup_page_code=\"users_lookup\" lookup_call_back=\"created_byEditCallBack\" ng-model=\"value.created_by\" icon=\"\u003cno value\u003e\" query-code=\"users_select\" id-model=\"detail.created_by\" ng-change=\"edit()\" \u003e\u003c/du-select\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n        \u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  icon=\"\u003cno value\u003e\"  label=\"meiran_test\" id-model=\"detail.meiran_test\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n        \u003c/div\u003e\r\n\r\n\r\n\r\n\r\n                                \u003c/div\u003e\r\n                                \r\n                                \u003cdiv class=\"row\"\u003e\r\n                                    \r\n                                    \u003cdiv class=\"col-md-12\"\u003e\r\n                                        \r\n\r\n\u003c!--\r\nТабличная часть\r\n--\u003e\r\n\r\n\r\n\r\n\r\n\u003c!--\r\nТабличная часть. Конец\r\n--\u003e\r\n\r\n                                    \u003c/div\u003e                                    \r\n                                \u003c/div\u003e    \r\n\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003c/form\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c!-- End: life time stats --\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003c/section\u003e\r\n\r\n\r\n\u003cscript type=\"text/javascript\"\u003e\r\n\r\n\r\n\tfunction basicsCtrl($scope,$rootScope, $http,$log,$stateParams,DMLService,RestApiService,UIService,PubSub,$location) {\r\n\r\n\r\n        \r\n\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n            \r\n\r\n    \r\n    \r\n    \r\n        $scope[\"created_byEditCallBack\"] = function(data){\r\n            $scope.detail[\"created_by\"] = data.id;\r\n            $scope.edit();\r\n        }\r\n            \r\n\r\n            \r\n\r\n\r\n\r\n        \r\n        $scope.value = {};\r\n        \r\n        $scope.lastpagestr = $location.search().lastpage?\"page=\"+$location.search().lastpage:\"\";\r\n        \r\n        $scope.pubSubPublish = function(a,b){\r\n            PubSub.publish(a,b);\r\n        }\r\n        \r\n\t\t$scope.edit = function edit(){\r\n\t\t\t$scope.editing = true;\r\n\t\t\t$rootScope.promptExit =true;\r\n\t\t}\r\n\t\t$scope.closeEdit = function (){\r\n\t\t\t$scope.editing = false;\r\n\t\t\t$rootScope.promptExit =false;\r\n\t\t}\r\n\r\n         $scope.keyDown = function(e) {\r\n          if ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)){\r\n            $scope.save();\r\n          }\r\n        };\r\n        \r\n        $scope.bindCallBack = function(params){\r\n            $scope.bind();\r\n        }  \r\n        \r\n        \r\n        $scope.printCallBack = function(params){\r\n            //console.log('printCallBack',params);\r\n            if (params.vars \u0026\u0026 params.vars.file_url){\r\n            location.href = params.vars.file_url;\r\n            }\r\n            //$scope.details.ns.push({_inserted:1, id:0,doc_id:$scope.detail.sys$uuid,nomen_id:params.id,_nomen_title:params.title,quantity:1,price:params.price,amount:params.price});\r\n        \r\n            \r\n        }  \r\n        \r\n\r\n\t\t$scope.bind = function bind(){\r\n\t\t    \r\n\t\t    \r\n\r\n\t\t    Metronic.startPageLoading();\r\n\t\t\tRestApiService.get('detail?code=meiran_test\u0026id='+$stateParams.id).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t    Metronic.stopPageLoading();\r\n\t\t\t\t// here the data from the api is assigned to a variable named users\r\n\r\n                $scope.table_name=\"meiran_test\";\r\n                \r\n                \r\n        \t\tif ($stateParams.id!=0) {\t\t    \r\n        \t    \r\n        \t\tRestApiService.get('services/run/entity_acts?entity_code='+$scope.table_name+\"\u0026id=\"+$stateParams.id).\r\n        \t\tsuccess(function(data) { \r\n        \t\t    $scope.entityActions = data;\r\n        \t\t});\r\n        \t\t}\r\n\t\t\r\n\t\t\r\n                \r\n    \t\t\tRestApiService.get('query/get?code=entity_attrs_by_code\u0026param1='+$scope.table_name).\r\n    \t\t\tsuccess(function(data) { \r\n    \t\t\t    $scope.fields = data.items;\r\n    \t\t\t});\t    \r\n    \t\t\t\r\n\t\t\t\t$scope.closeEdit();\r\n\t\t\t\t$scope.details = data;\r\n\t\t\t\t$scope.detail = {};\r\n\t\t\t\t$scope.detail.id = $stateParams.id;\r\n\t\t\t\tif ($stateParams.id!=0) {\r\n\t\t\t\t\t$scope.detail = data[\"meiran_test\"][0];\r\n\r\n\t\t\t\t}else{\r\n\t\t\t\t    Metronic.setDefaultValuesFromUrl($scope.detail);\r\n                \t//if (Metronic.getParameterByName(\"df_account_id\")!=null){\r\n                \t//\t$scope.detail.account_id = Metronic.getParameterByName(\"df_account_id\");    \r\n                \t//}\r\n                \t$scope.detail.sys$uuid = Metronic.getUUID();\r\n                }\r\n\t\t\t\t\r\n\t\t\t\tPubSub.publish(\"bindBuComponents\",{});\r\n\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\t$scope.save = function save(){\r\n\r\n\r\n\r\n\t\t\t$scope.action =  $scope.detail.id == 0 ? \"insert\":\"update\";\r\n\t\t\t\r\n\t\t\t$scope.error_code = \"\"\r\n\t\t\t$scope.error_text = \"\";\r\n\t\t\t\r\n\t\t\tMetronic.startPageLoading();\r\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\r\n\t\t\t\r\n\t\t\t\r\n\r\n\r\n\t\t\tDMLService.update( $scope.saveValues ).\r\n\t\t\t\tsuccess(function (data) {\r\n\t\t\t\t\tif (data.error!=\"0\") {\r\n\t\t\t\t\t\t$scope.error_code = data.error_code;\r\n\t\t\t\t\t\t$scope.error_text = data.error_text;\r\n\t\t\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($scope.detail.id == 0) {\r\n\t\t\t\t\t\tdata.items.forEach(function (item, i, arr) {\r\n\t\t\t\t\t\t\tif (item.table_name==$scope.table_name){\r\n\t\t\t\t\t\t\t\tlocation.href = \"#/fm_crm_test/meiran_testdetails/\" +item.last_insert_id;\r\n\t\t\t\t\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t\t\t\t\t\t$scope.closeEdit();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t    Metronic.stopPageLoading();\r\n\t\t\t\t\t\t$scope.bind();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t$scope.cancel = function cancel(){\r\n\t\t    \r\n\t\t\t$scope.bind($stateParams.id);\r\n\t\t}\r\n\r\n\t\t$scope.bind($stateParams.id);\r\n\r\n\t};\r\n\r\n\r\n\r\n\r\n\u003c/script\u003e\r\n\r\n\u003c!-- END MAIN CONTENT --\u003e\r\n","templateurl":"","title":"meiran_test_crm_fm","updated_at":"2021-09-28 17:30:01","url":"/fm_crm_test/meiran_testdetails/{id}"},{"code":"crm_report","created_at":"2021-09-28 17:39:37","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5416","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"c597ba4c-52ba-4c39-bc7d-6ebb317bab37","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n.dotted1 {\n    border-style: dotted;\n    border-top: 0px;\n    border-bottom: 0px;\n    border-left: 0px;\n    border-right-color: #333333;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-3 border dotted1\" \u003e\n\t\t\u003ch4\u003e\u003cb\u003eОтчет по операциям клиента\u003c/b\u003e\u003c/h4\u003e\n    \u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\n\n\t\u003c/div\u003e\n\t\n\t\n\t\n\t\u003cdiv class=\"col-md-3\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eОтчет по контрагентам\u003c/b\u003e\u003c/h4\u003e\n        \u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\n\t\u003cdiv class=\"col-md-3\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eОтчет по подкл/откл скидкам\u003c/b\u003e\u003c/h4\u003e\n        \u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\n\t\u003cdiv class=\"col-md-3\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eОтчет по ошибкам\u003c/b\u003e\u003c/h4\u003e\n\t    \u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t    \u003ca class=\"btn btn-primary kBSCXr\" href=\"https://www.stats.govt.nz/assets/Uploads/Business-financial-data/Business-financial-data-June-2021-quarter/Download-data/business-financial-data-june-2021-quarter-csv.zip\" download=\"proposed_file_name\"\u003eDownload\u003c/a\u003e\n\t\t\t\t\t\t\t\t\t\u003cbutton  class=\"btn btn-primary kBSCXr\" ng-click=\"save('NAME.html','CODE')\"\u003eВыгрузка test\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t\tRestApiService.get(uri1).\n\t\t\tsuccess(function(data_1) {\n\t\t\t\t$scope.roles = data_1.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=crm_report_inter01_02\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + \"all\").\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Meiran crm ForteMobile report page","updated_at":"2021-12-28 10:15:33","url":"/mfo/crm_report"},{"code":"meiran_test_clients","created_at":"2021-09-30 15:16:25","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5417","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","query$code":"meiran_sql_users","query_id":"7060","sys$uuid":"97b98c5e-f6ab-4d42-8fcb-2c42f946599c","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary yellow\" ng-click=\"pubSubPublish('chooseBPMSModal',{\n            callBack: print_bpm_callback, \n            'processCode': 'jubak_test', \n            'input': {'encoding':  89, 'status': 'test stat input'} \n        })\"\u003e\n\t\t\u003ci class=\"fa fa-comments\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003e test bpm\u003c/translate\u003e\n\t\u003c/button\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eИстория обращений клиента\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cul\u003e\n\t\t\t\u003cli\u003eID обращения\u003c/li\u003e\n\t\t\t\u003cli\u003eДата регистрации\u003c/li\u003e\n\t\t\t\u003cli\u003eСтатус\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eЖурнал событий\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003ch5\u003e\u003cb\u003eПоследний пользователь работавший на карточке Клиента\u003c/b\u003e\u003c/h5\u003e\n\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\u003cth\u003eФИО\u003c/th\u003e\n\t\t\t\t\t\u003cth\u003eДата\u003c/th\u003e\n\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\u003ctd\u003eТЕСТ\u003c/td\u003e\n\t\t\t\t\t\u003ctd\u003eТЕСТ\u003c/td\u003e\n\t\t\t\t\u003c/tr\u003e\n\t\t\t\u003c/table\u003e\n\t\u003c/div\u003e\n\t\u003c!--\u003cli ng-if=\"getSelectedIDs().length==0\"\u003e--\u003e\n\t\u003cli\u003e\n    \u003ca \n    ng-click=\"pubSubPublish('chooseBPMSModal',{callBack:expTemplateCallBack,'processCode':'exp_template', input: {entity_id:pageData.entityId,'url':'?code='+query_code+'\u0026amp;ids='+getSelectedIDsUrl()  } })\"\n    \u003e\n        \u003ci class=\"fa fa-file-excel-o\"\u003e\u003c/i\u003e \u003ctranslate\u003eExport\u003c/translate\u003e ( {{getSelectedIDs().length}} \u003ctranslate\u003eRecords\u003c/translate\u003e)\u003c/a\u003e\n\u003c/li\u003e\n\t\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        $scope.searchTitle = \"\";\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t}\n\t\t$scope.bind();\n\t\t$scope.setListOwnerFilter('all');\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Клиенты","updated_at":"2021-10-27 12:34:16","url":"/mfo/meiran_test_clents"},{"code":"meiran_test_products_fm","created_at":"2021-09-30 15:36:04","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5419","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"a7d2c639-e7a5-46ae-a4db-33934aefdbf3","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary yellow\" ng-click=\"pubSubPublish('chooseBPMSModal',{\n            callBack: print_bpm_callback, \n            'processCode': 'jubak_test', \n            'input': {'encoding':  89, 'status': 'test stat input'} \n        })\"\u003e\n\t\t\u003ci class=\"fa fa-comments\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003e test bpm\u003c/translate\u003e\n\t\u003c/button\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\u003c/div\u003e\n\t\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        $scope.searchTitle = \"\";\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t}\n\t\t$scope.bind();\n\t\t$scope.setListOwnerFilter('all');\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Продукт FM","updated_at":"2021-09-30 17:00:03","url":"/mfo/meiran_test_products_fm"},{"code":"meiran_test_appeal","created_at":"2021-09-30 15:44:36","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5421","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"d2fa024a-9280-483f-8b1a-d5a774c3c6dd","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary yellow\" ng-click=\"pubSubPublish('chooseBPMSModal',{\n            callBack: print_bpm_callback, \n            'processCode': 'jubak_test', \n            'input': {'encoding':  89, 'status': 'test stat input'} \n        })\"\u003e\n\t\t\u003ci class=\"fa fa-comments\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003e test bpm\u003c/translate\u003e\n\t\u003c/button\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t\t\n\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\t\t\u003c!-- \n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\n\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t  \u003ca href=\"#/mfo/meiran_test_report\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003ereport page\u003c/a\u003e\n  \t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv id=\"report_hide\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ch1\u003eПо каналам\u003c/h1\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003ctable class=\"table striped\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eКанал\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003e{{textAnalyt[analyt]}}\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in data02\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.title}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row[analyt]}} \u003c/td\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-3\"\u003e\n\n\t\t\t\t\t\t\t\t\t\u003ccanvas id=\"radar\" class=\"chart chart-pie\" chart-data=\"charts02\" chart-labels=\"labels02\"\u003e\u003c/canvas\u003e\n\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003cdiv\u003e\n\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eПроданных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv\u003e\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eАктивных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total2\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\"Поиск пользователя по Email,Названию\" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСсылка в модуль \"Продукт FM\" \u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003cimg ng-if=\"item.avatar_url\" alt=\"\" class=\"img-circle\" style=\"max-height:25px\" src=\"{{item.avatar_url}}\" /\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{item.title}}\n\t\t\t\t\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003ctranslate\u003eProduct FM\u003c/translate\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003ch2\u003eПродукты банка\u003c/h2\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eRole\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in roles\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.role_id}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eНовости по продукту ForteMobile\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cul\u003e\n\t\t\t\u003cli\u003eCoffee\u003c/li\u003e\n\t\t\t\u003cli\u003eTea\u003c/li\u003e\n\t\t\t\u003cli\u003eMilk\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        document.getElementById(\"report_hide\").style.display = 'none';\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t\tRestApiService.get(uri1).\n\t\t\tsuccess(function(data_1) {\n\t\t\t\t$scope.roles = data_1.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=crm_report_inter01_02\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + \"all\").\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Обращения","updated_at":"2021-09-30 16:05:34","url":"/mfo/meiran_test_appeal"},{"code":"crm_report1","created_at":"2021-09-30 15:53:50","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5423","is_auto":"0","is_cache":"0","module$code":"mfo","module_id":"39","page_type$code":"list","page_type_id":"1","sys$uuid":"1a9d1713-2388-413c-a282-6c6db38d3c7e","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\r\n\u003chead\u003e\r\n\u003cstyle\u003e\r\n.kBSCXr {\r\nbackground-color: #EE1D75;\r\ncolor: #FFFFFF;\r\n}\r\n\r\n.box{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.form-control-1 {\r\n    font-size: 20px;\r\n    font-weight: normal;\r\n    border: 0px;\r\n\tcolor: black;\r\n\theight: 40px;\r\n\tvertical-align: middle;\r\n}\r\n\r\n\r\n.head_iin {\r\n    font-size: 14px;\r\n    font-weight: normal;\r\n    border: 0px;\r\n\tcolor: black;\r\n\theight: 40px;\r\n\tvertical-align: middle;\r\n\tpadding-top: 10px;\r\n}\r\n\r\n.form-control-2 {\r\n\tbackground-color: powderblue;\r\n}\r\n\r\n.btn_sfor{\r\n    \r\n        padding-top: 10px;\r\n}\r\n\r\n.bez_label label {\r\n    display: none;\r\n}\r\n.bez_label  {\r\npadding-top: 10px;\r\n}\r\n\r\n.dotted1 {\r\n    border-style: dotted;\r\n    border-top: 0px;\r\n    border-bottom: 0px;\r\n    border-left: 0px;\r\n    border-right-color: #333333;\r\n}\r\n\r\n\u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\"\r\nng-init=\"init({pageData:$state.current.data,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\r\nng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\r\n\r\n\u003cdiv class=\"row form-control form-control-1 head_iin\"\u003e\r\n\t\u003cb\u003eОтчет по операциям клиента\u003c/b\u003e\r\n\u003c/div\u003e\r\n\u003cdiv class=\"row\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t    \u003cform role=\"form\"\u003e\r\n\t\t\t\u003cdiv class=\"form-body\"\u003e\r\n\t\t\t\r\n\t\t\t    \u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       ИИН пользователя:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t    \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите ИИН \"  ng-model=\"searchTitle\" /\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003cdiv class=\"col-md-6\" \u003e\r\n\t\t\t\t    \u003c!--\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\"  on-change=\"disable\" /\u003e--\u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t        {{total1}}\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \r\n\t\t\t    \u003cdiv class=\"row\"\u003e\r\n\t\t\t\t    \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\r\n\t\t\t\t\t    \u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t            \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t                Дата начала:\r\n\t\t\t\t            \u003c/div\u003e\r\n\t\t\t            \u003c/div\u003e\r\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2 bez_label \" \u003e\r\n\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\r\n\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t            \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t                Дата окончания:\r\n\t\t\t\t            \u003c/div\u003e\r\n\t\t\t            \u003c/div\u003e\r\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2 bez_label\"\u003e\r\n\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\r\n\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       Описание операции:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t    \u003c!--\u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Описание\"  ng-model=\"searchDesc\" /\u003e --\u003e\r\n\t\t\t    \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Описание\"  ng-model=\"searchDesc\" /\u003e\r\n\t\t\t    \u003c!-- \u003cbu-input-label  label=\"Описание\" id-model=\"searchDesc\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e--\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c!--\u003cdiv class=\"row\"\u003e\r\n\t\t\t    \t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       Суммы операций учтенные в РП:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t\t \u003c/div\u003e\r\n\t\t\t   \u003cdiv class=\"col-md-2 bez_label\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  label=\"C\" id-model=\"price_amt_s\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n                \u003c/div\u003e\r\n\t\t\t\u003cdiv class=\"col-md-2 bez_label\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  label=\"До\" id-model=\"price_amt_po\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n            \u003c/div\u003e\r\n            \u003c/div\u003e--\u003e\r\n\t\u003c!-- as a Dom element --\u003e\r\n\t\t\t    \r\n\t\t\t    \u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\t\t\t\u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 btn_sfor\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t    \u003c/div\u003e\r\n\t\t\t\t\t\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c/div\u003e\r\n\t\t\u003c/form\u003e\r\n\t\t\u003cdiv class=\"row\"\u003e\r\n\t\t\u003cdiv ng-if=\"data02\" class=\"col-md-6\" style=\"text-align: right;\"\u003e\r\n\t\t\u003c/div\u003e    \r\n\t\t\u003cdiv ng-if=\"data02\" class=\"col-md-6\" style=\"text-align: left;\"\u003e\r\n\t\t\t\u003cspan style='font-weight: bold;' \u003eИтого: \u003c/span\u003e \r\n\t\t\t\u003cbr\u003e\u003cspan style='font-weight: bold;' \u003eсумма в валюте KZT (с авториз. операциями) – \u003c/span\u003e \u003cspan style='font-weight: bold;' \u003e{{totalSum}}\u003c/span\u003e  \r\n\t\t\t\u003cbr\u003e\u003cspan style='font-weight: bold;' \u003eсумма в валюте KZT (без авториз. операций) - \u003c/span\u003e \u003cspan style='font-weight: bold;' \u003e{{totalSumAuth}}\u003c/span\u003e \r\n\t\t\u003cbr\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003cbr\u003e\r\n\t\t\u003cdiv class=\"row\"\u003e\r\n\t        \u003cdiv class=\"col-md-12\"\u003e\r\n\t\t    \u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t    \u003c!--\u003cp\u003e--\u003e\r\n\t\t\t    \t\u003c!--SAMPLE NOTE:--\u003e\r\n\t\t\t    \u003c!--\u003c/p\u003e--\u003e\r\n\t\t    \u003c!--\u003c/div\u003e--\u003e\r\n\t\t    \u003c!-- Begin: life time stats --\u003e\r\n\t\t        \u003cdiv class=\"portlet\"\u003e\r\n\t\t\t        \u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t    \t    \u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t    \t    \u003cdiv class=\"table-responsive\"\u003e\r\n\t\t\t\t    \t\t    \u003ctable st-table=\"data02\"  class=\"table table-striped table-bordered\"\u003e\r\n\t\t\t\t    \t\t\t    \u003cthead\u003e\r\n    \t\t\t\t\t    \t\t    \u003ctr style=\"background-color:#ddda\" \u003e\r\n    \t\t\t\t\t\t    \t        \r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003e\r\n    \t\t\t\t\t\t\t\t            Дата отражения по счету\r\n    \t\t\t\t\t\t\t\t        \u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003e\r\n    \t\t\t\t\t\t\t\t        Дата операции\r\n    \t\t\t\t\t\t\t\t        \u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003e\r\n    \t\t\t\t\t\t\t\t            Описание операции\r\n    \t\t\t\t\t\t\t\t        \u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003e\r\n    \t\t\t\t\t\t\t\t            МСС операции\r\n    \t\t\t\t\t\t\t    \t    \u003c/th\u003e\r\n    \t\t\t\t\t\t\t    \t    \u003cth class=\"text-center\"\u003e\r\n    \t\t\t\t\t\t\t    \t        Сумма операции в валюте KZT\r\n    \t\t\t\t\t\t\t    \t    \u003c/th\u003e\r\n    \t\t\t\t\t\t\t    \t    \u003cth class=\"text-center\"\u003e\r\n    \t\t\t\t\t\t\t    \t        Суммы операций учтенные в РП\r\n    \t\t\t\t\t\t\t    \t    \u003c/th\u003e\r\n    \t\t\t\t\t\t\t    \t    \r\n    \t\t\t\t\t\t\t        \u003c/tr\u003e\r\n\t\t\t\t\t\t\t        \u003c/thead\u003e\r\n\t\t\t\t\t\t\t        \u003ctbody\u003e\r\n\t\t\t\t\t\t\t            \u003ctr ng-repeat=\"row in data02 | orderBy: 'tran_date' : true \"  ng-style=\"{'color': getBackgroundColor(row.calc_yn)}\"\u003e\r\n\t\t\t\t\t\t\t\t            \t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-left\"\u003e\r\n\t\t\t\t\t\t\t\t                 {{row.fct_tran_date}}\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-left\"\u003e\r\n\t\t\t\t\t\t\t\t                  {{row.tran_date}}\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-left\"\u003e\r\n\t\t\t\t\t\t\t\t                  {{row.tran_desc}}\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-left\"\u003e\r\n\t\t\t\t\t\t\t\t                  {{row.sic_cd}}\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-left\"\u003e\r\n\t\t\t\t\t\t\t\t                  {{row.sum_tran_kzt}}\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-left\"\u003e\r\n\t\t\t\t\t\t\t\t                  {{row.sum_tran_curr}}\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t            \u003c/tr\u003e\r\n\t\t\t\t\t\t\t        \u003c/tbody\u003e\r\n\t\t\t\t\t\t\t        \u003c!--\u003ctfoot\u003e\r\n\t\t\t\t\t\t\t\u003ctr  style=\"background-color:{{row._row_color}}\"\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t\t        \u003c/td\u003e\t\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-right\"\u003e\r\n\t\t\t\t\t\t\t\t                  Итого:\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-right\"\u003e\r\n\t\t\t\t\t\t\t\t                  {{totalSum}}\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\r\n\t\t\t\t\t\t\t\t                \u003cdiv class=\"text-right\"\u003e\r\n\t\t\t\t\t\t\t\t                  {{totalSumKZT}}\r\n\t\t\t\t\t\t\t\t                \u003c/div\u003e\r\n\t\t\t\t\t\t\t\t            \u003c/td\u003e\r\n\t\t\t\t\t\t\t            \u003c/tr\u003e\r\n\t\t\t\t\t\t\t\u003c/tfoot\u003e--\u003e\r\n\t\t\t\t\t\t        \u003c/table\u003e\r\n\t\t\t\t\t        \u003c/div\u003e\r\n\t\t\t\t        \u003c/div\u003e\r\n\t\t\t        \u003c/div\u003e\r\n\t\t        \u003c/div\u003e\r\n\t\t        \u003c!-- End: life time stats --\u003e\r\n\t        \u003c/div\u003e\r\n        \u003c/div\u003e\r\n\t\t\u003c!--\u003cdiv class=\"col-md-12 center\"\u003e\r\n\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" \r\n\t\t\tng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack,'processCode':'exp_template', input: {entity_id:pageData.entityId,'url':'?code='+table_name+'\u0026amp;d1=' +begin_at+'\u0026amp;d2=' + end_at+'\u0026amp;d3=' +lastpagestr2 } })\"\u003e\r\n\t\t\t    Выгрузка отчета в pdf/excel\u003c/button\u003e\r\n\t\t\u003c/div\u003e--\u003e\r\n\t\u003c/div\u003e\r\n\u003c/div\u003e\r\n\u003cdiv class=\"row\"\u003e\r\n    \u003chr\u003e\r\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\r\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\r\n\t\u003c/a\u003e\r\n\t\u003chr\u003e\r\n\u003c/div\u003e\r\n\u003c/section\u003e\r\n\r\n\r\n\u003cscript type=\"text/javascript\"\u003e\r\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter,$location) {\r\n\r\n\t\t\r\n        $scope.lastpagestr2 = $location.search().id?$location.search().id:\"\";\r\n        $scope.searchTitle = $scope.lastpagestr2;\r\n        $scope.lastpagestr3 = $location.search().beg?$location.search().beg:\"\";\r\n        $scope.lastpagestr4 = $location.search().end?$location.search().end:\"\";\r\n        $scope.begin_at = $scope.lastpagestr3;//$filter('date')(x[0], \"yyyy-MM-dd\");\r\n\t    $scope.end_at = $scope.lastpagestr4;//$filter('date')(x[1], \"yyyy-MM-dd\");\r\n\t    \r\n        $scope.init = function(opt){\r\n        $scope.opt = opt;\r\n        //console.log('opt.pageData',opt.pageData );\r\n        //console.log('opt test2');\r\n\r\n        $scope.pageCode = opt.pageCode;\r\n        $scope.pageData = opt.pageData;\r\n        $scope.pageId = opt.pageId;\r\n        if (opt.pageData){\r\n            $scope.entityId = opt.pageData.entityId;\r\n            $scope.table_name = opt.pageData.entityCode;\r\n            $scope.query_code = opt.pageData.pageQueryCode;\r\n        }\r\n        $scope.exportXMLFields = opt.exportXMLFields;\r\n        //alert('test');\r\n        //alert($location.search().page);\r\n        if (opt.currentPage){\r\n            $scope.currentPage = opt.currentPage;\r\n        }\r\n\r\n        $scope.perPage = opt.perPage;\r\n\r\n\r\n\r\n\r\n        $scope.selectRecordsState =  (opt.selectRecordsState) ? opt.selectRecordsState : true;\r\n        if (opt.filter) {\r\n            $scope.filter = opt.filter;\r\n        }\r\n\r\n\r\n\r\n\r\n    }\r\n    \r\n    console.log($scope.entityId);\r\n        \r\n\t\t$scope.textAnalyt = {};\r\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\r\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\r\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\r\n\t\tUIService.bindUITools($scope);\r\n\r\n\t\t$scope.pubSubPublish = function(a, b) {\r\n\t\t\tPubSub.publish(a, b);\r\n\t\t}\r\n\t\t$scope.print_bpm_callback = function(params) {\r\n\t\t\t//console.log('printCallBack', params);\r\n\t\t}\r\n\t\t\r\n\t\t$scope.printCallBack = function(params) {\r\n        if (params.vars \u0026\u0026 params.vars.file_url) {\r\n            location.href = params.vars.file_url;\r\n        }\r\n        }\r\n\r\n\t\t$scope.edit = function edit() {\r\n\t\t\t$scope.editing = true;\r\n\t\t}\r\n\r\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\r\n\t\t\t$scope.listOwnerCode = code;\r\n\r\n\t\t\tif (doBind) {\r\n\t\t\t\t$scope.bind();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\t$scope.setAnalyt = function(code, doBind) {\r\n\t\t\t$scope.analyt = code;\r\n\r\n\t\t\tif (doBind) {\r\n\t\t\t\t$scope.bind();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t$scope.search = function(searchTitle) {\r\n\r\n\t\t\t$scope.searchTitle = searchTitle;\r\n\r\n\t\t\t$scope.bind();\r\n\r\n\t\t}\r\n\r\n\t\t$scope.parentCallBack = function(parent, user) {\r\n\t\t\t//alert(parent.current);\r\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\r\n\r\n\t\t}\r\n\r\n\r\n\t\t$scope.parentChoose = function(parent, id) {\r\n\t\t\tparent.choose(id);\r\n\t\t\t$scope.searchText = \"\";\r\n\t\t}\r\n\r\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\r\n\t\t\t$scope.listPeriodCode = code;\r\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\r\n\t\t\tconsole.log(x);\r\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\r\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\r\n\t\t\tif (doBind) {\r\n\t\t\t\t$scope.bind();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t\r\n\t\t$scope.getBackgroundColor = function(value) {\r\n\t\t    console.log('value',value );\r\n            if(value == '1') {\r\n              return 'black';\r\n            }\r\n            else{\r\n              return 'red';\r\n            }\r\n        }\r\n\t\t\r\n\t\t$scope.keyDown = function(e) {\r\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\r\n\t\t\t\t$scope.save();\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t$scope.sumAll = function sumAll() {\r\n\t\t\t$scope.totalSum = 0;\r\n\t\t\t$scope.totalSumAuth = 0;\r\n\t\t\tfor(var arr in $scope.data02){\r\n\t\t\t    if ($scope.data02[arr].calc_yn !='0') { \r\n\t\t\t      $scope.totalSumAuth = $scope.totalSumAuth + Number($scope.data02[arr].tran_amt_auth);  \r\n\t\t\t      $scope.totalSum = $scope.totalSum + Number($scope.data02[arr].sum_tran_kzt);\r\n\t\t\t    \r\n\t\t\t}\r\n\t\t\t    \r\n\t\t\t}\r\n\t\t};\r\n\r\n        \t$scope.save = function save(){\r\n\r\n\r\n\r\n\t\t\t$scope.action = \"insert\";\r\n\t\t\t$scope.table_name = \"user_logs\"\r\n\t\t\t$scope.error_code = \"\"\r\n\t\t\t$scope.error_text = \"\";\r\n\t\t\t$scope.detail = {};\r\n\t\t\t$scope.detail.id = 0;\r\n\t\t\t$scope.detail.search_param = $scope.searchTitle ;\r\n\t\t\t$scope.detail.title=\"OPER_REPORT\";\r\n\t\t\t\r\n\t\t\tMetronic.startPageLoading();\r\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\r\n\r\n\t\t\tDMLService.update( $scope.saveValues ).\r\n\t\t\t\tsuccess(function (data) {\r\n\t\t\t\t\tif (data.error!=\"0\") {\r\n\t\t\t\t\t\t$scope.error_code = data.error_code;\r\n\t\t\t\t\t\t$scope.error_text = data.error_text;\r\n\t\t\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t$scope.bind = function bind() {\r\n\r\n\t\t\tMetronic.startPageLoading();\r\n\t\t\t//console.log('$scope.lastpagestr2',$scope.lastpagestr2 );\r\n\t\t\t//console.log('$scope.searchTitle',$scope.searchTitle );\r\n\t\t\tif($scope.lastpagestr2 =\"\") {\r\n            $scope.lastpagestr2 = $scope.searchTitle;\r\n            }\r\n            if(!$scope.lastpagestr2) {\r\n            $scope.lastpagestr2 = $scope.searchTitle;\r\n            }\r\n            if(!$scope.price_amt_s) {\r\n            $scope.price_amt_s = 0;\r\n            }\r\n            \r\n            if(!$scope.price_amt_po) {\r\n            $scope.price_amt_po = 999999999999999999;\r\n            }\r\n            console.log('$scope.searchDesc',$scope.searchDesc );\r\n            //$scope.searchDesc = searchDesc;\r\n            if($scope.searchDesc ==\"\") {\r\n            $scope.searchDesc = \"\";\r\n            }\r\n            console.log('$scope.searchDesc',$scope.searchDesc );\r\n            if(!$scope.searchDesc) {\r\n            $scope.searchDesc = \"\";\r\n            }\r\n            console.log('$scope.searchDesc',$scope.searchDesc );\r\n            //console.log('$scope.lastpagestr2',$scope.lastpagestr2 );\r\n\t\t\t\r\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\r\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\r\n\t\t\t$scope.table_name=\"ora_detail_for_report1\";\r\n\t\t\tRestApiService.get(uri).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t$scope.items = data.items;\r\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\r\n\t\t\t});\r\n\r\n\t\t\tRestApiService.get(uri1).\r\n\t\t\tsuccess(function(data_1) {\r\n\t\t\t\t$scope.roles = data_1.items;\r\n\t\t\t\t//Metronic.stopPageLoading();\r\n\t\t\t});\r\n\t\t\tRestApiService.get(\"query/get?code=ora_report1\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.lastpagestr2).\r\n\t\t\tsuccess(function(data_total) {\r\n\t\t\t\t$scope.total1 = data_total.items[0].cust_nm;\r\n\t\t\t\t$scope.total_inn = data_total.items[0].bin_or_iin;\r\n\t\t\t\t//Metronic.stopPageLoading();\r\n\t\t\t});\r\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\r\n\t\t\tsuccess(function(data_total1) {\r\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\r\n\t\t\t\t//Metronic.stopPageLoading();\r\n\t\t\t});\r\n\r\n\t\t\tvar ok = 0;\r\n\t\t\tRestApiService.get(\"query/get?code=ora_client_transation_by_period\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + $scope.lastpagestr2\r\n\t\t\t+ \"\u0026param4=\" + $scope.searchDesc + \"\u0026param5=\" + $scope.price_amt_s + \"\u0026param6=\" + $scope.price_amt_po).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t$scope.data02 = data.items;\r\n\t\t\t\t$scope.sumAll();\r\n\t\t\t\t$scope.save();\r\n\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t});\r\n\r\n\t\t}\r\n\t\t$scope.setListOwnerFilter('all');\r\n\t\tif(!$scope.begin_at) {\r\n\t\t$scope.setListPeriodFilter(\"today\");\r\n\t\t}\r\n\t\t$scope.setAnalyt(\"cnt\");\r\n\t\tif($scope.lastpagestr2) {\r\n         $scope.bind();\r\n        }\r\n        \r\n\r\n\t};\r\n\t\r\n\u003c/script\u003e\r\n\r\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"/mfo/meiran_test_report1","title":"по операциям клиента","updated_at":"2022-01-24 14:21:19","url":"/mfo/crm_report1"},{"code":"crm_report2","created_at":"2021-09-30 15:56:56","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5424","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"75c30dad-e319-49a2-b026-4678b70ebfdf","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\r\n\r\n\u003chead\u003e\r\n\u003cstyle\u003e\r\n.kBSCXr {\r\nbackground-color: #EE1D75;\r\ncolor: #FFFFFF;\r\n}\r\n\r\n.box{\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n}\r\n\r\n.form-control-1 {\r\n    font-size: 20px;\r\n    font-weight: normal;\r\n    border: 0px;\r\n\tcolor: black;\r\n\theight: 40px;\r\n\tvertical-align: middle;\r\n}\r\n\r\n\r\n.form-control-2 {\r\n\tbackground-color: powderblue;\r\n}\r\n\r\n.head_iin {\r\n    font-size: 14px;\r\n    font-weight: normal;\r\n    border: 0px;\r\n\tcolor: black;\r\n\theight: 40px;\r\n\tvertical-align: middle;\r\n\tpadding-top: 10px;\r\n}\r\n\r\n.dotted1 {\r\n    border-style: dotted;\r\n    border-top: 0px;\r\n    border-bottom: 0px;\r\n    border-left: 0px;\r\n    border-right-color: #333333;\r\n}\r\n.bez_label label {\r\n    display: none;\r\n}\r\n.bez_label  {\r\npadding-top: 20px;\r\n}\r\n.moved {\r\n    margin-left :0px\r\n}\r\n.form-control-2 {\r\n\tbackground-color: powderblue;\r\n}\r\n\r\n\u003c/style\u003e\r\n\u003c/head\u003e\r\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" \r\nng-controller=\"basicsCtrl\" \r\nng-init=\"init({pageData:$state.current.data,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\r\nstyle=\"background-color:#FFFFFF;\"\u003e\r\n\u003c!--\r\n\u003cdiv class=\"page-bar\"\u003e\r\n\t\u003cul class=\"page-breadcrumb\"\u003e\r\n\t\t\u003cli\u003e\r\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\r\n\t\t\t\u003ctranslate\u003eОтчет по продажам\u003c/translate\u003e\r\n\t\t\u003c/li\u003e\r\n\t\u003c/ul\u003e\r\n\t\u003cdiv class=\"page-toolbar\"\u003e\r\n\t    \u003cdiv class=\"btn-group pull-right\"\u003e\r\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\r\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\r\n\t\u003c/a\u003e\r\n\t\u003c/div\u003e\r\n\t\r\n\u003c/div\u003e\r\n\u003c/div\u003e\r\n--\u003e\r\n\u003cdiv class=\"row form-control form-control-1 head_iin\"\u003e\r\n\t\u003cb\u003eОтчет по продажам\u003c/b\u003e\r\n\u003c/div\u003e\r\n\r\n\r\n\u003cdiv class=\"row\"\u003e\r\n\t\u003cdiv class=\"col-md-12\"\u003e\r\n\t    \u003cform role=\"form\"\u003e\r\n\t\t\t\u003cdiv class=\"form-body\"\u003e\r\n\t\t\t\r\n\t\t\t    \u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       Мобильный номер:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t    \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите номер клиента \"  ng-model=\"fmb_ph_num\" /\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\u003c!--\t\u003cdiv class=\"col-md-6\" \u003e\r\n\t\t\t\t    \u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\"  on-change=\"disable\" /\u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t        {{total1}}\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e--\u003e\r\n\t\t\t    \t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       УРП/УРЗП/ЦБО:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\"  \u003e\r\n\t\t\t    \u003c!--\u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите Номер\"  ng-model=\"searchDesc\" /\u003e --\u003e\r\n\t\t\t     \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите УРП/УРЗП/ЦБО\"  ng-model=\"sale_place_urp\" /\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t\t\u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       ФИО клиента:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t    \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите ФИО клиента\"  ng-model=\"cust_nm\" /\u003e \r\n\t\t\t\t\u003c/div\u003e\r\n\t                \u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t      ФИО продавца:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t    \u003c!--\u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите Номер\"  ng-model=\"searchDesc\" /\u003e --\u003e\r\n\t\t\t     \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите ФИО продавца\"  ng-model=\"salesman\" /\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\r\n\t\t\t\t\u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       ИИН клиента:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t    \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите ИИН клиента \"  ng-model=\"bin_or_iin\" /\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       Номер продавца:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t   \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t    \u003c!--\u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите номер продавца \"  ng-model=\"searchDesc\" /\u003e --\u003e\r\n\t\t\t     \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите номер продавца\"  ng-model=\"salesman_phn_num\" /\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \r\n\r\n\t\t\t\t \u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       Филиал:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003c/div\u003e\r\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t    \u003c!--\u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите Номер\"  ng-model=\"searchDesc\" /\u003e --\u003e\r\n\t\t\t     \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите Филиал \"  ng-model=\"sale_city\" /\u003e\r\n\t\t\t\t\u003c/div\u003e\r\n\t\t\t    \t\u003c/div\u003e\r\n\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\u003cdiv class=\"row\"\u003e\r\n\t\t\t\t    \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\r\n\t\t\t\t\t    \u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t            \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t                Дата начала:\r\n\t\t\t\t            \u003c/div\u003e\r\n\t\t\t            \u003c/div\u003e\r\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2 bez_label\" style =\"padding-top: 10px;\" \u003e\r\n\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\r\n\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t\t            \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t                Дата окончания:\r\n\t\t\t\t            \u003c/div\u003e\r\n\t\t\t            \u003c/div\u003e\r\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2 bez_label\" style =\"padding-top: 10px;\"\u003e\r\n\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\r\n\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\r\n\t\t\t\t\u003cbr\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\r\n\t\t\t\t\t\t\t\u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\r\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 btn_sfor\"\u003e\r\n\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\r\n\t\t\t\t\t\t\t\t\u003c/div\u003e\r\n\t\t\t\t\t\t    \u003c/div\u003e\r\n\t\t\t            \u003c/div\u003e\r\n\t\t\t\t\t\t \u003cbr\u003e\r\n\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t\u003c!--\u003cdiv class=\"row\"\u003e\r\n\t\t\t    \t\u003cdiv class=\"col-md-2\" \u003e\r\n\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\r\n\t\t\t\t       Суммы операций учтенные в РП:\r\n\t\t\t\t    \u003c/div\u003e\r\n\t\t\t\t \u003c/div\u003e\r\n\t\t\t   \u003cdiv class=\"col-md-2 bez_label\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  label=\"\" id-model=\"price_amt_s\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n                \u003c/div\u003e\r\n\t\t\t\u003cdiv class=\"col-md-2 bez_label\" ng-show=\"1==1\"\u003e\r\n            \u003cbu-input-label  label=\"\" id-model=\"price_amt_po\" on-change=\"edit\" \u003e\u003c/bu-input-label\u003e\r\n            \u003c/div\u003e\r\n            \u003c/div\u003e \r\n\tas a Dom element --\u003e\r\n\t\r\n\t\r\n\t\t\u003cdiv ng-if=\"data02\" class=\"col-md-9 center\" style=\"text-align: right;\"\u003e\r\n\t\t\t\u003cspan style='font-weight: bold;' \u003eИтого - \u003c/span\u003e \u003cspan style='font-weight: bold;' \u003e{{total}}\u003c/span\u003e  \r\n\t\t\u003c/div\u003e\r\n\t\t\u003cdiv class=\"row\"\u003e\r\n\t        \u003cdiv class=\"col-md-12\"\u003e\r\n\t\t    \u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\r\n\t\t\t    \u003c!--\u003cp\u003e--\u003e\r\n\t\t\t    \t\u003c!--SAMPLE NOTE:--\u003e\r\n\t\t\t    \u003c!--\u003c/p\u003e--\u003e\r\n\t\t    \u003c!--\u003c/div\u003e--\u003e\r\n\t\t    \u003c!-- Begin: life time stats --\u003e\r\n\t\t        \u003cdiv class=\"portlet\"\u003e\r\n\t\t\t        \u003cdiv class=\"portlet-body\"\u003e\r\n\t\t\t    \t    \u003cdiv class=\"table-container\"\u003e\r\n\t\t\t\t    \t    \u003cdiv class=\"table-responsive\"\u003e\r\n\t\t\t\t    \t\t    \u003ctable st-table=\"data02\"  class=\"table table-striped table-bordered\"\u003e\r\n\t\t\t\t    \t\t\t    \u003cthead\u003e\r\n    \t\t\t\t\t    \t\t    \u003ctr style=\"background-color:#ddda\" \u003e\r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eМобильный номер\u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eФИО клиента\u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eИИН клиента\u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eДата продажи номера\u003c/th\u003e\r\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eДата активации номера\u003c/th\u003e\r\n    \t\t\t\t\t\t\t    \t    \u003cth class=\"text-center\"\u003eФилиал\u003c/th\u003e\r\n    \t\t\t\t\t\t\t    \t    \u003cth class=\"text-center\"\u003eУРП/УРЗП/ЦБО\u003c/th\u003e\r\n                                            \u003cth class=\"text-center\"\u003eФИО продавца\u003c/th\u003e\r\n                                            \u003cth class=\"text-center\"\u003eНомер продавца\u003c/th\u003e\r\n                                            \u003cth class=\"text-center\"\u003eТариф\u003c/th\u003e\r\n                                            \u003cth class=\"text-center\"\u003eТип(портация/новый)\u003c/th\u003e\r\n    \t\t\t\t\t\t\t        \u003c/tr\u003e\r\n\t\t\t\t\t\t\t        \u003c/thead\u003e\r\n\t\t\t\t\t\t\t        \u003ctbody\u003e\r\n\t\t\t\t\t\t\t            \u003ctr ng-repeat=\"row in data02 | limitTo:25\" style=\"background-color:{{row._row_color}}\"\u003e\t\t\t\t\t\t    \r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.fmb_ph_num}}\u003c/div\u003e\u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.cust_nm}}\u003c/div\u003e\u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.bin_or_iin}}\u003c/div\u003e\u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.sell_date}}\u003c/div\u003e\u003c/td\u003e\r\n                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.active_date}}\u003c/div\u003e\u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.sale_city}}\u003c/div\u003e\u003c/td\u003e\r\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.sale_place_urp}}\u003c/div\u003e\u003c/td\u003e\r\n                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.salesman}}\u003c/div\u003e\u003c/td\u003e\r\n                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.salesman_phn_num}}\u003c/div\u003e\u003c/td\u003e\r\n                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.trf_nm}}\u003c/div\u003e\u003c/td\u003e\r\n                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.type}}\u003c/div\u003e\u003c/td\u003e\r\n\t\t\t\t\t\t\t            \u003c/tr\u003e\r\n\t\t\t\t\t\t\t        \u003c/tbody\u003e\r\n\t\t\t\t\t\t\t        \r\n\t\t\t\t\t\t\t        \t\r\n\t\t\t\t\t\t        \u003c/table\u003e\r\n\t\t\t\t\t        \u003c/div\u003e\r\n\t\t\t\t        \u003c/div\u003e\r\n\t\t\t        \u003c/div\u003e\r\n\t\t        \u003c/div\u003e\r\n\t\t        \r\n\t\t        \u003c!-- End: life time stats --\u003e\r\n\t        \u003c/div\u003e\r\n        \u003c/div\u003e\r\n        \r\n\t\t\u003cdiv class=\"col-md-12 center \" \u003e\r\n\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" \r\n\t\t\tng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack,'processCode':'exp_template', input: {entity_id:pageData.entityId,'url':'?code='+table_name+'\u0026amp;d1=' +begin_at+'\u0026amp;d2=' + end_at+'\u0026amp;d3=' +lastpagestr2 } })\"\u003e\r\n\t\t\t    Выгрузка отчета в pdf/excel\u003c/button\u003e\r\n\t\t\u003c/div\u003e\r\n\t\t\u003c/div\u003e\r\n\u003c/form\u003e\u003c/div\u003e\u003c/div\u003e\r\n\u003cdiv class=\"row\"\u003e\r\n    \u003chr\u003e\r\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn ng-scope\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\r\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\r\n\t\u003c/a\u003e\r\n\t\u003chr\u003e\r\n\u003c/div\u003e\r\n\r\n\u003c/section\u003e\r\n\r\n\r\n\u003cscript type=\"text/javascript\"\u003e\r\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, PubSub, $filter) {\r\n\r\n\t\t$scope.searchTitle = \"\";\r\n\r\n\t\t$scope.pubSubPublish = function(a, b) {\r\n\t\t\tPubSub.publish(a, b);\r\n\t\t}\r\n\t\t$scope.print_bpm_callback = function(params) {\r\n\t\t\tconsole.log('printCallBack', params);\r\n\t\t}\r\n\r\n\t\t$scope.edit = function edit() {\r\n\t\t\t$scope.editing = true;\r\n\t\t}\r\n\r\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\r\n\t\t\t$scope.listOwnerCode = code;\r\n\r\n\t\t\tif (doBind) {\r\n\t\t\t\t$scope.bind();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t$scope.search = function(searchTitle) {\r\n\r\n\t\t\t$scope.searchTitle = searchTitle;\r\n\r\n\t\t\t$scope.bind();\r\n\r\n\t\t}\r\n\r\n\t\t$scope.parentCallBack = function(parent, user) {\r\n\t\t\t//alert(parent.current);\r\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\r\n\r\n\t\t}\r\n\r\n\r\n\t\t$scope.parentChoose = function(parent, id) {\r\n\t\t\tparent.choose(id);\r\n\t\t\t$scope.searchText = \"\";\r\n\t\t}\r\n\r\n    $scope.setListPeriodFilter = function(code, doBind) {\r\n\t\t\t$scope.listPeriodCode = code;\r\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\r\n\t\t\tconsole.log(x);\r\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\r\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\r\n\t\t\tif (doBind) {\r\n\t\t\t\t$scope.bind();\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t$scope.keyDown = function(e) {\r\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\r\n\t\t\t\t$scope.save();\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t$scope.sumAll = function sumAll() {\r\n\t\t\t$scope.total = 0;\r\n\t\t\tfor(var arr in $scope.data02){\r\n\t\t\t    $scope.total = Number(arr) + 1;\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n         $scope.save = function save(){\r\n\r\n\r\n\r\n\t\t\t$scope.action = \"insert\";\r\n\t\t\t$scope.table_name = \"user_logs\"\r\n\t\t\t$scope.error_code = \"\"\r\n\t\t\t$scope.error_text = \"\";\r\n\t\t\t$scope.detail = {};\r\n\t\t\t$scope.detail.id = 0;\r\n\t\t\t$scope.detail.search_param = $scope.searchTitle ;\r\n\t\t\t$scope.detail.title=\"SELL_REPORT\";\r\n\t\t\t\r\n\t\t\tMetronic.startPageLoading();\r\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\r\n\r\n\t\t\tDMLService.update( $scope.saveValues ).\r\n\t\t\t\tsuccess(function (data) {\r\n\t\t\t\t\tif (data.error!=\"0\") {\r\n\t\t\t\t\t\t$scope.error_code = data.error_code;\r\n\t\t\t\t\t\t$scope.error_text = data.error_text;\r\n\t\t\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t$scope.bind = function bind() {\r\n\r\n\t\t\tMetronic.startPageLoading();\r\n\t\t\t\r\n\t\t\t \r\n\t\t\t if(!$scope.fmb_ph_num) {\r\n            $scope.fmb_ph_num = \"\";\r\n            }\r\n             if(!$scope.cust_nm) {\r\n            $scope.cust_nm = \"\";\r\n            }\r\n            if(!$scope.bin_or_iin) {\r\n            $scope.bin_or_iin = \"\";\r\n            }\r\n             if(!$scope.sale_city) {\r\n            $scope.sale_city = \"\";\r\n            }\r\n             if(!$scope.sale_place_urp) {\r\n            $scope.sale_place_urp = \"\";\r\n            }\r\n             if(!$scope.salesman) {\r\n            $scope.salesman = \"\";\r\n            }\r\n             if(!$scope.salesman_phn_num) {\r\n            $scope.salesman_phn_num = \"\";\r\n            }\r\n\t\t\t/*uri = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\r\n\t\t\tRestApiService.get(uri).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t// here the data from the api is assigned to a variable named users\r\n\r\n\t\t\t\t$scope.items = data.items;\r\n\r\n\t\t\t\t\r\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\r\n\t\t\t});*/\r\n\t\t\t  console.log('searchTitle',\"query/get?code=report2_sales_crm_fm\u0026param1=\" + $scope.fmb_ph_num + \"\u0026param2=\" + $scope.cust_nm \r\n      + \"\u0026param3=\" + $scope.bin_or_iin + \"\u0026param4=\" + $scope.sale_city + \"\u0026param5=\" + $scope.sale_place_urp + \"\u0026param6=\" + $scope.salesman\r\n      +\"\u0026param7=\" + $scope.salesman_phn_num +\"\u0026param8=\" + $scope.begin_at +\"\u0026param9=\" + $scope.end_at);\r\n      RestApiService.get(\"query/get?code=report2_sales_crm_fm\u0026param1=\" + $scope.fmb_ph_num + \"\u0026param2=\" + $scope.cust_nm \r\n      + \"\u0026param3=\" + $scope.bin_or_iin + \"\u0026param4=\" + $scope.sale_city + \"\u0026param5=\" + $scope.sale_place_urp + \"\u0026param6=\" + $scope.salesman\r\n      +\"\u0026param7=\" + $scope.salesman_phn_num +\"\u0026param8=\" + $scope.begin_at +\"\u0026param9=\" + $scope.end_at).\r\n\t\t\tsuccess(function(data) {\r\n\t\t\t\t$scope.data02 = data.items;\r\n\t\t\t\t$scope.sumAll();\r\n\t\t\t\t$scope.save();\r\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\r\n\t\t\t\tMetronic.stopPageLoading();\r\n\t\t\t});\t\r\n\r\n\t\t}\r\n\t\t$scope.setListPeriodFilter(\"today\");\r\n\t\t$scope.bind();\r\n\t};\r\n\u003c/script\u003e\r\n\r\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"по продажам","updated_at":"2022-01-26 12:22:44","url":"/mfo/crm_report2"},{"code":"crm_report3","created_at":"2021-09-30 16:10:25","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5428","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"304a117c-c68b-4bef-8d4c-ac4809c92c11","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary yellow\" ng-click=\"pubSubPublish('chooseBPMSModal',{\n            callBack: print_bpm_callback, \n            'processCode': 'jubak_test', \n            'input': {'encoding':  89, 'status': 'test stat input'} \n        })\"\u003e\n\t\t\u003ci class=\"fa fa-comments\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003e test bpm\u003c/translate\u003e\n\t\u003c/button\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t\t\n\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\t\t\u003c!-- \n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\n\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t  \u003ca href=\"#/mfo/meiran_test_report\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003ereport page\u003c/a\u003e\n  \t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv id=\"report_hide\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ch1\u003eПо каналам\u003c/h1\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003ctable class=\"table striped\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eКанал\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003e{{textAnalyt[analyt]}}\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in data02\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.title}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row[analyt]}} \u003c/td\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-3\"\u003e\n\n\t\t\t\t\t\t\t\t\t\u003ccanvas id=\"radar\" class=\"chart chart-pie\" chart-data=\"charts02\" chart-labels=\"labels02\"\u003e\u003c/canvas\u003e\n\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003cdiv\u003e\n\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eПроданных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv\u003e\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eАктивных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total2\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\"Поиск пользователя по Email,Названию\" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСсылка в модуль \"Продукт FM\" \u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003cimg ng-if=\"item.avatar_url\" alt=\"\" class=\"img-circle\" style=\"max-height:25px\" src=\"{{item.avatar_url}}\" /\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{item.title}}\n\t\t\t\t\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003ctranslate\u003eProduct FM\u003c/translate\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003ch2\u003eПродукты банка\u003c/h2\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eRole\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in roles\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.role_id}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eНовости по продукту ForteMobile\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cul\u003e\n\t\t\t\u003cli\u003eCoffee\u003c/li\u003e\n\t\t\t\u003cli\u003eTea\u003c/li\u003e\n\t\t\t\u003cli\u003eMilk\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        document.getElementById(\"report_hide\").style.display = 'none';\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t\tRestApiService.get(uri1).\n\t\t\tsuccess(function(data_1) {\n\t\t\t\t$scope.roles = data_1.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=crm_report_inter01_02\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + \"all\").\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"по обращениям","updated_at":"2021-12-28 10:15:59","url":"/mfo/crm_report3"},{"code":"crm_report4","created_at":"2021-09-30 16:12:07","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5429","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"7512da9c-e5d7-4d59-95f2-ed61f160eec2","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 20px;\n    font-weight: normal;\n    border: 0px;\n\tcolor: black;\n\theight: 40px;\n\tvertical-align: middle;\n}\n\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n.dotted1 {\n    border-style: dotted;\n    border-top: 0px;\n    border-bottom: 0px;\n    border-left: 0px;\n    border-right-color: #333333;\n}\n.bez_label label {\n    display: none;\n}\n.bez_label  {\npadding-top: 20px;\n}\n.head_iin {\n    font-size: 14px;\n    font-weight: normal;\n    border: 0px;\n\tcolor: black;\n\theight: 40px;\n\tvertical-align: middle;\n\tpadding-top: 10px;\n}\n.btn_sfor{\n    \n        padding-top: 10px;\n}\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" \nng-controller=\"basicsCtrl\" \nng-init=\"init({pageData:$state.current.data,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\nstyle=\"background-color:#FFFFFF;\"\u003e\n\u003c!--\n\u003cdiv class=\"page-bar\"\u003e\n\t\u003cul class=\"page-breadcrumb\"\u003e\n\t\t\u003cli\u003e\n\t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n\t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n\t\t\t\u003ctranslate\u003eОтчет по продажам\u003c/translate\u003e\n\t\t\u003c/li\u003e\n\t\u003c/ul\u003e\n\t\u003cdiv class=\"page-toolbar\"\u003e\n\t    \u003cdiv class=\"btn-group pull-right\"\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003c/div\u003e\n\t\n\u003c/div\u003e\n\u003c/div\u003e\n--\u003e\n\n\u003cdiv class=\"row form-control form-control-1 head_iin\"\u003e\n\t\u003cb\u003eОтчет по скидкам\u003c/b\u003e\n\u003c/div\u003e\n\n\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-12\"\u003e\n\t    \u003cform role=\"form\"\u003e\n\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t    \n\t\t\t    \u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\u003cdiv class=\"col-md-5\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"col-md-5\"\u003e\n\t\t\t\t\t\t\t    \u003cdiv class=\" form-control-1 \" \u003e\n\t\t\t\t\t\t\t\t\t\u003clabel for=\"typ_z\"\u003eТип запроса:\u003c/label\u003e\n                            \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\"col-md-2\" style =\"padding-top: 10px;\"\u003e\n                                \u003cselect id=\"typ_z\"\u003e\n                                  \u003coption value=\"ALL\"\u003eВсе\u003c/option\u003e\n                                  \u003coption value=\"ADD\"\u003eПодключить\u003c/option\u003e\n                                  \u003coption value=\"DEL\"\u003eОтключить\u003c/option\u003e\n                                \u003c/select\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t    \u003c/div\u003e\n\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\n\t\t\t\t       ИИН клиента:\n\t\t\t\t    \u003c/div\u003e\n\t\t\t    \u003c/div\u003e\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\n\t\t\t    \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите ИИН \"  ng-model=\"bin_or_iin\" /\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\n\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t \u003cdiv class=\"col-md-5\"\u003e\n\t\t\t\t\t\t    \t\u003cdiv class=\"col-md-5\"\u003e\n\t\t\t\t\t\t    \t    \u003cdiv class=\" form-control-1 \" \u003e\n\t\t\t\t\t\t\t\t\t\u003clabel for=\"typ_s\"\u003eТип скидки:\u003c/label\u003e\n                            \u003c/div\u003e\n                             \u003c/div\u003e\n                            \u003cdiv class=\"col-md-2\" style =\"padding-top: 10px;\"\u003e    \n                                \u003cselect id=\"typ_s\"\u003e\n                                 \u003coption value=\"ALL\"\u003eВсе\u003c/option\u003e\n                                  \u003coption value=\"MF_DSCRC1\"\u003e50%\u003c/option\u003e\n                                  \u003coption value=\"MF_DSCRC2\"\u003e100%\u003c/option\u003e\n                                \u003c/select\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\n\t\t\t\t    \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\n\t\t\t\t       Мобильный номер:\n\t\t\t\t    \u003c/div\u003e\n\t\t\t    \u003c/div\u003e\n\t\t\t    \u003cdiv class=\"col-md-3\" style =\"padding-top: 10px;\" \u003e\n\t\t\t    \u003c!--\u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите Номер\"  ng-model=\"searchDesc\" /\u003e --\u003e\n\t\t\t     \u003cinput type=\"text\"  class=\"form-control\" placeholder=\"Введите Номер\"  ng-model=\"fmb_ph_num\" /\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\n\t\t\t    \u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\u003cdiv class=\"col-md-5\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"col-md-5\"\u003e\n\t\t\t\t\t\t\t    \u003cdiv class=\"form-control-1 \" \u003e\n\t\t\t\t\t\t\t\t\t\u003clabel for=\"typ_o\"\u003eРезультаты обр запроса Оператором:\u003c/label\u003e\n                            \u003c/div\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\"col-md-2\" style =\"padding-top: 10px;\"\u003e\n                                \u003cselect id=\"typ_o\"\u003e\n                                 \u003coption value=\"ALL\"\u003eВсе\u003c/option\u003e\n                                  \u003coption value=\"SUCCESS\"\u003eУспешно\u003c/option\u003e\n                                  \u003coption value=\"ERR\"\u003eНе успешно\u003c/option\u003e\n                                \u003c/select\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t    \u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t    \u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t    \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t\t    \u003cdiv class=\"col-md-2\" \u003e\n\t\t\t\t            \u003cdiv class=\"form-control form-control-1 head_iin \" \u003e\n\t\t\t\t                Дата начала:\n\t\t\t\t            \u003c/div\u003e\n\t\t\t            \u003c/div\u003e\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2 bez_label\" style =\"padding-top: 10px;\" \u003e\n\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t    \u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\t\t        \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2\" \u003e\n\t\t\t\t            \u003cdiv class=\"form-control form-control-1 head_iin\" \u003e\n\t\t\t\t                Дата окончания:\n\t\t\t\t            \u003c/div\u003e\n\t\t\t            \u003c/div\u003e\n\t\t\t\t\t\t\u003cdiv class=\"col-md-2 bez_label\" style =\"padding-top: 10px;\"\u003e\n\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\t\t            \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t                \u003cdiv class=\"col-md-5 btn_sfor\" style =\"padding-top: 20px;\"\u003e\n\t\t\t\t                    \u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\n\t\t\u003c/form\u003e\n\t\t\u003cbr\u003e\n\t\t\u003cdiv ng-if=\"data02\" class=\"col-md-9 center\" style=\"text-align: right;\"\u003e\n\t\t\t\u003cspan style='font-weight: bold;' \u003eИтого - \u003c/span\u003e \u003cspan style='font-weight: bold;' \u003e{{total}}\u003c/span\u003e  \n\t\t\u003cbr\u003e\n\t\t\u003c/div\u003e\n\t\t\u003cdiv class=\"row\"\u003e\n\t        \u003cdiv class=\"col-md-12\"\u003e\n\t\t    \u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t    \u003c!--\u003cp\u003e--\u003e\n\t\t\t    \t\u003c!--SAMPLE NOTE:--\u003e\n\t\t\t    \u003c!--\u003c/p\u003e--\u003e\n\t\t    \u003c!--\u003c/div\u003e--\u003e\n\t\t    \u003c!-- Begin: life time stats --\u003e\n\t\t        \u003cdiv class=\"portlet\"\u003e\n\t\t\t        \u003cdiv class=\"portlet-body\"\u003e\n\t\t\t    \t    \u003cdiv class=\"table-container\"\u003e\n\t\t\t\t    \t    \u003cdiv class=\"table-responsive\"\u003e\n\t\t\t\t    \t\t    \u003ctable st-table=\"data02\"  class=\"table table-striped table-bordered\"\u003e\n\t\t\t\t    \t\t\t    \u003cthead\u003e\n    \t\t\t\t\t    \t\t    \u003ctr style=\"background-color:#ddda\" \u003e\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eТип запроса\u003cbr\u003e (откл / подкл скидки)\u003c/th\u003e\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eНомер телефона\u003c/th\u003e\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eДата и время отправки данных в Билайн\u003c/th\u003e\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eФИО инициатора\u003c/th\u003e\n    \t\t\t\t\t\t\t\t        \u003cth class=\"text-center\"\u003eФИО Клиента\u003c/th\u003e\n    \t\t\t\t\t\t\t    \t    \u003cth class=\"text-center\"\u003eИИН Клиента\u003c/th\u003e\n    \t\t\t\t\t\t\t    \t    \u003cth class=\"text-center\"\u003eCумма трат в расчетном периоде\u003c/th\u003e\n                                            \u003cth class=\"text-center\"\u003eТип скидки\u003c/th\u003e\n                                            \u003cth class=\"text-center\"\u003eКатегория номера\u003c/th\u003e\n                                            \u003cth class=\"text-center\"\u003eРезультаты обр запроса Оператором\u003c/th\u003e\n    \t\t\t\t\t\t\t        \u003c/tr\u003e\n\t\t\t\t\t\t\t        \u003c/thead\u003e\n\t\t\t\t\t\t\t        \u003ctbody\u003e\n\t\t\t\t\t\t\t            \u003ctr ng-repeat=\"row in data02 | limitTo:25 | orderBy: 'row.date_time' : true   \" style=\"background-color:{{row._row_color}}\"\u003e\t\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.add_del}}\u003c/div\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.fm_phn_num}}\u003c/div\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.date_time}}\u003c/div\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.user_cd}}\u003c/div\u003e\u003c/td\u003e\n                                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.cust_nm}}\u003c/div\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.bin_or_iin}}\u003c/div\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.trs}}\u003c/div\u003e\u003c/td\u003e\n                                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.dscnt_type}}\u003c/div\u003e\u003c/td\u003e\n                                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.prty}}\u003c/div\u003e\u003c/td\u003e\n                                            \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.stus_msg_desc}}\u003c/div\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t            \u003c/tr\u003e\n\t\t\t\t\t\t\t        \u003c/tbody\u003e\n\t\t\t\t\t\t        \u003c/table\u003e\n\t\t\t\t\t        \u003c/div\u003e\n\t\t\t\t        \u003c/div\u003e\n\t\t\t        \u003c/div\u003e\n\t\t        \u003c/div\u003e\n\t\t        \u003c!-- End: life time stats --\u003e\n\t        \u003c/div\u003e\n        \u003c/div\u003e\n        \n\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" \n\t\t\tng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack,'processCode':'exp_template', input: {entity_id:pageData.entityId,'url':'?code='+table_name+'\u0026amp;d1=' +begin_at+'\u0026amp;d2=' + end_at+'\u0026amp;d3=' +lastpagestr2 } })\"\u003e\n\t\t\t    Выгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\u003c/div\u003e\n\n\u003cdiv class=\"row\"\u003e\n    \u003chr\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn ng-scope\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\u003c/div\u003e\n\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, PubSub, $filter) {\n\n\t\t$scope.searchTitle = \"\";\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n    $scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\t\t\n\t\t$scope.sumAll = function sumAll() {\n\t\t\t$scope.total = 0;\n\t\t\tfor(var arr in $scope.data02){\n\t\t\t    $scope.total = Number(arr) + 1;\n\t\t\t}\n\t\t};\n\n            $scope.save = function save(){\n\n\n\n\t\t\t$scope.action = \"insert\";\n\t\t\t$scope.table_name = \"user_logs\"\n\t\t\t$scope.error_code = \"\"\n\t\t\t$scope.error_text = \"\";\n\t\t\t$scope.detail = {};\n\t\t\t$scope.detail.id = 0;\n\t\t\t$scope.detail.search_param = $scope.searchTitle ;\n\t\t\t$scope.detail.title=\"DSCNT_REPORT\";\n\t\t\t\n\t\t\tMetronic.startPageLoading();\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\n\n\t\t\tDMLService.update( $scope.saveValues ).\n\t\t\t\tsuccess(function (data) {\n\t\t\t\t\tif (data.error!=\"0\") {\n\t\t\t\t\t\t$scope.error_code = data.error_code;\n\t\t\t\t\t\t$scope.error_text = data.error_text;\n\t\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t}\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\t/*uri = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\t\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});*/\n\t\t\t console.log('bin_or_iin',$scope.bin_or_iin );\n\t\t\t if(!$scope.add_del || $scope.add_del ==\"ALL\") {\n            $scope.add_del = \"\";\n            }\n            if(!$scope.dscnt_type  || $scope.dscnt_type ==\"ALL\") {\n            $scope.dscnt_type = \"\";\n            }\n             if(!$scope.stus_msg_desc  || $scope.stus_msg_desc ==\"ALL\") {\n            $scope.stus_msg_desc = \"\";\n            }\n             if(!$scope.fm_phn_num ) {\n            $scope.fm_phn_num = \"\";\n            }\n             if(!$scope.bin_or_iin ) {\n            $scope.bin_or_iin = \"\";\n            }\n             if(!$scope.begin_at ) {\n            $scope.begin_at = \"\";\n            }\n            if(!$scope.end_at) {\n            $scope.end_at = \"\";\n            }\n            \n            console.log('searchTitle',\"query/get?code=discount_report\u0026param1=\" + $scope.add_del + \"\u0026param2=\" + $scope.dscnt_type + \"\u0026param3=\" + $scope.stus_msg_desc\n      + \"\u0026param4=\" + $scope.fm_phn_num + \"\u0026param5=\" + $scope.bin_or_iin  + \"\u0026param6=\" + $scope.begin_at + \"\u0026param7=\" + $scope.end_at);\n      RestApiService.get(\"query/get?code=discount_report\u0026param1=\" + $scope.add_del + \"\u0026param2=\" + $scope.dscnt_type + \"\u0026param3=\" + $scope.stus_msg_desc\n      + \"\u0026param4=\" + $scope.fm_phn_num + \"\u0026param5=\" + $scope.bin_or_iin  + \"\u0026param6=\" + $scope.begin_at + \"\u0026param7=\" + $scope.end_at).\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\t$scope.sumAll();\n\t\t\t\t$scope.save();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\t\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t//$scope.bind();\n\t};\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"по скидкам","updated_at":"2022-01-26 16:11:11","url":"/mfo/crm_report4"},{"code":"crm_report5","created_at":"2021-09-30 16:14:13","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5430","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"40cefb83-2729-48e8-aeda-d140a0c9b02f","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary yellow\" ng-click=\"pubSubPublish('chooseBPMSModal',{\n            callBack: print_bpm_callback, \n            'processCode': 'jubak_test', \n            'input': {'encoding':  89, 'status': 'test stat input'} \n        })\"\u003e\n\t\t\u003ci class=\"fa fa-comments\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003e test bpm\u003c/translate\u003e\n\t\u003c/button\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t\t\n\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\t\t\u003c!-- \n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\n\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t  \u003ca href=\"#/mfo/meiran_test_report\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003ereport page\u003c/a\u003e\n  \t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv id=\"report_hide\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ch1\u003eПо каналам\u003c/h1\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003ctable class=\"table striped\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eКанал\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003e{{textAnalyt[analyt]}}\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in data02\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.title}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row[analyt]}} \u003c/td\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-3\"\u003e\n\n\t\t\t\t\t\t\t\t\t\u003ccanvas id=\"radar\" class=\"chart chart-pie\" chart-data=\"charts02\" chart-labels=\"labels02\"\u003e\u003c/canvas\u003e\n\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003cdiv\u003e\n\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eПроданных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv\u003e\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eАктивных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total2\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\"Поиск пользователя по Email,Названию\" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСсылка в модуль \"Продукт FM\" \u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003cimg ng-if=\"item.avatar_url\" alt=\"\" class=\"img-circle\" style=\"max-height:25px\" src=\"{{item.avatar_url}}\" /\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{item.title}}\n\t\t\t\t\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003ctranslate\u003eProduct FM\u003c/translate\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003ch2\u003eПродукты банка\u003c/h2\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eRole\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in roles\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.role_id}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eНовости по продукту ForteMobile\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cul\u003e\n\t\t\t\u003cli\u003eCoffee\u003c/li\u003e\n\t\t\t\u003cli\u003eTea\u003c/li\u003e\n\t\t\t\u003cli\u003eMilk\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        document.getElementById(\"report_hide\").style.display = 'none';\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t\tRestApiService.get(uri1).\n\t\t\tsuccess(function(data_1) {\n\t\t\t\t$scope.roles = data_1.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=crm_report_inter01_02\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + \"all\").\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"по ошибкам","updated_at":"2021-12-28 10:16:20","url":"/mfo/crm_report5"},{"code":"crm_report6","created_at":"2021-09-30 16:15:48","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5431","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"d0c5863a-2cd3-42e6-b8f5-4d70fcb90752","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary yellow\" ng-click=\"pubSubPublish('chooseBPMSModal',{\n            callBack: print_bpm_callback, \n            'processCode': 'jubak_test', \n            'input': {'encoding':  89, 'status': 'test stat input'} \n        })\"\u003e\n\t\t\u003ci class=\"fa fa-comments\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003e test bpm\u003c/translate\u003e\n\t\u003c/button\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t\t\n\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\t\t\u003c!-- \n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\n\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t  \u003ca href=\"#/mfo/meiran_test_report\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003ereport page\u003c/a\u003e\n  \t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv id=\"report_hide\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ch1\u003eПо каналам\u003c/h1\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003ctable class=\"table striped\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eКанал\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003e{{textAnalyt[analyt]}}\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in data02\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.title}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row[analyt]}} \u003c/td\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-3\"\u003e\n\n\t\t\t\t\t\t\t\t\t\u003ccanvas id=\"radar\" class=\"chart chart-pie\" chart-data=\"charts02\" chart-labels=\"labels02\"\u003e\u003c/canvas\u003e\n\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003cdiv\u003e\n\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eПроданных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv\u003e\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eАктивных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total2\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\"Поиск пользователя по Email,Названию\" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСсылка в модуль \"Продукт FM\" \u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003cimg ng-if=\"item.avatar_url\" alt=\"\" class=\"img-circle\" style=\"max-height:25px\" src=\"{{item.avatar_url}}\" /\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{item.title}}\n\t\t\t\t\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003ctranslate\u003eProduct FM\u003c/translate\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003ch2\u003eПродукты банка\u003c/h2\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eRole\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in roles\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.role_id}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eНовости по продукту ForteMobile\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cul\u003e\n\t\t\t\u003cli\u003eCoffee\u003c/li\u003e\n\t\t\t\u003cli\u003eTea\u003c/li\u003e\n\t\t\t\u003cli\u003eMilk\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        document.getElementById(\"report_hide\").style.display = 'none';\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t\tRestApiService.get(uri1).\n\t\t\tsuccess(function(data_1) {\n\t\t\t\t$scope.roles = data_1.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=crm_report_inter01_02\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + \"all\").\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"по пользователям CRM","updated_at":"2021-12-28 10:17:28","url":"/mfo/crm_report6"},{"code":"crm_report7","created_at":"2021-09-30 16:17:49","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5434","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"c53094a2-979a-4bda-b33c-381f51cbf09c","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary yellow\" ng-click=\"pubSubPublish('chooseBPMSModal',{\n            callBack: print_bpm_callback, \n            'processCode': 'jubak_test', \n            'input': {'encoding':  89, 'status': 'test stat input'} \n        })\"\u003e\n\t\t\u003ci class=\"fa fa-comments\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003e test bpm\u003c/translate\u003e\n\t\u003c/button\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t\t\n\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\t\t\u003c!-- \n\u003cdiv class=\"row well\"\u003e\n    \u003cng-include src=\"'/restapi/widget/simpletable-universal-filter'\" \u003e\n    \u003c/ng-include\u003e\n\u003c/div\u003e\n--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\n\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-4 box\"\u003e\n\t\t\t\t\t\t\t\t  \u003ca href=\"#/mfo/meiran_test_report\" type=\"button\" class=\"btn btn-fit-height btn-primary\" translate\u003ereport page\u003c/a\u003e\n  \t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv id=\"report_hide\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ch1\u003eПо каналам\u003c/h1\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\u003ctable class=\"table striped\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eКанал\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003e{{textAnalyt[analyt]}}\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"row in data02\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row.title}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{row[analyt]}} \u003c/td\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-3\"\u003e\n\n\t\t\t\t\t\t\t\t\t\u003ccanvas id=\"radar\" class=\"chart chart-pie\" chart-data=\"charts02\" chart-labels=\"labels02\"\u003e\u003c/canvas\u003e\n\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003cdiv\u003e\n\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eПроданных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv\u003e\n\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\u003cdiv class=\"col-md-6\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cp\u003eАктивных номеров\u003c/p\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv class=\"col-md-4\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total2\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\u003c/div\u003e\n\n\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\"Поиск пользователя по Email,Названию\" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСсылка в модуль \"Продукт FM\" \u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003cimg ng-if=\"item.avatar_url\" alt=\"\" class=\"img-circle\" style=\"max-height:25px\" src=\"{{item.avatar_url}}\" /\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t{{item.title}}\n\t\t\t\t\t\t\t\t\t\t\t\t\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\u003ctranslate\u003eProduct FM\u003c/translate\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\t\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\t\t\u003ch2\u003eПродукты банка\u003c/h2\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n\t\t\t\t\u003c!--\u003cp\u003e--\u003e\n\t\t\t\t\u003c!--NOTE SAMPLE:.--\u003e\n\t\t\t\t\u003c!--\u003c/p\u003e--\u003e\n\t\t\t\t\u003c!--\u003c/div\u003e--\u003e\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eRole\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in roles\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.role_id}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eНовости по продукту ForteMobile\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cul\u003e\n\t\t\t\u003cli\u003eCoffee\u003c/li\u003e\n\t\t\t\u003cli\u003eTea\u003c/li\u003e\n\t\t\t\u003cli\u003eMilk\u003c/li\u003e\n\t\t\u003c/ul\u003e\n\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        document.getElementById(\"report_hide\").style.display = 'none';\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t\tRestApiService.get(uri1).\n\t\t\tsuccess(function(data_1) {\n\t\t\t\t$scope.roles = data_1.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=crm_report_inter01_02\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + \"all\").\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"по пользователям БП","updated_at":"2021-12-28 10:17:54","url":"/mfo/crm_report7"},{"code":"crm_report8","created_at":"2021-09-30 16:21:47","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5436","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"e7671052-9b60-4131-8d8c-d7ef658d73f3","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n.dotted1 {\n    border-style: dotted;\n    border-top: 0px;\n    border-bottom: 0px;\n    border-left: 0px;\n    border-right-color: #333333;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\n\t\u003chr\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\n\t\u003cdiv class=\"col-md-3 border dotted1\" \u003e\n\t\t\u003ch4\u003e\u003cb\u003eОтчет по операциям клиента\u003c/b\u003e\u003c/h4\u003e\n    \u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\n\n\t\u003c/div\u003e\n\t\n\t\n\t\n\t\u003cdiv class=\"col-md-3\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eОтчет по контрагентам\u003c/b\u003e\u003c/h4\u003e\n        \u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\n\t\u003cdiv class=\"col-md-3\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eОтчет по подкл/откл скидкам\u003c/b\u003e\u003c/h4\u003e\n        \u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\n\t\u003cdiv class=\"col-md-3\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eОтчет по ошибкам\u003c/b\u003e\u003c/h4\u003e\n\t    \u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" ng-change=\"search(searchTitle)\" ng-model=\"searchTitle\" /\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e \u003cbr\u003e \u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИмя пользователя\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.title}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДолжность\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.jobtitle}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eEmail\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.email}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата создания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.created_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата изменения\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.updated_at}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузка отчета в pdf/excel\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-12 center\"\u003e\n\t\t\t\t\t\t\t\t\t\t    \u003ca class=\"btn btn-primary kBSCXr\" href=\"https://www.stats.govt.nz/assets/Uploads/Business-financial-data/Business-financial-data-June-2021-quarter/Download-data/business-financial-data-june-2021-quarter-csv.zip\" download=\"proposed_file_name\"\u003eDownload\u003c/a\u003e\n\t\t\t\t\t\t\t\t\t\u003cbutton  class=\"btn btn-primary kBSCXr\" ng-click=\"save('NAME.html','CODE')\"\u003eВыгрузка test\u003c/button\u003e\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\turi1 = \"query/get?code=meiran_sql_users1\u0026param1=\" + 20191;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t\tRestApiService.get(uri1).\n\t\t\tsuccess(function(data_1) {\n\t\t\t\t$scope.roles = data_1.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=meiran_sql_users_total1').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=crm_report_inter01_02\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at + \"\u0026param3=\" + \"all\").\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"по контрагентам","updated_at":"2021-12-28 10:14:57","url":"/mfo/crm_report8"},{"code":"one_crm_sales_main_page","created_at":"2021-09-30 16:24:11","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5437","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"ffb188bb-ac92-47ec-80a3-c4aed1aeca5e","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n  \u003cdiv class=\"page-bar\"\u003e\n  \t\u003cul class=\"page-breadcrumb\"\u003e\n  \t\t\u003cli\u003e\n  \t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n  \t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n  \t\t\t\u003ctranslate\u003eПродажи УРП/ЦБО/ УРЗП\u003c/translate\u003e\n  \t\t\u003c/li\u003e\n  \t\u003c/ul\u003e\n  \t\u003cdiv class=\"page-toolbar\"\u003e\n  \t    \u003cdiv class=\"btn-group pull-right\"\u003e\n  \t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n  \t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n  \t\u003c/a\u003e\n  \t\u003c/div\u003e\n  \t\n  \u003c/div\u003e\n  \u003c/div\u003e\t\t\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n    \u003cdiv class=\"col-md-6\"\u003e\n    \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n      \u003cdiv class=\"col-md-4\"\u003e\n        \u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-4\"\u003e\n        \u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-4 box\"\u003e\n        \u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003c/div\u003e \n    \u003cdiv class=\"col-md-12\"\u003e \n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\n      \n      \u003cdiv class=\"col-md-6\"\u003e\n    \u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n      \u003c!--\u003cp\u003e--\u003e\n        \u003c!--SAMPLE NOTE:--\u003e\n      \u003c!--\u003c/p\u003e--\u003e\n    \u003c!--\u003c/div\u003e--\u003e\n    \u003c!-- Begin: life time stats --\u003e\n    \u003cbr\u003e\u003cbr\u003e\n        \u003cdiv class=\"portlet\"\u003e\n          \u003cdiv class=\"portlet-body\"\u003e\n            \u003cdiv class=\"table-container\"\u003e\n              \u003cdiv class=\"table-responsive\"\u003e\n                \u003ctable st-table=\"items\"  class=\"table table-striped table-bordered\"\u003e\n                  \u003cthead\u003e\n                      \u003ctr style=\"background-color:#ddda\" \u003e\n                        \u003cth class=\"text-center\"\u003eФИО продавца\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003eколичество проданных номеров\u003c/th\u003e\n                      \u003c/tr\u003e\n                  \u003c/thead\u003e\n                  \u003ctbody\u003e\n                       \u003ctr style=\"background-color:{{row._row_color}}\"\u003e\n                           \u003ctd\u003e\u003cdiv class=\"text-left\"\u003e\u003cb\u003eИтого\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                            \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e\u003cb\u003e{{getTotal('cnt')}}\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                        \u003c/tr\u003e\n                      \u003ctr ng-repeat=\"row in data03 | limitTo:25\" style=\"background-color:{{row._row_color}}\"\u003e\t\t\t\t\t\t    \n                        \u003ctd\u003e\u003cdiv class=\"text-left\"\u003e{{row.title}}\u003c/div\u003e\u003c/td\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e{{row.cnt}}\u003c/div\u003e\u003c/td\u003e\n                      \u003c/tr\u003e\n                  \u003c/tbody\u003e\n                  \n                    \u003ctfoot\u003e\n          \u003ctr\u003e\n            \u003ctd colspan=\"50\" class=\"text-center\"\u003e\n              \u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n            \u003c/td\u003e\n          \u003c/tr\u003e\n          \u003c/tfoot\u003e\n                \u003c/table\u003e\n              \u003c/div\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- End: life time stats --\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-6\"\u003e\n\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\n                   \u003c!--  \u003cdiv class=\"col-md-6\"\u003e\n                   \n                    \u003ch3\u003eПродажи филиала\u003c/h3\u003e\n                    \u003ctable class=\"table striped\"\u003e\n                        \u003ctr\u003e\n                            \u003cth\u003eКанал\u003c/th\u003e\n                            \u003cth\u003e{{textAnalyt[analyt]}}\u003c/th\u003e\n                            \n                        \u003c/tr\u003e                      \n                        \n                        \u003ctr ng-repeat=\"row in data02\"\u003e\n                            \u003ctd\u003e{{row.title}} \u003c/td\u003e\n                            \u003ctd\u003e{{row[analyt]}} \u003c/td\u003e\n                       \n                        \u003c/tr\u003e\n                    \u003c/table\u003e    \n                \u003c/div\u003e\n                --\u003e\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-6\" \u003e\n\n\t\t\t\t\t\t\t\t\t\u003ccanvas id=\"radar\" class=\"chart chart-pie\" chart-data=\"charts02\" chart-labels=\"labels02\"\u003e\u003c/canvas\u003e\n\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\n                \n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n      \u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003cdiv class=\"col-md-6\"\u003e\n\t                \n\t                    \u003ccanvas id=\"radar\" class=\"chart chart-bar\" chart-data=\"charts01\" chart-labels=\"labels01\"\u003e\u003c/canvas\u003e\n\t                \n                \u003c/div\u003e\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\t\tconsole.log(\"test1\");\n\t\tconsole.log($scope);\n\t\tconsole.log(\"test2\");\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=report2_sales_graph1_crm_fm\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at).\n    \t\t\tsuccess(function(data) {\n    \t\t\t\t$scope.data02 = data.items;\n    \t\t\t\tok++;\n    \n    \t\t\t\t$scope.labels02 = [];\n    \t\t\t\t$scope.charts02 = [];\n    \n    \t\t\t\tif ($scope.data02) {\n    \t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n    \t\t\t\t\t\t$scope.labels02.push(item.title);\n    \t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n    \t\t\t\t\t});\n    \t\t\t\t}\n    \n    \n    \t\t\t\tif (ok == 2) {\n    \t\t\t\t\tMetronic.stopPageLoading();\n    \t\t\t\t}\n    \t\t\t});\n\t\t\tRestApiService.get(\"query/get?code=report2_sales_graph5_crm_fm\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.begin_at+ \"\u0026param3=\" + $scope.begin_at+ \"\u0026param4=\" + $scope.begin_at+ \"\u0026param5=\" + $scope.begin_at+ \"\u0026param6=\" + $scope.begin_at+ \"\u0026param7=\" + $scope.begin_at).\n    \t\t success(function (data) {\n                        $scope.data01 = data.items;\n                        ok ++;\n                        \n                        $scope.labels01 = [];\n                        $scope.charts01 = [];\n                        if ($scope.data01){\n                        $scope.data01.forEach(function(item, i, arr) {\n                            $scope.labels01.push(item.title);\n                            $scope.charts01.push(item[$scope.analyt]*1);\n                        }); \n                        }\n                        \n                        \n                        if (ok == 2 ){\n                         Metronic.stopPageLoading();   \n                        }                        \n                });\n      RestApiService.get(\"query/get?code=report2_sales_graph2_crm_fm\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at).\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data03 = data.items;\n\t\t\t\t$scope.getTotal = function(type) {\n                    var total = 0;\n                    angular.forEach($scope.data03, function(el) {\n                        total += parseInt(el[type],10);\n                    });\n                 return total;\n            };\n\t\t\t});\t\n\t\t\t\n\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Продажи","updated_at":"2021-12-29 12:20:04","url":"/mfo/one_crm_sales_main_page"},{"code":"fm_main_page","created_at":"2021-10-18 15:15:46","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","filter_set_id":"2700","filter_sets$code":"meiran_test","id":"5443","is_auto":"0","is_cache":"0","module$code":"mfo","module_id":"39","page_type$code":"list","page_type_id":"1","query$code":"ora_detail","query_id":"7070","sys$uuid":"19b04854-1c97-427a-bf99-b5f6380df65d","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n.news_table a{\n    color:black;\n}\n\n.news_table {\n    border: 1.1px solid #2D5F8B;\n    margin-bottom: 0px;\n}\n\n.news_table tr:first-child {\n    border-top: none;\n}\n.news_table tr {\n    border-top: 2px solid #2D5F8B;\n}\n\n.main_table {\n    border:none;\n    border-collapse: collapse;\n}\n\n.main_table td, .main_table  th {\n    border-left: 1px solid #000;\n    border-right: 1px solid #000;\n}\n\n.main_table th {\n    width: 60%;\n}\n.main_table td {\n    width: 40%;\n}\n.all_news label{\n    margin-right: 15px;\n}\n\n.main_table th:first-child {\n    border-left: none;\n}\n\n.main_table td:last-child {\n    border-right: none;\n}\n\n.main_table tr:last-child td, .main_table tr:last-child th {\n    border-bottom: none;\n}\n\n.main_table tr:first-child td, .main_table tr:first-child th {\n    border-top: none;\n}\n\n\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" \nng-init=\"init({pageData:$state.current.data,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\nng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-8\"\u003e\n\t\t\u003cdiv\u003e\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t    \u003c!--\u003cbutton class=\"btn btn-primary\" style =\"background-color: rgb(150 20 82);\"\n\tng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack,'processCode':'exp_template', input: {entity_id:pageData.entityId,'url':'?code='+table_name+'\u0026amp;ids=' +idForExport  } })\"\n    \u003e\n        \u003ctranslate\u003eExport\u003c/translate\u003e\n\u003c/button\u003e--\u003e\n\u003c/div\u003e\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT   --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \" \n\t\t\t\t\t\t\t\t\t\t ng-model=\"searchTitle\" /\u003e\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e\n                                            \u003cbutton class=\"btn btn-primary kBSCXr\"\n                                            ng-click=\"search(searchTitle)\"\u003e\n                                            Поиск\n                                            \u003c/button\u003e\n                                        \u003c/div\u003e\n                                        \u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class = \"row\" ng-if=\"checkEmptiness \u003c 1 \"\u003e \n        \n        \u003cdiv class=\"alert alert-info col-md-9\" role=\"alert\"\u003e\n            По данному запросу отсутствуют данные в базе клиентов ForteMobile\n        \u003c/div\u003e\n        \u003c/div\u003e\t\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered main_table\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item2 in items_2\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eФИО клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item2.cust_nm}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item2 in items_2\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИИН клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item2.bin_or_iin}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item2 in items_2\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eМобильный номер клиента(ForteMobile)\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cselect id=\"cl_phn_num\" ng-click=\"refreshPageInfoFromPhn()\"\n\t\t\t\t\t\t\t\t\t\t\t\tng-model=\"myColor\" \n\t\t\t\t\t\t\t\t\t\t\t\tng-options=\"item_c.fmb_ph_num for item_c in items_cc | orderBy: 'prty' \"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t     \u003c/select\u003e  \n\t\t\t\t\t\t\t\t\t\t\t\t   \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eКатегория номера\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.prty}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата продажи номера\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.sell_date}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата активации номера\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.active_date}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eНаименование тарифа\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.tarif_name}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eНаличие активной карты\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e {{item.active_card}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eГород(филиал), где обслуживается клиент\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.sale_city}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eПодключение к МИБ\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.mib_yn}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата предыдущего списания абон.платы\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.lst_pp_charge_dt}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСтатус предоставления скидки в пред.расчетном периоде\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.dscnt}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата следующего списания абон.платы\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.next_pp_charge_dt}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСтатус предоставления скидки в следующем расчетном периоде\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.next_yn}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата начала РП\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.calc_bgin}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата окончания РП\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.calc_end}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСумма трат в KZT на тек. дату (операции проведенные по картам клиента до 05:00 утра тек. дня)\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003cspan style='font-weight: bold;' \u003e{{item.trs}}\u003c/span\u003e \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c!--\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eОбращения клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003ca ng-click=\"parentCallBack($parent,item)\"\u003e \u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003eID обращения статус\u003c/a\u003e\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e--\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003cdiv id=\"forClientReport\"\u003e\n\t\t\u003cdiv class=\"row\"\u003e\n\t\t    \u003cdiv class=\"col-md-12\"\u003e\n\t\t        \u003cb style = \"font-size: 17px;\"\u003eФормирование отчета по операциям клиента \u003c/b\u003e\n\t\t    \u003c/div\u003e    \n\t\t\u003c/div\u003e\n\t\t\u003cdiv class=\"row\"\u003e\n\t\t    \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\" \u003e\n\t\t\t\t\n\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\u003cbu-date label=\"Дата начала\" id-model=\"begin_at\" ng-click=\"changeDateBeg(begin_at)\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\t\t\t\u003cbu-date label=\"Дата окончания\" id-model=\"end_at\" ng-click=\"changeDateEnd(end_at)\"\u003e\u003c/bu-date\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003cdiv class=\"col-md-4 btn_sfor\"\u003e\n\t\t\t\t\t\u003ca href=\"#/mfo/crm_report1/?{{lastpagestr2}}\" class=\"btn btn-primary kBSCXr\"\u003eПрименить\u003c/a\u003e\n\t\t\t\t\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\u003cbr\u003e\n\t\t\u003cdiv class=\"row\"\u003e\n\t\t    \u003c!--\n\t\t\u003cdiv\u003e\n\t\t\t\u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cb\u003e\u003cp\u003eПроданных номеров\u003c/p\u003e\u003c/b\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\t\u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total1\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\n\t\t\u003c/div\u003e\n\t\t --\u003e\n\n\n\t\t\u003cdiv\u003e\n\t\t\t\u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cb\u003e\u003cp\u003eАктивных номеров\u003c/p\u003e\u003c/b\u003e\n\t\t\t\u003c/div\u003e\n\t\t\t\u003cdiv class=\"col-md-3\" ng-show=\"1==1\"\u003e\n\t\t\t\t\u003cinput placeholder=\"Свободная переменная\" class=\"form-control form-control-1\" ng-model=\"total2\" /\u003e\n\t\t\t\u003c/div\u003e\n\n\t\t\u003c/div\u003e\n\n\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eНовости по продукту ForteMobile\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003ctable class=\"table table-bordered news_table\" style=\"left: auto; !important\"\u003e\n\t\t\t\t\u003ctr ng-repeat=\"news_item in news_items  | limitTo:1  | orderBy: 'news_date' : true    \"\u003e\n\t\t\t    \n\t\t\t    \t\u003ctd \u003e\n\t\t\t    \t    \u003ca href=\"#/mfo/news_more/?id={{news_item.id}}\"\u003e\u003clabel class=\"col-md-12 text-center\" \u003e\n\t\t\t    \t   \u003cb\u003e {{news_item.news_title.trunc(200)}}\u003c/b\u003e\u003c/label\u003e\n\t\t\t    \t    \u003cp\u003e{{news_item.news_text.trunc(800)}}\u003c/p\u003e\n                \n                \u003c/a\u003e\n               \n                \u003c/td\u003e\n\t\t\t\t\u003c/tr\u003e\n\t\t\u003c/table\u003e\n        \u003cdiv class=\"row all_news\" style=\"text-align: right;\"\u003e\n\t\t    \u003ca href=\"#/mfo/all_news\"\u003e\u003clabel\u003e\n\t\t\t    \t    Архив новостей\u003c/label\u003e\n                \u003c/a\u003e\n\t\t\u003c/div\u003e    \n\t\t    \n        \n        \u003ch4\u003e\u003cb\u003eС условиями продукта ForteMobile вы можете ознакомиться на вн. портале СервисГид\u003c/b\u003e \u003c/h4\u003e\n        \u003cbr\u003e\n        \u003ch4\u003e\u003cb\u003eСотрудники НДиРЭ:\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cul  style=\"left: auto; !important\"\u003e\n            \u003cli\u003eБерик\u0026nbsp;\u0026nbsp;Мухамеджанов  \u003ca href=\"mailto:bmukhamejanov@fortebank.com\" style = \"color : black;\"\u003ebmukhamejanov@fortebank.com\u003c/a\u003e\n            \u003c/li\u003e \n            \u003cli\u003eМейрлан\u0026nbsp;\u0026nbsp;Енсегенов  \u003ca href=\"mailto:myensegenov@fortebank.com\" style = \"color : black;\"\u003emyensegenov@fortebank.com\u003c/a\u003e\n            \u003c/li\u003e \n            \u003cli\u003eБауыржан\u0026nbsp;\u0026nbsp;Аубакиров  \u003ca href=\"mailto:baaubakirov@fortebank.com\" style = \"color : black;\"\u003ebaaubakirov@fortebank.com\u003c/a\u003e\n            \u003c/li\u003e \n            \u003cli\u003eАйзере\u0026nbsp;\u0026nbsp;Сапарова  \u003ca href=\"mailto:azsaparova@fortebank.com\" style = \"color : black;\"\u003eazsaparova@fortebank.com\u003c/a\u003e\n            \u003c/li\u003e \n            \u003cli\u003eРаушан\u0026nbsp;\u0026nbsp;Буркитбаева  \u003ca href=\"mailto:rburkitbayeva@fortebank.com\" style = \"color : black;\"\u003erburkitbayeva@fortebank.com\u003c/a\u003e\n            \u003c/li\u003e \n            \u003cli\u003eНазерке\u0026nbsp;\u0026nbsp;Шуиншина  \u003ca href=\"mailto:ngshuinshina@fortebank.com\" style = \"color : black;\"\u003engshuinshina@fortebank.com\u003c/a\u003e\n            \u003c/li\u003e \n            \u003cli\u003eДмитрий\u0026nbsp;\u0026nbsp;Смусев\u0026nbsp;\u0026nbsp;(Директор)  \u003ca href=\"mailto:dsmussev@fortebank.com\" style = \"color : black;\"\u003edsmussev@fortebank.com\u003c/a\u003e\n            \u003c/li\u003e \n        \u003c/ul\u003e\n\t\u003c/div\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"row\"\u003e\n\t\u003chr\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\t\u003chr\u003e\n\t\u003c/div\u003e\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        //$scope.searchTitle = \"\";\n        $scope.idForExport = 1;\n        document.getElementById(\"forClientReport\").style.display = 'none';\n        \n        $scope.init = function(opt){\n        $scope.opt = opt;\n        //console.log('opt.pageData',opt.pageData );\n\n        $scope.pageCode = opt.pageCode;\n        $scope.pageData = opt.pageData;\n        $scope.pageId = opt.pageId;\n        if (opt.pageData){\n            $scope.entityId = opt.pageData.entityId;\n            $scope.table_name = opt.pageData.entityCode;\n            $scope.query_code = opt.pageData.pageQueryCode;\n        }\n        $scope.exportXMLFields = opt.exportXMLFields;\n        //alert('test');\n        //alert($location.search().page);\n        if (opt.currentPage){\n            $scope.currentPage = opt.currentPage;\n        }\n\n        $scope.perPage = opt.perPage;\n\n\n\n\n        $scope.selectRecordsState =  (opt.selectRecordsState) ? opt.selectRecordsState : true;\n        if (opt.filter) {\n            $scope.filter = opt.filter;\n        }\n\n\n\n\n    }\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t\n\t\tvar i;\n        \n        /*for(i=0;i\u003cdivs.length;i++) {\n          if(divs[i].className == 'myclass') {\n            divs[i].innerHTML = divs[i].innerHTML.substring(0,300);\n          }\n        }*/\n        \n\t\t$scope.changeDateBeg = function(params1) {\n\n\t\t\t$scope.begin_at = params1;\n\t\t\t$scope.lastpagestr2 = \"id=\"+$scope.idForExport+\"\u0026beg=\"+$scope.begin_at+\"\u0026end=\"+$scope.end_at;\n\n\t\t}\n\t\t\n\t\t$scope.changeDateEnd = function(params) {\n\n\t\t\t$scope.end_at = params;\n\t\t\t$scope.lastpagestr2 = \"id=\"+$scope.idForExport+\"\u0026beg=\"+$scope.begin_at+\"\u0026end=\"+$scope.end_at;\n\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\t\t\t//console.log('idForExport',$scope.idForExport );\n\t\t\t//console.log('searchTitle',$scope.searchTitle );\n\n\t\t\t$scope.bind();\n\n\t\t}\n        \n        $scope.bindCallBack = function(params) {\n        $scope.bind();\n        }\n        \n        $scope.printCallBack = function(params) {\n        if (params.vars \u0026\u0026 params.vars.file_url) {\n            location.href = params.vars.file_url;\n        }\n        }\n        \n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\t\t\n\t\t$scope.getIdForExport = function(){\n        var idValues = [];\n        idValues.push($scope.idForExport * 1);\n        //console.log('cr id', idValues.join(\",\"));\n        return idValues.join(\",\");\n\n        }\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\t\t\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t//$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\t//console.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tconsole.log($scope.begin_at);\n\t\t\tconsole.log($scope.end_at);\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t\n\t\t$scope.showBottomNumbers = function showBottomNumbers() {\n\t\t\n\t\t\n\t\t    RestApiService.get('query/get?code=total_fn_number').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\t\t\tRestApiService.get('query/get?code=active_fn_number').\n\t\t\tsuccess(function(data_total1) {\n\t\t\t\t$scope.total2 = data_total1.items[0].total;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t}\n\t\t\n\t\t\n\t\t$scope.clientInfoFromPhn = function clientInfoFromPhn() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=main_page_phn_info\u0026param1=\" + $scope.phnNum ;\n\t\t\tconsole.log('$scope.phnNum', $scope.phnNum);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items = data.items;\n\t\t\t\tconsole.log('$scope.items', $scope.items);\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.refreshPageInfoFromPhn = function refreshPageInfoFromPhn() {\n\t\t    \n\t\t    var qew1 = document.getElementById(\"cl_phn_num\").options;\n\t\t    $scope.currPhn = qew1[qew1.selectedIndex].label;\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=main_page_phn_info\u0026param1=\" + $scope.currPhn ;\n\t\t\tconsole.log('qew1', qew1);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items = data.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\t\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.phnList = function phnList() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=phnList\u0026param1=\" + $scope.idForExport + \"\u0026param2=\" + $scope.idPhnNum + \"\u0026param3=\" + $scope.idPhnNum ;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_cc = data.items;\n\t\t\t\t//console.log('items_cc',$scope.items_cc );\n\t\t\t\tfor(var arr in $scope.items_cc){\n\t\t\t    if ($scope.items_cc[arr].prty =='1') { \n\t\t\t      $scope.myColor = $scope.items_cc[arr];\n\t\t\t      $scope.phnNum = $scope.items_cc[arr].fmb_ph_num;\n\t\t\t    }\n\t\t\t    }\n\t\t\t    if(!$scope.myColor ){\n\t\t\t      $scope.myColor = $scope.items_cc[0];\n\t\t\t      $scope.phnNum = $scope.items_cc[0].fmb_ph_num;\n\t\t\t    }\n\t\t\t\t\n                //console.log('testy id', $scope.items_opt);\n                \n                $scope.clientInfoFromPhn();\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\t\n\t\t\t});\n\t\t};\n\n\t\t/**\n * extends string prototype object to get a string with a number of characters from a string.\n *\n * @type {Function|*}\n */\n\t\tString.prototype.trunc = String.prototype.trunc ||\n        function(n){\n        \n            // this will return a substring and \n            // if its larger than 'n' then truncate and append '...' to the string and return it.\n            // if its less than 'n' then return the 'string'\n            return this.length\u003en ? this.substr(0,n-1)+'...' : this.toString();\n        };\n        \n        \n\t\t$scope.save = function save(){\n\n\n\n\t\t\t$scope.action = \"insert\";\n\t\t\t$scope.table_name = \"user_logs\"\n\t\t\t$scope.error_code = \"\"\n\t\t\t$scope.error_text = \"\";\n\t\t\t$scope.detail = {};\n\t\t\t$scope.detail.id = 0;\n\t\t\t$scope.detail.search_param = $scope.searchTitle ;\n\t\t\t$scope.detail.title=\"MAIN_PG\";\n\t\t\t\n\t\t\tMetronic.startPageLoading();\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\n\n\t\t\tDMLService.update( $scope.saveValues ).\n\t\t\t\tsuccess(function (data) {\n\t\t\t\t\tif (data.error!=\"0\") {\n\t\t\t\t\t\t$scope.error_code = data.error_code;\n\t\t\t\t\t\t$scope.error_text = data.error_text;\n\t\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t}\n        \n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=main_page_client\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\t\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\t\t\t\t$scope.table_name=\"ora_detail\";\n\n\t\t\t\t$scope.items_2 = data.items;\n\t\t\t\tif($scope.items_2){\n\t\t\t\t    $scope.checkEmptiness = 1;\n\t\t\t\t    $scope.idForExport = $scope.items_2[0].bin_or_iin;\n\t\t\t\t$scope.idPhnNum = $scope.items_2[0].fmb_ph_num;\n\t\t\t\t$scope.phnList();\n\t\t\t\t}else{\n\t\t\t\t    $scope.checkEmptiness = 0;\n\t\t\t\t}\n\t\t\t\t$scope.save();\n\t\t\t\t\n\t\t\t\t//console.log('idForExport',$scope.idForExport );\n\t\t\t\t//console.log('idPhnNum',$scope.idPhnNum );\n\t\t\t\t\n\t\t\t\t$scope.lastpagestr2 = \"id=\"+$scope.idForExport+\"\u0026beg=\"+$scope.begin_at+\"\u0026end=\"+$scope.end_at;\n\t\t\t\t//console.log('lastpagestr2',$scope.lastpagestr2 );\n\t\t\t\t//console.log('idForExport',$scope.idForExport );\n\t\t\t\tdocument.getElementById(\"forClientReport\").style.display = 'block';\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t\t\n\n\t\t}\n\t\t\n\t\t$scope.lastNews = function lastNews() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi_news = \"query/get?code=fortemobile_news_main_page\";\n\t\t\t\n\t\t\tRestApiService.get(uri_news).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.news_items = data.items;\n\t\t\t\t//var divs = document.getElementById('#news_bloc');\n                //console.log('divs',divs );\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\n\t\t}\n\t\t\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.showBottomNumbers();\n\t\t$scope.lastNews();\n\t\t$scope.setListOwnerFilter('all');\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Главная","updated_at":"2022-01-24 11:08:10","url":"/mfo/fm_main_page"},{"code":"fm_client","created_at":"2021-10-28 10:47:11","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5452","is_auto":"0","is_cache":"0","module$code":"mfo","module_id":"39","page_type$code":"list","page_type_id":"1","sys$uuid":"537be368-7699-450c-92f9-a6c8de1c6238","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n.main_table {\n    border:none;\n    border-collapse: collapse;\n}\n\n.main_table td, .main_table  th {\n    border-left: 1px solid #000;\n    border-right: 1px solid #000;\n}\n\n.main_table th:first-child {\n    border-left: none;\n}\n\n.slec label{\n    display: none;\n}\n\n.main_table td:last-child {\n    border-right: none;\n}\n\n.main_table tr:last-child td, .main_table tr:last-child th {\n    border-bottom: none;\n}\n\n.main_table tr:first-child td, .main_table tr:first-child th {\n    border-top: none;\n}\n\n\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" \nng-init=\"init({pageData:$state.current.data,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\nng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-8\"\u003e\n\t\t\u003cdiv\u003e\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t    \u003c!--\u003cbutton class=\"btn btn-primary\" style =\"background-color: rgb(150 20 82);\"\n\tng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack,'processCode':'exp_template', input: {entity_id:pageData.entityId,'url':'?code='+table_name+'\u0026amp;ids=' +idForExport  } })\"\n    \u003e\n        \u003ctranslate\u003eExport\u003c/translate\u003e\n\u003c/button\u003e--\u003e\n\u003c/div\u003e\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \"  ng-model=\"searchTitle\" /\u003e\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e\n                                            \u003cbutton class=\"btn btn-primary kBSCXr\"  ng-click=\"search(searchTitle)\"\u003e\n                                            Поиск\n                                            \u003c/button\u003e\n                                        \u003c/div\u003e\n                                        \u003c/div\u003e\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cdiv class = \"row\" ng-if=\"checkEmptiness \u003c 1 \"\u003e \n        \n        \u003cdiv class=\"alert alert-info col-md-9\" role=\"alert\"\u003e\n            По данному запросу отсутствуют данные в базе клиентов ForteMobile\n        \u003c/div\u003e\n        \u003c/div\u003e\n\t\t\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered main_table\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИИН клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.bin_or_iin}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eНомера телефонов ForteMobile\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cselect id=\"cl_phn_num\" \n\t\t\t\t\t\t\t\t\t\t\t\tng-model=\"myColor4\" \n\t\t\t\t\t\t\t\t\t\t\t\tng-options=\"item_c.fmb_ph_num for item_c in items_cc | orderBy: 'prty' \"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t     \u003c/select\u003e  \n\t\t\t\t\t\t\t\t\t\t\t\t   \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eФИО клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.cust_nm}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСегмент клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.cust_segm_nm}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСотрудник Банка(Да/Нет)\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.is_emp_yn}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата привлечение клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.cust_attr_date}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eНомер документа\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.doc_num}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eЗарплатный клиент\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.sl_nm}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eГород(филиал), где обслуживается клиент\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.sale_city}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eМаск номер платежной карты\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cselect id=\"cards_ora\" ng-click=\"refreshCardInfoFromMask()\" ng-model=\"myColor\" ng-options=\"item_o.card_msk_num for item_o in items_opt\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t     \u003c/select\u003e  \n\t\t\t\t\t\t\t\t\t\t\t\t   \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_acc in items_acc_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eIBAN счет пластиковой карты\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_acc.at20num}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eВалюта счета\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cselect id=\"cur_ora\" ng-click=\"refreshCardInfoFromCur()\" ng-model=\"myCur\" ng-options=\"item_c.curcd for item_c in items_cur\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t     \u003c/select\u003e  \n\t\t\t\t\t\t\t\t\t\t\t\t   \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eТип продукта\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.prod_typ_cd}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата открытия\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.open_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата закрытия\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.close_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eНаименование продукта платежной карты\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.prod_typ_nm}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eФилиал обслуживания\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.sale_city}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата и время посл. сессии в МИБ\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.last_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСтатус МИБ\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.mb_stus_cd}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item_oi in items_opt_info\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСтатус карты\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item_oi.stus_nm}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eПризнак блокировки карты\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003eнет информации \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\n\t\u003c/div\u003e\n\u003c!--\t\u003cdiv class=\"col-md-4\"\u003e\n\t\t\u003cdiv class=\"row\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eИстория обращений клиента\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cbr\u003e\n\t\t\u003cbr\u003e\n\t\t\u003cbr\u003e\n        \u003c/div\u003e\n        \u003cdiv class=\"row\"\u003e\n\t\t\u003ch4\u003e\u003cb\u003eЖурнал событий\u003c/b\u003e\u003c/h4\u003e\n\t\t\u003cbr\u003e\n\t\t\u003cbr\u003e\n\t\t\u003cbr\u003e\n        \u003c/div\u003e\n\t\u003c/div\u003e --\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"row\"\u003e\n\t\u003chr\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\t\u003cbutton class=\"btn btn-primary\" style =\"background-color: rgb(150 20 82);\"\n\tng-click=\"pubSubPublish('chooseBPMSModal',\n\t{callBack:print_bpm_callback,\n\t'processCode':'create_new_obrachenie',\n\tinput: {iin_or_phn:'Введите ИИН или Тел номер'} })\"\n    \u003e\n        Создание обращения\n\u003c/button\u003e \n\t\u003chr\u003e\n\t\u003c/div\u003e\n\t\u003cdiv class=\"row\"\u003e\n\t\u003chr\u003e\n\t\n\t\n\t\u003chr\u003e\n\t\u003chr\u003e\n\t\u003c/div\u003e\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter,$location) {\n        //$scope.searchTitle = \"\";\n        $scope.idForExport = 1;\n        \n        $scope.init = function(opt){\n        $scope.opt = opt;\n        //console.log('opt.pageData',opt.pageData );  ng-click=\"cardInfoFromMask()\"\n\n        $scope.pageCode = opt.pageCode;\n        $scope.pageData = opt.pageData;\n        $scope.pageId = opt.pageId;\n        if (opt.pageData){\n            $scope.entityId = opt.pageData.entityId;\n            $scope.table_name = opt.pageData.entityCode;\n            $scope.query_code = opt.pageData.pageQueryCode;\n        }\n        $scope.exportXMLFields = opt.exportXMLFields;\n        //alert('test');\n        //alert($location.search().page);\n        if (opt.currentPage){\n            $scope.currentPage = opt.currentPage;\n        }\n        if ($location.search().page)\n        {\n            $scope.currentPage = $location.search().page?$location.search().page*1:1;\n        }\n\n        $scope.perPage = opt.perPage;\n\n\n\n\n        $scope.selectRecordsState =  (opt.selectRecordsState) ? opt.selectRecordsState : true;\n        if (opt.filter) {\n            $scope.filter = opt.filter;\n        }\n\n\n        if (opt.pageData \u0026\u0026 opt.pageData.pageFilterSetId) {\n            $scope.filterSetId =opt.pageData.pageFilterSetId;\n\n\t\t\tvar filterSet = null;\n            var itemCode =\"filter/\"+$rootScope.sessioninfo.id+\"/\"+$scope.filterSetId;\n            var itemSortField = \"sortField/\" + $rootScope.sessioninfo.id + \"/\" + $scope.filterSetId;\n            var itemSortFieldAsc = \"sortFieldAsc/\" + $rootScope.sessioninfo.id + \"/\" + $scope.filterSetId;\n\t\t\tif (!$rootScope.isMobile){\t\n\t\t\t\tvar filterSet = localStorage.getItem(itemCode);\n\t\t\t\t$scope.sortField = localStorage.getItem(itemSortField);\n\t\t\t\t$scope.sortFieldAsc = localStorage.getItem(itemSortFieldAsc) === 'true';\n\t\t\t}\n\n\n            RestApiService.get(\"query/get?code=get_filter_cols_by_id\u0026param1=\" + $scope.filterSetId).\n            success(function (data) {\n                $scope.filterSetCols = data.items;\n            });\n            \n            \n\n            if (!filterSet){\n                //RestApiService.get(\"query/get?code=get_filter_dtls_by_id\u0026param1=\" + $scope.filterSetId).\n\t\t\t\tRestApiService.get(\"services/run/get_filter_dtls_by_id?set_id=\" + $scope.filterSetId).\n\t\t\t\t \n                success(function (data) {\n                    //console.log(data, \"filter\");\n                    $scope.filterSet = data.items;\n\t\t\t\t\t$scope.filterSet.forEach(\n\t\t\t\t\tfunction (filterItem){\n\t\t\t\t\t\tconsole.log('filter',filterItem);\n\t\t\t\t\t\t//filterItem.value = {};\n\t\t\t\t\t\t//filterItem.value.selected_references_mdl=[{id:'1',title_short:'ÐŸÑ€Ð¸Ð¼ÐµÑ€'}];\n\t\t\t\t\t}\n\n\t\t\t\t\t);\n                    $scope.bindWithFilter(false,false);\n                });\n            }else{\n                //$scope.filterSet = JSON.parse(filterSet);\n                $scope.setFilterSetFromString(filterSet);\n                $scope.bindWithFilter(false,true);\n            }\n\n        }else{\n            //$scope.bind();\n        }\n\n\n\n    }\n    \n    $scope.getFreeVar = function() {\n\t   RestApiService.get('query/get?code=mfo_scor_types\u0026ids=' + $scope.scor_type_id).\n\t\t\t\tsuccess(function(data_types) {\n\t\t\t\t\t$scope.value.free_var = data_types.items[0].free_var * 1;\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}); \n\t}\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\t//console.log('printCallBack', params.vars);\n\t\t\tif(params.vars.msg=='false'){\n\t\t\twindow.location = 'http://10.64.1.188:8282/static/#/fm_crm_test/one_crm_abon_reqsdetails/0/?f=' + params.vars.iin_or_phn;\n\t\t\t}\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n        \n        $scope.bindCallBack = function(params) {\n        $scope.bind();\n        }\n        \n        $scope.printCallBack = function(params) {\n        if (params.vars \u0026\u0026 params.vars.file_url) {\n            location.href = params.vars.file_url;\n        }\n        }\n        \n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\t\t\n\t\t//document.getElementById('cards_ora').onclick = function () {\n        //var qew1 = qew.options[0];\n        //    console.log('tt id', qew1); \n        //}\n\t\t\n\t\t$scope.getIdForExport = function(){\n        var idValues = [];\n        idValues.push($scope.idForExport * 1);\n        console.log('cr id', idValues.join(\",\"));\n        return idValues.join(\",\");\n\n        }\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\t\t//ora_bank_cards_select\n\t\t$scope.refreshCardInfoFromCur = function refreshCardInfoFromCur() {\n\t\t    Metronic.startPageLoading();\n\t\t    var qew1 = document.getElementById(\"cards_ora\").options;\n\t\t    $scope.currMask = qew1[qew1.selectedIndex].label;\n\t\t    var qew2 = document.getElementById(\"cur_ora\").options;\n\t\t    $scope.currCurcd = qew2[qew2.selectedIndex].label;\n            \n\t\t\turi2 = \"query/get?code=card_info_from_card_mask\u0026param1=\" + $scope.idForExport + \"\u0026param2=\" + $scope.currMask  + \"\u0026param3=\" +  $scope.currCurcd ;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_opt_info = data.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.refreshCardInfoFromMask = function refreshCardInfoFromMask() {\n\t\t    \n\t\t    var qew1 = document.getElementById(\"cards_ora\").options;\n\t\t    $scope.currMask = qew1[qew1.selectedIndex].label;\n\t\t    $scope.cardMask = $scope.currMask;\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=curcd_list_by_cards\u0026param1=\" + $scope.currMask ;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_cur = data.items;\n\t\t\t\t$scope.myCur = $scope.items_cur[0];\n                $scope.cardCur = $scope.items_cur[0].curcd;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\t$scope.cardInfoFromMask();\n\t\t\t});\n\t\t};\n\t\t\n\t\t\n\t\t\n\t\t$scope.cardInfoFromMask = function cardInfoFromMask() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=card_info_from_card_mask\u0026param1=\" + $scope.idForExport + \"\u0026param2=\" + $scope.cardMask  + \"\u0026param3=\" +  $scope.cardCur;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_opt_info = data.items;\n\t\t\t\t$scope.accountInfo() ;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.accountInfo = function accountInfo() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=list_account\u0026param1=\" + $scope.idForExport + \"\u0026param2=\" + $scope.cardMask  + \"\u0026param3=\" +  $scope.cardCur;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_acc_info = data.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.curList = function curList() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=curcd_list_by_cards\u0026param1=\" + $scope.cardMask ;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_cur = data.items;\n\t\t\t\t$scope.myCur = $scope.items_cur[0];\n                $scope.cardCur = $scope.items_cur[0].curcd;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\t$scope.cardInfoFromMask();\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.cardList = function cardList() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=cards_list_by_client\u0026param1=\" + $scope.idForExport ;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_opt = data.items;\n\t\t\t\t$scope.myColor = $scope.items_opt[0];\n                //console.log('testy id', $scope.items_opt);\n                $scope.cardMask = $scope.items_opt[0].card_msk_num;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\t$scope.curList();\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.phnList = function phnList() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=phnList\u0026param1=\" + $scope.idForExport + \"\u0026param2=\" + $scope.idPhnNum + \"\u0026param3=\" + $scope.idPhnNum ;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_cc = data.items;\n\t\t\t\t//console.log('items_cc',$scope.items_cc );\n\t\t\t\tfor(var arr in $scope.items_cc){\n\t\t\t    if ($scope.items_cc[arr].prty =='1') { \n\t\t\t      $scope.myColor4 = $scope.items_cc[arr];\n\t\t\t      $scope.phnNum = $scope.items_cc[arr].fmb_ph_num;\n\t\t\t    }\n\t\t\t    }\n\t\t\t    console.log('myColor',$scope.myColor4 );\n\t\t\t    if(!$scope.myColor4 ){\n\t\t\t      $scope.myColor4 = $scope.items_cc[0];\n\t\t\t      $scope.phnNum = $scope.items_cc[0].fmb_ph_num;\n\t\t\t    }\n\t\t\t\tconsole.log('myColor',$scope.myColor4 );\n                //console.log('testy id', $scope.items_opt);\n                \n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\t\n\t\t\t});\n\t\t};\n\t\t\n\t\t        $scope.save = function save(){\n\n\n\n\t\t\t$scope.action = \"insert\";\n\t\t\t$scope.table_name = \"user_logs\"\n\t\t\t$scope.error_code = \"\"\n\t\t\t$scope.error_text = \"\";\n\t\t\t$scope.detail = {};\n\t\t\t$scope.detail.id = 0;\n\t\t\t$scope.detail.search_param = $scope.searchTitle ;\n\t\t\t$scope.detail.title=\"CLI_PG\";\n\t\t\t\n\t\t\tMetronic.startPageLoading();\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\n\n\t\t\tDMLService.update( $scope.saveValues ).\n\t\t\t\tsuccess(function (data) {\n\t\t\t\t\tif (data.error!=\"0\") {\n\t\t\t\t\t\t$scope.error_code = data.error_code;\n\t\t\t\t\t\t$scope.error_text = data.error_text;\n\t\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\n\t\t\n\t\t\t}\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=main_page_client\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\t\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\t\t\t\t$scope.table_name=\"ora_detail\";\n\n\t\t\t\t$scope.items = data.items;\n\t\t\t\tif($scope.items){\n\t\t\t\t    $scope.checkEmptiness = 1;\n                    $scope.idForExport = $scope.items[0].bin_or_iin;\n                $scope.cardList();\n                $scope.phnList();\n\t\t\t\t}else{\n\t\t\t\t    $scope.checkEmptiness = 0;\n\t\t\t\t}\n\t\t\t\t$scope.save();\n\t\t\t\t\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t\tMetronic.stopPageLoading();\n\t\t\t\n\t\t\t\n\t\t\t\n\n\t\t}\n\t\t//$scope.bind();\n\t\t\n\t\t$scope.setListOwnerFilter('all');\n\t\tMetronic.stopPageLoading();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Клиенты","updated_at":"2022-01-24 11:38:12","url":"/mfo/fm_client"},{"code":"product_fm","created_at":"2021-10-28 11:50:13","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5454","is_auto":"0","is_cache":"0","module$code":"mfo","module_id":"39","page_type$code":"list","page_type_id":"1","sys$uuid":"20838e1b-6501-42ae-9011-4eb55a86d880","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n.main_table {\n    border:none;\n    border-collapse: collapse;\n}\n\n.main_table td, .main_table  th {\n    border-left: 1px solid #000;\n    border-right: 1px solid #000;\n}\n\n.main_table th:first-child {\n    border-left: none;\n}\n\n.main_table td:last-child {\n    border-right: none;\n}\n\n.main_table th {\n    width: 60%;\n}\n.main_table td {\n    width: 40%;\n}\n\n.main_table tr:last-child td, .main_table tr:last-child th {\n    border-bottom: none;\n}\n\n.main_table tr:first-child td, .main_table tr:first-child th {\n    border-top: none;\n}\n\n\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" \nng-init=\"init({pageData:$state.current.data,currentPage:1,perPage:25,table_name:$state.current.data.pageQueryCode})\"\nng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n\u003cdiv class=\"row\"\u003e\n\t\u003cdiv class=\"col-md-8\"\u003e\n\t\t\u003cdiv\u003e\n\t\t\u003ch4\u003e\u003cb\u003eПоиск клиента по ИИН / по номеру телефона\u003c/b\u003e\u003c/h4\u003e\n\t    \u003cbutton class=\"btn btn-primary\" style =\"background-color: rgb(150 20 82);\"\n\tng-click=\"pubSubPublish('chooseBPMSModal',{callBack:printCallBack,'processCode':'exp_template', input: {entity_id:pageData.entityId,'url':'?code='+table_name+'\u0026amp;ids=' +idForExport  } })\"\n    \u003e\n        \u003ctranslate\u003eExport\u003c/translate\u003e\n\u003c/button\u003e\n\u003c/div\u003e\n\t\t\u003c!-- END PAGE HEADER--\u003e\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\u003cdiv class=\"col-md-12\"\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\u003cdiv class=\"portlet-body form\"\u003e\n\t\t\t\t\t\t\t\t\u003cform role=\"form\"\u003e\n\t\t\t\t\t\t\t\t\t\u003cdiv class=\"form-body\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-6\"\u003e\n\t\t\t\t\t\t\t\t\t\t\u003cinput type=\"text\" class=\"form-control\" placeholder=\" ИИН / Номер FM \"  ng-model=\"searchTitle\" /\u003e\n                                        \u003c/div\u003e\n                                        \u003cdiv class=\"col-md-3\"\u003e\n                                            \u003cbutton class=\"btn btn-primary kBSCXr\"  ng-click=\"search(searchTitle)\"\u003e\n                                            Поиск\n                                            \u003c/button\u003e\n                                        \u003c/div\u003e\n                                        \u003c/div\u003e\n\n\n\t\t\t\t\t\t\t\t\t\t\u003c!-- as a Dom element --\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cbr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003cdiv class = \"row\" ng-if=\"checkEmptiness \u003c 1 \"\u003e \n        \n        \u003cdiv class=\"alert alert-info col-md-9\" role=\"alert\"\u003e\n            По данному запросу отсутствуют данные в базе клиентов ForteMobile\n        \u003c/div\u003e\n        \u003c/div\u003e\n\t\t\t\t\t\t\t\t\t\t\u003ctable class=\"table table-bordered main_table\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item2 in items_2\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eФИО клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item2.cust_nm}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item2 in items_2\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eИИН клиента\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item2.bin_or_iin}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item2 in items_2\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eНомера телефонов ForteMobile\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cselect id=\"cl_phn_num\" ng-click=\"refreshPageInfoFromPhn()\"\n\t\t\t\t\t\t\t\t\t\t\t\tng-model=\"myColor\" \n\t\t\t\t\t\t\t\t\t\t\t\tng-options=\"item_c.fmb_ph_num for item_c in items_cc | orderBy: 'prty'\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t     \u003c/select\u003e  \n\t\t\t\t\t\t\t\t\t\t\t\t   \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eКатегория номера\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.prty}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eТариф ForteMobile\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.tarif_name}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСтатус номера\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.akt_yn}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата продажи номера\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.sell_date}}\u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата регистрации номера\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.sell_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eВечная скидка\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.limit_yn}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата предыдущего списания абон. платы\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.lst_pp_charge_dt}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата след. списания АП\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.next_pp_charge_dt}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСтатус предоставления скидки в пред. расчетном периоде\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.stus_msg_desc}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата активации номера\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.active_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eТип скидки по номеру ForteMobile\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.dscnt_type}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата подключения скидки\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.add_dscnt_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата отключения скидки\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.del_dscnt_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСумма трат на тек. дату (операции проведенные по картам клиента до 05:00 утра тек. дня)\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e\u003cspan style='font-weight: bold;' \u003e{{item.trs}}\u003c/span\u003e \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eСтатус подключения скидки в Beeline\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.award_yn}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eТип подключения клиента ForteMobile\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003eНовый номер \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eАктивность (30 дней)\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.aktiv_month}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата списания АП по номеру тел со скидкой\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.award_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eДата списания АП по номеру тел без скидки\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.rchful_date}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eГород\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.sale_city}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eМесто продажи (УРП/УРЗП/Доставка)\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.sale_place_urp}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eФИО продавца\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.salesman}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003ctr ng-repeat=\"item in items\"\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003cth\u003eICCID номмера ForteMobile\u003c/th\u003e\n\t\t\t\t\t\t\t\t\t\t\t\t\u003ctd\u003e{{item.iccid}} \u003c/td\u003e\n\t\t\t\t\t\t\t\t\t\t\t\u003c/tr\u003e\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\u003c/table\u003e\n\t\t\t\t\t\t\t\t\t\t\u003c!--TODO DATEPICKER --\u003e\n\t\t\t\t\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\t\t\u003c/form\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c!-- End: life time stats --\u003e\n\t\t\t\u003c/div\u003e\n\t\t\u003c/div\u003e\n\t\t\n\t\u003c/div\u003e\n\t\n\t\u003c/div\u003e\n\t\u003cdiv class=\"row\"\u003e\n\t\u003chr\u003e\n\t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n\t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n\t\u003c/a\u003e\n\t\u003chr\u003e\n\t\u003chr\u003e\n\t\u003c/div\u003e\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n        //$scope.searchTitle = \"\";\n        $scope.idForExport = 1;\n        \n        $scope.init = function(opt){\n        $scope.opt = opt;\n        //console.log('opt.pageData',opt.pageData );\n\n        $scope.pageCode = opt.pageCode;\n        $scope.pageData = opt.pageData;\n        $scope.pageId = opt.pageId;\n        if (opt.pageData){\n            $scope.entityId = opt.pageData.entityId;\n            $scope.table_name = opt.pageData.entityCode;\n            $scope.query_code = opt.pageData.pageQueryCode;\n        }\n        $scope.exportXMLFields = opt.exportXMLFields;\n        //alert('test');\n        //alert($location.search().page);\n        if (opt.currentPage){\n            $scope.currentPage = opt.currentPage;\n        }\n        if ($location.search().page)\n        {\n            $scope.currentPage = $location.search().page?$location.search().page*1:1;\n        }\n\n        $scope.perPage = opt.perPage;\n\n\n\n\n        $scope.selectRecordsState =  (opt.selectRecordsState) ? opt.selectRecordsState : true;\n        if (opt.filter) {\n            $scope.filter = opt.filter;\n        }\n\n\n        if (opt.pageData \u0026\u0026 opt.pageData.pageFilterSetId) {\n            $scope.filterSetId =opt.pageData.pageFilterSetId;\n\n\t\t\tvar filterSet = null;\n            var itemCode =\"filter/\"+$rootScope.sessioninfo.id+\"/\"+$scope.filterSetId;\n            var itemSortField = \"sortField/\" + $rootScope.sessioninfo.id + \"/\" + $scope.filterSetId;\n            var itemSortFieldAsc = \"sortFieldAsc/\" + $rootScope.sessioninfo.id + \"/\" + $scope.filterSetId;\n\t\t\tif (!$rootScope.isMobile){\t\n\t\t\t\tvar filterSet = localStorage.getItem(itemCode);\n\t\t\t\t$scope.sortField = localStorage.getItem(itemSortField);\n\t\t\t\t$scope.sortFieldAsc = localStorage.getItem(itemSortFieldAsc) === 'true';\n\t\t\t}\n\n\n            RestApiService.get(\"query/get?code=get_filter_cols_by_id\u0026param1=\" + $scope.filterSetId).\n            success(function (data) {\n                $scope.filterSetCols = data.items;\n            });\n            \n            \n\n            if (!filterSet){\n                //RestApiService.get(\"query/get?code=get_filter_dtls_by_id\u0026param1=\" + $scope.filterSetId).\n\t\t\t\tRestApiService.get(\"services/run/get_filter_dtls_by_id?set_id=\" + $scope.filterSetId).\n\t\t\t\t \n                success(function (data) {\n                    //console.log(data, \"filter\");\n                    $scope.filterSet = data.items;\n\t\t\t\t\t$scope.filterSet.forEach(\n\t\t\t\t\tfunction (filterItem){\n\t\t\t\t\t\tconsole.log('filter',filterItem);\n\t\t\t\t\t\t//filterItem.value = {};\n\t\t\t\t\t\t//filterItem.value.selected_references_mdl=[{id:'1',title_short:'ÐŸÑ€Ð¸Ð¼ÐµÑ€'}];\n\t\t\t\t\t}\n\n\t\t\t\t\t);\n                    $scope.bindWithFilter(false,false);\n                });\n            }else{\n                //$scope.filterSet = JSON.parse(filterSet);\n                $scope.setFilterSetFromString(filterSet);\n                $scope.bindWithFilter(false,true);\n            }\n\n        }else{\n            $scope.bind();\n        }\n\n\n\n    }\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n        \n        $scope.bindCallBack = function(params) {\n        $scope.bind();\n        }\n        \n        $scope.printCallBack = function(params) {\n        if (params.vars \u0026\u0026 params.vars.file_url) {\n            location.href = params.vars.file_url;\n        }\n        }\n        \n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\t\t\n\t\t$scope.getIdForExport = function(){\n        var idValues = [];\n        idValues.push($scope.idForExport * 1);\n        console.log('cr id', idValues.join(\",\"));\n        return idValues.join(\",\");\n\n        }\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\t\t\n\t\t$scope.clientInfoFromPhn = function clientInfoFromPhn() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=phnInfo\u0026param1=\" + $scope.phnNum ;\n\t\t\tconsole.log('$scope.phnNum', $scope.phnNum);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items = data.items;\n\t\t\t\tconsole.log('$scope.items', $scope.items);\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.refreshPageInfoFromPhn = function refreshPageInfoFromPhn() {\n\t\t    \n\t\t    var qew1 = document.getElementById(\"cl_phn_num\").options;\n\t\t    $scope.currPhn = qew1[qew1.selectedIndex].label;\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=phnInfo\u0026param1=\" + $scope.currPhn ;\n\t\t\tconsole.log('qew1', qew1);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items = data.items;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\t\n\t\t\t});\n\t\t};\n\t\t\n\t\t$scope.phnList = function phnList() {\n\t\t    Metronic.startPageLoading();\n\t\t\turi2 = \"query/get?code=phnList\u0026param1=\" + $scope.idForExport + \"\u0026param2=\" + $scope.idPhnNum + \"\u0026param3=\" + $scope.idPhnNum ;\n\t\t\t//console.log('ty id', uri2);\n\t\t\tRestApiService.get(uri2).\n\t\t\tsuccess(function(data) {\n\n\t\t\t\t$scope.items_cc = data.items;\n\t\t\t\tfor(var arr in $scope.items_cc){\n\t\t\t    if ($scope.items_cc[arr].prty =='1') { \n\t\t\t      $scope.myColor = $scope.items_cc[arr];\n\t\t\t      $scope.phnNum = $scope.items_cc[arr].fmb_ph_num;\n\t\t\t    }\n\t\t\t    }\n\t\t\t    //console.log('myColor', $scope.myColor);\n\t\t\t    if(!$scope.myColor ){\n\t\t\t      $scope.myColor = $scope.items_cc[0];\n\t\t\t      $scope.phnNum = $scope.items_cc[0].fmb_ph_num;\n\t\t\t    }\n\t\t\t    //console.log('myColor', $scope.myColor);\n                $scope.clientInfoFromPhn();\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t\t\n\t\t\t});\n\t\t};\n\n\t\t    $scope.save = function save(){\n\n\n\n\t\t\t$scope.action = \"insert\";\n\t\t\t$scope.table_name = \"user_logs\"\n\t\t\t$scope.error_code = \"\"\n\t\t\t$scope.error_text = \"\";\n\t\t\t$scope.detail = {};\n\t\t\t$scope.detail.id = 0;\n\t\t\t$scope.detail.search_param = $scope.searchTitle ;\n\t\t\t\n\t\t\tMetronic.startPageLoading();\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\n\n\t\t\tDMLService.update( $scope.saveValues ).\n\t\t\t\tsuccess(function (data) {\n\t\t\t\t\tif (data.error!=\"0\") {\n\t\t\t\t\t\t$scope.error_code = data.error_code;\n\t\t\t\t\t\t$scope.error_text = data.error_text;\n\t\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t\t$scope.save = function save(){\n\n\n\n\t\t\t$scope.action = \"insert\";\n\t\t\t$scope.table_name = \"user_logs\"\n\t\t\t$scope.error_code = \"\"\n\t\t\t$scope.error_text = \"\";\n\t\t\t$scope.detail = {};\n\t\t\t$scope.detail.id = 0;\n\t\t\t$scope.detail.search_param = $scope.searchTitle ;\n\t\t\t$scope.detail.title=\"PROD_PG\";\n\t\t\t\n\t\t\tMetronic.startPageLoading();\n\t\t\t$scope.saveValues =  [ {table_name:$scope.table_name,action:$scope.action, values: [$scope.detail]}  ];\n\n\t\t\tDMLService.update( $scope.saveValues ).\n\t\t\t\tsuccess(function (data) {\n\t\t\t\t\tif (data.error!=\"0\") {\n\t\t\t\t\t\t$scope.error_code = data.error_code;\n\t\t\t\t\t\t$scope.error_text = data.error_text;\n\t\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t});\n\t\t\t}\n\t\t\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=main_page_client\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\t\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\t\t\t\t$scope.table_name=\"ora_detail\";\n\n\t\t\t\t$scope.items_2 = data.items;\n\t\t\t\tif($scope.items_2){\n\t\t\t\t    $scope.checkEmptiness = 1;\n\t\t\t\t   \t$scope.idForExport = $scope.items_2[0].bin_or_iin;\n\t\t\t\t$scope.idPhnNum = $scope.items_2[0].fmb_ph_num;\n\t\t\t\t//console.log('idForExport',$scope.idForExport );\n\t\t\t\t//console.log('idPhnNum',$scope.idPhnNum );\n\t\t\t\t$scope.phnList();\n\t\t\t\t}else{\n\t\t\t\t    $scope.checkEmptiness = 0;\n\t\t\t\t}\n\t\t\t    $scope.save();\n\t\t\t    \n\t\t\t\t//console.log('testy id', $scope.items[0].id);  currentPage\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t\t\n\t\t\t\n\n\t\t}\n\t\t//$scope.bind();\n\t\t$scope.setListOwnerFilter('all');\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Продукт FM","updated_at":"2022-01-26 12:30:29","url":"/mfo/product_fm"},{"code":"one_crm_sales_report_filial","created_at":"2021-12-06 14:21:49","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5461","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"8cc35a54-1d5c-4581-b77c-83cf3af79b67","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n  \u003cdiv class=\"page-bar\"\u003e\n  \t\u003cul class=\"page-breadcrumb\"\u003e\n  \t\t\u003cli\u003e\n  \t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n  \t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n  \t\t\t\u003ctranslate\u003eПродажи филиалов\u003c/translate\u003e\n  \t\t\u003c/li\u003e\n  \t\u003c/ul\u003e\n  \t\u003cdiv class=\"page-toolbar\"\u003e\n  \t    \u003cdiv class=\"btn-group pull-right\"\u003e\n  \t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n  \t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n  \t\u003c/a\u003e\n  \t\u003c/div\u003e\n  \t\n  \u003c/div\u003e\n  \u003c/div\u003e\t\t\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n    \u003cdiv class=\"col-md-6\"\u003e\n    \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n      \u003cdiv class=\"col-md-4\"\u003e\n        \u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-4\"\u003e\n        \u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-4 box\"\u003e\n        \u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003c/div\u003e \n    \u003cdiv class=\"col-md-12\"\u003e \n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\n      \n      \u003cdiv class=\"col-md-6\"\u003e\n    \u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n      \u003c!--\u003cp\u003e--\u003e\n        \u003c!--SAMPLE NOTE:--\u003e\n      \u003c!--\u003c/p\u003e--\u003e\n    \u003c!--\u003c/div\u003e--\u003e\n    \u003c!-- Begin: life time stats --\u003e\n    \u003cbr\u003e\u003cbr\u003e\n        \u003cdiv class=\"portlet\"\u003e\n          \u003cdiv class=\"portlet-body\"\u003e\n            \u003cdiv class=\"table-container\"\u003e\n              \u003cdiv class=\"table-responsive\"\u003e\n                \u003ctable st-table=\"items\"  class=\"table table-striped table-bordered\"\u003e\n                  \u003cthead\u003e\n                      \u003ctr style=\"background-color:#ddda\" \u003e\n                        \u003cth class=\"text-center\"\u003eФилиалы\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003eПлан\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003eФакт(продажи)\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003e% исполнения\u003c/th\u003e\n                      \u003c/tr\u003e\n                  \u003c/thead\u003e\n                  \u003ctbody\u003e\n                      \u003ctr ng-repeat=\"row in data03\" style=\"background-color:{{row._row_color}}\"\u003e\t\t\t\t\t\t    \n                        \u003ctd\u003e\u003cdiv class=\"text-left\"\u003e{{row.sale_city}}\u003c/div\u003e\u003c/td\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e{{row.plan}}\u003c/div\u003e\u003c/td\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e{{row.fact}}\u003c/div\u003e\u003c/td\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e{{row.prc_done}}%\u003c/div\u003e\u003c/td\u003e\n                      \u003c/tr\u003e\n                       \u003ctr style=\"background-color:{{row._row_color}}\"\u003e\n                           \u003ctd\u003e\u003cdiv class=\"text-left\"\u003e\u003cb\u003eОбщий итог\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                            \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e\u003cb\u003e{{getTotal('plan')}}\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                            \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e\u003cb\u003e{{getTotal('fact')}}\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                            \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e\u003cb\u003e{{(getTotal('fact')/getTotal('plan')*100) | number:2}}% \u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                        \u003c/tr\u003e\n                  \u003c/tbody\u003e\n                  \n                    \u003ctfoot\u003e\n          \u003ctr\u003e\n            \u003ctd colspan=\"50\" class=\"text-center\"\u003e\n              \u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n            \u003c/td\u003e\n          \u003c/tr\u003e\n          \u003c/tfoot\u003e\n                \u003c/table\u003e\n              \u003c/div\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- End: life time stats --\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-6\"\u003e\n\n\t\t\t\t\u003c!-- Begin: life time stats --\u003e\n\t\t\t\t\u003cdiv class=\"portlet\"\u003e\n\t\t\t\t\t\u003cdiv class=\"portlet-body\"\u003e\n\t\t\t\t\t\t\u003cdiv class=\"table-container\"\u003e\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\u003cdiv class=\"row\"\u003e\n\t\t\t\t\t\t\t\n\t\t\t\t\n\t\t\t\t\t\t\t\t\u003cdiv id=\"report_hide\"\u003e\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\u003cdiv class=\"col-md-6\"\u003e\n\n\t\t\t\t\t\t\t\t\t\u003ccanvas id=\"radar\" class=\"chart chart-pie\" chart-data=\"charts02\" chart-labels=\"labels02\"\u003e\u003c/canvas\u003e\n\n\t\t\t\t\t\t\t\t\u003c/div\u003e\n                \u003c/div\u003e\n\t\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\t\u003c/div\u003e\n\t\t\t\t\u003c/div\u003e\n\t\t\t\u003c/div\u003e\n      \u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n    //document.getElementById(\"report_hide\").style.display = 'none'; \n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=report2_sales_graph1_crm_fm\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at).\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n      RestApiService.get(\"query/get?code=report2_sales_graph3_crm_fm\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at).\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data03 = data.items;\n\t\t\t\t$scope.getTotal = function(type) {\n                    var total = 0;\n                    angular.forEach($scope.data03, function(el) {\n                        total += parseInt(el[type],10);\n                    });\n                 return total;\n    };\n\t\t\t});\n\t\t\t\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Продажи филиалов","updated_at":"2021-12-29 09:58:46","url":"/mfo/one_crm_sales_report_filial"},{"code":"meiran_test_sales_report_setup","created_at":"2021-12-07 12:04:53","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5462","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"3ed74ff4-d340-47fa-83f7-30677842c816","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n  \u003cdiv class=\"page-bar\"\u003e\n  \t\u003cul class=\"page-breadcrumb\"\u003e\n  \t\t\u003cli\u003e\n  \t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n  \t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n  \t\t\t\u003ctranslate\u003eПродажи филиалов\u003c/translate\u003e\n  \t\t\u003c/li\u003e\n  \t\u003c/ul\u003e\n  \t\u003cdiv class=\"page-toolbar\"\u003e\n  \t    \u003cdiv class=\"btn-group pull-right\"\u003e\n  \t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n  \t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n  \t\u003c/a\u003e\n  \t\u003c/div\u003e\n  \t\n  \u003c/div\u003e\n  \u003c/div\u003e\t\t\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n    \u003cdiv class=\"col-md-6\"\u003e\n    \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n      \u003cdiv class=\"col-md-4\"\u003e\n        \u003cbu-date label=\"Дата\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-4 box\"\u003e\n        \u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eВыгрузить\u003c/button\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003c/div\u003e \n    \u003cdiv class=\"col-md-12\"\u003e \n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\t\n      \n      \u003cdiv class=\"col-md-6\"\u003e\n    \u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n      \u003c!--\u003cp\u003e--\u003e\n        \u003c!--SAMPLE NOTE:--\u003e\n      \u003c!--\u003c/p\u003e--\u003e\n    \u003c!--\u003c/div\u003e--\u003e\n    \u003c!-- Begin: life time stats --\u003e\n    \u003cbr\u003e\u003cbr\u003e\n        \u003cdiv class=\"portlet\"\u003e\n          \u003cdiv class=\"portlet-body\"\u003e\n            \u003cdiv class=\"table-container\"\u003e\n              \u003cdiv class=\"table-responsive\"\u003e\n                \u003ctable st-table=\"items\"  class=\"table table-striped table-bordered\"\u003e\n                  \u003cthead\u003e\n                      \u003ctr style=\"background-color:#ddda\" \u003e\n                        \u003cth class=\"text-center\"\u003eФилиалы\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003eПлан\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003eДата\u003c/th\u003e\n                      \u003c/tr\u003e\n                  \u003c/thead\u003e\n                  \u003ctbody\u003e\n                      \u003ctr ng-repeat=\"row in data03\" style=\"background-color:{{row._row_color}}\"\u003e\t\t\t\t\t\t    \n                        \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.title}}\u003c/div\u003e\u003c/td\u003e\n                        \u003c!--\u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.plan}}\u003c/div\u003e\u003c/td\u003e--\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-right\" ng-show=\"1==1\"\u003e\u003cbu-input-number-label  icon=\"\u003cno value\u003e\" id-model=\"row.plan\" on-change=\"test1(row.plan)\" \u003e\u003c/bu-input-number-label\u003e\u003c/div\u003e\u003c/td\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-right\"\u003e{{row.base_ymd}}\u003c/div\u003e\u003c/td\u003e\n                        \n                      \u003c/tr\u003e\n                  \u003c/tbody\u003e\n                  \n                    \u003ctfoot\u003e\n          \u003ctr\u003e\n            \u003ctd colspan=\"50\" class=\"text-center\"\u003e\n              \u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n            \u003c/td\u003e\n          \u003c/tr\u003e\n          \u003c/tfoot\u003e\n                \u003c/table\u003e\n              \u003c/div\u003e\n            \u003c/div\u003e\n            \n            \u003cbutton class=\"btn btn-primary\" ng-click=\"update()\"\u003eUpdate\u003c/button\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- End: life time stats --\u003e\n      \u003c/div\u003e\n      \u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n    //document.getElementById(\"report_hide\").style.display = 'none'; \n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n        \n        \n        $scope.test1 = function test1(aa){\n\t\t\tconsole.log($scope.data03);\n\t\t\tconsole.log(\"Make\");\n        }\n        \n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\tconsole.log(x);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t\n\t\t\tvar ok = 0;\n\t\t\tRestApiService.get(\"query/get?code=report2_sales_graph1_crm_fm\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at).\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data02 = data.items;\n\t\t\t\tok++;\n\n\t\t\t\t$scope.labels02 = [];\n\t\t\t\t$scope.charts02 = [];\n\n\t\t\t\tif ($scope.data02) {\n\t\t\t\t\t$scope.data02.forEach(function(item, i, arr) {\n\t\t\t\t\t\t$scope.labels02.push(item.title);\n\t\t\t\t\t\t$scope.charts02.push(item[$scope.analyt] * 1);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\n\t\t\t\tif (ok == 4) {\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t}\n\t\t\t});\n            RestApiService.get(\"query/get?code=report2_sales_setup_plan_crm_fm\u0026param1=\" + $scope.begin_at).\n\t\t\t    success(function(data) {\n\t\t\t\t$scope.data03 = data.items;\n\t\t\t\t\n\t\t\t});\t\n\n\t\t}\n\t\t\n\t\t//Update data\n\t\t$scope.update = function update() {\n\t\t    \n\t\t\tMetronic.startPageLoading();\n// \t\t\t$scope.data_ = [];\n// \t\t\tfor(let i = 1; i \u003c= $scope.data03.length; i++) {\n// \t\t\t    console.log($scope.data03[i-1]);\n// \t\t\t    $scope.data_.push({\n// \t\t\t        'id': i,\n// \t\t\t        'title': $scope.data03[i-1].name,\n// \t\t\t        'base_ymd': $scope.data03[i-1].base_ymd,\n// \t\t\t        'plan': $scope.data03[i-1].plan\n// \t\t\t    });\n// \t\t\t}\n// \t\t\tconsole.log($scope.data_);\n\t\t    DMLService.update(  [ {table_name: 'one_crm_filial_plan1', action: 'update', values: $scope.data03 }  ]).\n\t\t\t\tsuccess(function (data) {\n\t\t\t\t\tif (data.error!=\"0\") {\n\t\t\t\t\t\t$scope.error_code = data.error_code;\n\t\t\t\t\t\t$scope.error_text = data.error_text;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\t});\n\t\t}\n\t\t\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\t\tconsole.log(\"test1\")\n\t\tconsole.log($stateParams)\n\t\tconsole.log(\"test2\")\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Настройка плана филиалов","updated_at":"2021-12-13 00:58:02","url":"/mfo/meiran_test_sales_report_setup"},{"code":"one_crm_sales_report_sim","created_at":"2021-12-20 09:38:55","created_by":"1","db_template":"1","entity$code":"meiran_test","entity_id":"1082","id":"5481","is_auto":"0","is_cache":"0","module$code":"fm_crm_test","module_id":"43","page_type$code":"list","page_type_id":"1","sys$uuid":"22fff92e-74ed-466e-a9bc-5d1872b32636","template":"\u003c!-- BEGIN PAGE HEADER--\u003e\n\n\u003chead\u003e\n\u003cstyle\u003e\n.kBSCXr {\nbackground-color: #EE1D75;\ncolor: #FFFFFF;\n}\n\n.box{\n    display: flex;\n    justify-content: center;\n    align-items: center;\n}\n\n.form-control-1 {\n    font-size: 30px;\n    font-weight: normal;\n    border: 0px;\n\t\tcolor: #EE1D75;\n}\n\n.form-control-2 {\n\tbackground-color: powderblue;\n}\n\n\u003c/style\u003e\n\u003c/head\u003e\n\u003csection class=\"clearfix container-fluid\" id=\"section-basics\" ng-controller=\"basicsCtrl\" style=\"background-color:#FFFFFF;\"\u003e\n  \u003cdiv class=\"page-bar\"\u003e\n  \t\u003cul class=\"page-breadcrumb\"\u003e\n  \t\t\u003cli\u003e\n  \t\t\t\u003ci class=\"fa fa-home\"\u003e\u003c/i\u003e\n  \t\t\t\u003ci class=\"fa fa-angle-right\"\u003e\u003c/i\u003e\n  \t\t\t\u003ctranslate\u003eОстатки сим карт\u003c/translate\u003e\n  \t\t\u003c/li\u003e\n  \t\u003c/ul\u003e\n  \t\u003cdiv class=\"page-toolbar\"\u003e\n  \t    \u003cdiv class=\"btn-group pull-right\"\u003e\n  \t\u003ca ng-if=\"!editing \u0026\u0026 session_roles.admin\" ng-href=\"#/settings/pagedetails/{{$state.current.data.pageId}}\" class=\"btn btn-warning red\"\u003e\u003ci class=\"fa fa-pencil-square-o\"\u003e\u003c/i\u003e\n  \t\t\u003ctranslate\u003eEdit Page\u003c/translate\u003e\n  \t\u003c/a\u003e\n  \t\u003c/div\u003e\n  \t\n  \u003c/div\u003e\n  \u003c/div\u003e\t\t\n\n\t\t\u003c!-- BEGIN MAIN CONTENT --\u003e\n    \u003cdiv class=\"col-md-6\"\u003e\n    \u003cdiv class=\"btn-groupr\" role=\"group\" aria-label=\"...\"\u003e\n      \u003cdiv class=\"col-md-4\" \u003e\n       \u003cbu-date label=\"Дата начала\" id-model=\"begin_at\"\u003e\u003c/bu-date\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-4\"\u003e\n        \u003cbu-date label=\"Дата окончания\" id-model=\"end_at\"\u003e\u003c/bu-date\u003e\n      \u003c/div\u003e\n      \u003cdiv class=\"col-md-4 box\"\u003e\n        \u003cbutton class=\"btn btn-primary kBSCXr\" ng-click=\"bind()\"\u003eСформировать\u003c/button\u003e\n      \u003c/div\u003e\n    \u003c/div\u003e\n    \u003c/div\u003e\n    \n    \u003cdiv class=\"col-md-12\"\u003e \n\t\t\u003cdiv class=\"row\" ng-keydown=\"keyDown($event)\"\u003e\n\t\t\n      \n      \u003cdiv class=\"col-md-12\"\u003e\n          \u003cbr\u003e\n          \u003cp\u003eПоследняя дата плана загрузки: {{total1 | date:'dd-MM-yyyy'}}\u003c/p\u003e\n          \n    \u003c!--\u003cdiv class=\"note note-danger\"\u003e--\u003e\n      \u003c!--\u003cp\u003e--\u003e\n        \u003c!--SAMPLE NOTE:--\u003e\n      \u003c!--\u003c/p\u003e--\u003e\n    \u003c!--\u003c/div\u003e--\u003e\n    \u003c!-- Begin: life time stats --\u003e\n    \u003cbr\u003e\n        \u003cdiv class=\"portlet\"\u003e\n          \u003cdiv class=\"portlet-body\"\u003e\n            \u003cdiv class=\"table-container\"\u003e\n              \u003cdiv class=\"table-responsive\"\u003e\n                \u003ctable st-table=\"items\"  class=\"table table-striped table-bordered\"\u003e\n                  \u003cthead\u003e\n                      \u003ctr style=\"background-color:#ddda\" \u003e\n                        \u003cth class=\"text-center\"\u003eФилиалы\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003eВсего на дату\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003eВсего продано за период\u003c/th\u003e\n                        \u003cth class=\"text-center\"\u003eОстаток на дату окончания\u003c/th\u003e\n                      \u003c/tr\u003e\n                  \u003c/thead\u003e\n                  \u003ctbody\u003e\n                       \u003ctr style=\"background-color:{{row._row_color}}\"\u003e\n                           \u003ctd\u003e\u003cdiv class=\"text-left\"\u003e\u003cb\u003eИтого\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                            \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e\u003cb\u003e{{getTotal('plan')}}\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                            \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e\u003cb\u003e{{getTotal('cnt_month_2')}}\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                            \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e\u003cb\u003e{{getTotal('plan')-getTotal('cnt_month_2')-getTotal('cnt_month_1')}}\u003c/b\u003e\u003c/div\u003e\u003c/td\u003e\n                        \u003c/tr\u003e\n                      \u003ctr ng-repeat=\"row in data03\" style=\"background-color:{{row._row_color}}\"\u003e\t\t\t\t\t\t    \n                        \u003ctd\u003e\u003cdiv class=\"text-left\"\u003e{{row.sale_city}}\u003c/div\u003e\u003c/td\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e{{row.plan}}\u003c/div\u003e\u003c/td\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e{{row.cnt_month_2}}\u003c/div\u003e\u003c/td\u003e\n                        \u003ctd\u003e\u003cdiv class=\"text-center\"\u003e{{row.plan-row.cnt_month_2-row.cnt_month_1}}\u003c/div\u003e\u003c/td\u003e\n                      \u003c/tr\u003e\n                      \n                   \n                  \u003c/tbody\u003e\n                  \n                    \u003ctfoot\u003e\n          \u003ctr\u003e\n            \u003ctd colspan=\"50\" class=\"text-center\"\u003e\n              \u003cdiv ng-include=\"'views/blocks/simpletable-pagination.html'\"\u003e\u003c/div\u003e\n            \u003c/td\u003e\n          \u003c/tr\u003e\n          \u003c/tfoot\u003e\n                \u003c/table\u003e\n              \u003c/div\u003e\n            \u003c/div\u003e\n          \u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- End: life time stats --\u003e\n      \u003c/div\u003e\n      \u003c/div\u003e\n\t\t\u003c/div\u003e\n\n\u003c/section\u003e\n\n\n\u003cscript type=\"text/javascript\"\u003e\n\tfunction basicsCtrl($scope, $http, $log, $stateParams, DMLService, RestApiService, UIService, PubSub, $filter) {\n    //document.getElementById(\"report_hide\").style.display = 'none'; \n\t\t$scope.searchTitle = \"\";\n\n\n\t\t$scope.textAnalyt = {};\n\t\t$scope.textAnalyt.cnt = \"Кол-во\";\n\t\t$scope.textAnalyt.regtime = \"AVG Рег.\";\n\t\t$scope.textAnalyt.exectime = \"AVG Исп.\";\n\t\tUIService.bindUITools($scope);\n\n\t\t$scope.pubSubPublish = function(a, b) {\n\t\t\tPubSub.publish(a, b);\n\t\t}\n\t\t$scope.print_bpm_callback = function(params) {\n\t\t\tconsole.log('printCallBack', params);\n\t\t}\n\n\t\t$scope.edit = function edit() {\n\t\t\t$scope.editing = true;\n\t\t}\n\n\t\t$scope.setListOwnerFilter = function(code, doBind) {\n\t\t\t$scope.listOwnerCode = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\n\n\t\t$scope.setAnalyt = function(code, doBind) {\n\t\t\t$scope.analyt = code;\n\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\t\t}\n\n\n\t\t$scope.search = function(searchTitle) {\n\n\t\t\t$scope.searchTitle = searchTitle;\n\n\t\t\t$scope.bind();\n\n\t\t}\n\n\t\t$scope.parentCallBack = function(parent, user) {\n\t\t\t//alert(parent.current);\n\t\t\tparent.closeWithParams(parent.modals[parent.current], user);\n\n\t\t}\n\n\n\t\t$scope.parentChoose = function(parent, id) {\n\t\t\tparent.choose(id);\n\t\t\t$scope.searchText = \"\";\n\t\t}\n\n\t\t$scope.setListPeriodFilter = function(code, doBind) {\n\t\t\t$scope.listPeriodCode = code;\n\t\t\tvar x = Metronic.getIntervalByPeriodCode(code);\n\t\t\t$scope.begin_at = $filter('date')(x[0], \"yyyy-MM-dd\");\n\t\t\t$scope.end_at = $filter('date')(x[1], \"yyyy-MM-dd\");\n\t\t\tif (doBind) {\n\t\t\t\t$scope.bind();\n\t\t\t}\n\n\t\t}\n\t\t$scope.keyDown = function(e) {\n\t\t\tif ((e.altKey) \u0026\u0026 (e.shiftKey) \u0026\u0026 (e.keyCode == 83) \u0026\u0026 ($scope.editing)) {\n\t\t\t\t$scope.save();\n\t\t\t}\n\t\t};\n\n\t\t$scope.bind = function bind() {\n\n\t\t\tMetronic.startPageLoading();\n\t\t\turi = \"query/get?code=meiran_sql_users\u0026perpage=1\u0026page=1\u0026param1=\" + $scope.searchTitle + \"\u0026param2=\" + $scope.searchTitle;\n\t\t\tRestApiService.get(uri).\n\t\t\tsuccess(function(data) {\n\t\t\t\t// here the data from the api is assigned to a variable named users\n\n\t\t\t\t$scope.items = data.items;\n\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t\tPubSub.publish(\"bindBuComponents\", {});\n\t\t\t});\n\t\t\n      RestApiService.get(\"query/get?code=report2_sales_graph4_crm_fm\u0026param1=\" + $scope.begin_at + \"\u0026param2=\" + $scope.end_at+ \"\u0026param3=\" + $scope.begin_at+ \"\u0026param4=\" + $scope.end_at+ \"\u0026param5=\" + $scope.begin_at).\n\t\t\tsuccess(function(data) {\n\t\t\t\t$scope.data03 = data.items;\n\t\t\t\t$scope.getTotal = function(type) {\n                    var total = 0;\n                    angular.forEach($scope.data03, function(el) {\n                        total += parseInt(el[type],10);\n                    });\n                 return total;\n                };\n\n\t\t\t\t\n\t\t\t});\n\t  RestApiService.get('query/get?code=report2_sales_graph6_crm_fm').\n\t\t\tsuccess(function(data_total) {\n\t\t\t\t$scope.total1 = data_total.items[0].last_plan;\n\t\t\t\tMetronic.stopPageLoading();\n\t\t\t});\n\n\t\t}\n\t\t$scope.setListPeriodFilter(\"today\");\n\t\t$scope.setListOwnerFilter('all');\n\t\t$scope.setAnalyt(\"cnt\");\n\t\t$scope.bind();\n\n\t};\n\t\n\u003c/script\u003e\n\n\u003c!-- END MAIN CONTENT --\u003e","templateurl":"","title":"Остатки сим карт","updated_at":"2021-12-29 10:25:15","url":"/mfo/one_crm_sales_report_sim"}],"queries":[{"code":"meiran_test","created_at":"2021-09-21 17:21:01","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7058","is_auto":"1","sql_text":"select main.*, 1 as '_one', f11388.title as users_11388 from `meiran_test` main\n\n  \r\nleft join users f11388 on f11388.id=main.created_by   \n\n  %filter% %order% ","sys$uuid":"e34b6ac7-6c00-4adc-aac5-dbae06698d01","title":"meiran_test_crm_fm","updated_at":"2021-10-20 15:07:21"},{"code":"meiran_test_select","created_at":"2021-09-21 17:21:01","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7059","is_auto":"1","sql_text":"select main.id,main.code,main.title as name from `meiran_test` main %filter% %order% ","sys$uuid":"df338748-06cd-4420-9fb7-8c27a861a56f","title":"meiran_test_crm_fm","updated_at":"2021-09-28 17:30:04"},{"code":"meiran_sql_users","created_at":"2021-09-21 17:40:28","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7060","is_auto":"0","is_public":"0","sql_text":"select  main.jobtitle, main.title,main.id,main.avatar_url,main.email, main.created_at, main.updated_at from\nusers main\n%filter%\nand\n(\nmain.email like concat('%',?,'%')\nor\nmain.title like concat('%',?,'%')\n)","sys$uuid":"b1ff5539-941f-4c5a-b0d0-e4f1bc5bfef3","title":"meiran_sql_users","updated_at":"2021-09-21 17:40:28"},{"code":"meiran_sql_users1","created_at":"2021-09-21 17:59:04","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7061","is_auto":"0","is_public":"0","sql_text":"select  main.role_id, main.created_at, main.updated_at from\nuser_roles main\nwhere main.user_id = ?\n","sys$uuid":"811808c0-a87a-46e6-980e-3026f74d4412","title":"meiran_sql_users1","updated_at":"2021-09-22 11:50:35"},{"code":"meiran_sql_users_total","created_at":"2021-09-22 15:47:48","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7062","is_auto":"0","is_public":"0","sql_text":"select count(1) as total from\nuser_roles","sys$uuid":"f3545e0b-fc38-4442-992d-d2f92a375a28","title":"meiran_sql_users_total","updated_at":"2021-09-22 16:01:41"},{"code":"meiran_sql_users_total1","created_at":"2021-09-22 16:02:49","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7063","is_auto":"0","is_public":"0","sql_text":"select count(1) as total from\nusers","sys$uuid":"e4477265-8f21-4520-ab62-747898f59f61","title":"meiran_sql_users_total1","updated_at":"2021-09-22 16:02:49"},{"code":"ora_from_meiran","created_at":"2021-10-20 15:13:24","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7071","is_auto":"0","is_public":"0","sql_text":"select  main.jobtitle, main.title,main.id,main.avatar_url,main.email, main.created_at, main.updated_at from\nusers main\n%filter%\nand\n(\nmain.email like concat('%',?,'%')\nor\nmain.title like concat('%',?,'%')\n)","sys$uuid":"92c5efdb-f6fa-48f5-91b4-03542bb2d07e","title":"from Meiran to Ora","updated_at":"2021-10-20 15:13:24"},{"code":"meiran_main_accounts","created_at":"2021-10-21 10:30:02","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7072","is_auto":"0","is_public":"0","sql_text":"select main.id,\n\t   main.title,\n\t   main.iin,\n       cm.cont as mobile,\n       ce.cont as email,\n       main.bday\n  from accounts main\n  left join accountconts cm on cm.account_id = main.id and cm.cont_type_id = (select id from cont_types where code = 'mobile')\n  left join accountconts ce on ce.account_id = main.id and ce.cont_type_id = (select id from cont_types where code = 'email_priv')\n\n%filter%\n%order%","sys$uuid":"36e44a60-cf35-43f8-8ac8-2ceb72f8b816","title":"Meiran main page accounts","updated_at":"2021-10-21 10:30:02"},{"code":"ora_report1","created_at":"2021-11-04 15:30:52","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7078","is_auto":"0","is_public":"0","sql_text":"select  main.*,\r\ncase when card_avty_yn=1 then 'Есть' else 'Нет' end as active_card,\r\nSTR_TO_DATE(main.sell_ymd,'%Y%m%d') as sell_date,\r\nSTR_TO_DATE(main.avty_ymd,'%Y%m%d') as active_date,\r\ncase when mib_avty_yn=1 then 'Да' else 'Нет' end as mib_yn, \r\ncase when next_dscnt_yn=1 then 'Да' else 'Нет' end as next_yn,\r\nSTR_TO_DATE(main.calc_bgin_ymd,'%Y%m%d') as calc_bgin,\r\nSTR_TO_DATE(main.calc_end_ymd,'%Y%m%d') as calc_end\r\nfrom\r\ndamucrm.one_crm_abonent main\r\n%filter%\r\nand\r\nmain.bin_or_iin = ?","sys$uuid":"61ddcb64-d35c-440b-995b-bea23f1aff9a","title":"Для передачи клиента","updated_at":"2021-11-18 17:21:21"},{"code":"ora_client_log","created_at":"2021-11-05 14:33:32","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7079","is_auto":"0","is_public":"0","sql_text":"select \r\ncase \r\nwhen main.action = 'update' then 'изменение'\r\nwhen main.action = 'delete' then 'удаление'\r\nwhen main.action = 'insert' then 'новый' end as `_action`,\r\ne.title as _entity_title,\r\ncase when main.table_name = 'rest_services' then\r\n(select concat(code, ' / ', title) from rest_services where id=main.pk)\r\n when main.table_name = 'accounts' then\r\n(select concat('',title) from accounts where id=main.pk)\r\nwhen main.table_name = 'deals' then\r\n(select concat(title) from deals where id=main.pk) \r\nwhen main.table_name = 'tasks' then\r\n(select concat(title) from tasks where id=main.pk) \r\nwhen main.table_name = 'accountconts' then\r\n(select concat(cont) from accountconts where id=main.pk) \r\nwhen main.table_name = 'qol_docs' then\r\n(select concat(title) from qol_docs where id=main.pk)\r\nwhen main.table_name = 'qol_tasks' then\r\n(select concat(title) from qol_tasks where id=main.pk) \r\nelse null end _row_title,\r\n\r\nmain.*,u.title as _user_title from table_logs main\r\nleft join users u on main.user_id=u.id\r\nleft join entities e on e.code=main.table_name\r\n%filter%\r\n\r\nand exists(select 1 from users rr where rr.id= main.pk)\r\n%order%","sys$uuid":"bb88805a-4f29-4941-873c-0abe483d48f6","title":"Журнал изменений клиента","updated_at":"2021-11-05 14:48:43"},{"code":"ora_test","created_at":"2021-11-18 16:02:03","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7085","is_auto":"0","is_public":"0","sql_text":"select * from damucrm.one_crm_transaction","sys$uuid":"59f6a471-2855-45df-87fa-dc55d4ae9268","title":"ОРА Тест селекта","updated_at":"2021-11-18 16:02:03"},{"code":"main_page_client","created_at":"2021-11-18 16:17:29","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7086","is_auto":"0","is_public":"0","sql_text":"select  coalesce(main.cust_nm,'нет информации') cust_nm,coalesce(main.fmb_ph_num,'нет информации') fmb_ph_num,coalesce(main.prty,'нет информации') prty,\nmain.porty_yn,main.sell_ymd,main.avty_ymd,main.trf_nm,\nmain.card_avty_yn,main.srv_dvrcd,main.mib_avty_yn,main.next_pp_charge_date,main.dscnt_yn,main.lst_pp_charge_date,main.next_dscnt_yn,\nmain.tran_amt,\ncoalesce(main.bin_or_iin,'нет информации') bin_or_iin,main.calc_bgin_ymd,main.calc_end_ymd,main.cust_segm_nm,main.emp_yn,main.cust_attr_ymd,main.limit_dscnt,\nmain.sale_city,main.sale_place_urp,main.salesman,main.iccid,main.add_dscnt_ymd,main.del_dscnt_ymd,main.award_ymd,main.rchful_ymd,\nmain.salesman_phn_num,main.active_30days,main.dscnt_type,main.stus_msg_desc,\ncase when main.trf_nm = 'MFORTE_G' then 'Gold' when main.trf_nm = 'MFORTE_P' then 'Platinum' else 'Базовый' end as tarif_name,\ncase when card_avty_yn is null then 'Нет' else case when card_avty_yn=1 then 'Есть' else 'Нет' end end as active_card,\nDATE_FORMAT(STR_TO_DATE(main.sell_ymd,'%Y%m%d'),'%d.%m.%Y')  as sell_date,\nDATE_FORMAT(STR_TO_DATE(main.avty_ymd,'%Y%m%d'),'%d.%m.%Y')  as active_date,\ncase when mib_avty_yn is null then 'Нет' else case when mib_avty_yn=1 then 'Да' else 'Нет' end end as mib_yn, \ncase when next_dscnt_yn is null then 'Нет' else case when next_dscnt_yn=1 then 'Да' else 'Нет' end end as next_yn,\nDATE_FORMAT(STR_TO_DATE(main.calc_bgin_ymd,'%Y%m%d'),'%d.%m.%Y')  as calc_bgin,\nDATE_FORMAT(STR_TO_DATE(main.calc_end_ymd,'%Y%m%d'),'%d.%m.%Y')  as calc_end,\ncase when emp_yn is null then 'Нет' else case when emp_yn=1 then 'Да' else 'Нет' end end as is_emp_yn,\nDATE_FORMAT(STR_TO_DATE(main.cust_attr_ymd,'%Y%m%d'),'%d.%m.%Y')  as cust_attr_date,\ncase when STR_TO_DATE(main.avty_ymd,'%Y%m%d') \u003c CURRENT_DATE()  then 'Активирована' else 'Не активирована' end as akt_yn,\nDATE_FORMAT(STR_TO_DATE(main.del_dscnt_ymd,'%Y%m%d'),'%d.%m.%Y')  as del_dscnt_date, \nDATE_FORMAT(STR_TO_DATE(main.add_dscnt_ymd,'%Y%m%d'),'%d.%m.%Y')  as add_dscnt_date,\ncase when limit_dscnt is null then 'Нет' else case when limit_dscnt=1 then 'Да' else 'Нет' end end as limit_yn,\nDATE_FORMAT(STR_TO_DATE(main.award_ymd,'%Y%m%d'),'%d.%m.%Y')  as award_date, \nDATE_FORMAT(STR_TO_DATE(main.rchful_ymd,'%Y%m%d'),'%d.%m.%Y') as rchful_date,\nDATE_FORMAT(main.lst_pp_charge_date,'%d.%m.%Y') as lst_pp_charge_dt,\nDATE_FORMAT(main.next_pp_charge_date,'%d.%m.%Y') as next_pp_charge_dt,\ncase when dscnt_yn is null then 'Нет' else case when dscnt_yn=1 then 'Да' else 'Нет' end end as dscnt,\ncase when award_ymd is null then 'Нет' else 'Да' end as award_yn,\ncase when substr(active_30days,5,2) = '01' then 'Январь' \nwhen substr(active_30days,5,2) = '02' then 'Февраль' \nwhen substr(active_30days,5,2) = '03' then 'Март' \nwhen substr(active_30days,5,2) = '04' then 'Апрель' \nwhen substr(active_30days,5,2) = '05' then 'Май' \nwhen substr(active_30days,5,2) = '06' then 'Июнь' \nwhen substr(active_30days,5,2) = '07' then 'Июль' \nwhen substr(active_30days,5,2) = '08' then 'Август' \nwhen substr(active_30days,5,2) = '09' then 'Сентябрь' \nwhen substr(active_30days,5,2) = '10' then 'Октябрь' \nwhen substr(active_30days,5,2) = '11' then 'Ноябрь' \nwhen substr(active_30days,5,2) = '12' then 'Декабрь' \nend as aktiv_month\nfrom\ndamucrm.one_crm_abonent main\n%filter%\nand\n(\nmain.bin_or_iin  = ?\nor\nmain.fmb_ph_num  = ?\n)","sys$uuid":"4fd4446c-669f-4c7d-a8bf-33d7cf56712e","title":"Клиент на главной странице","updated_at":"2022-01-13 12:44:40"},{"code":"total_fn_number","created_at":"2021-11-18 17:09:37","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7087","is_auto":"0","is_public":"0","sql_text":"select count(*) as total from damucrm.one_crm_abonent oca #oct2 \r\nwhere STR_TO_DATE(oca.sell_ymd,'%Y%m%d') \u003c=  CURRENT_DATE() ","sys$uuid":"3a335f37-2d7c-4ab2-9bc6-c5c7547354e8","title":"Общее количество проданных номеров","updated_at":"2021-12-14 12:54:55"},{"code":"active_fn_number","created_at":"2021-11-18 17:13:15","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7088","is_auto":"0","is_public":"0","sql_text":"select value as total from \r\ndamucrm.one_crm_beeline_report t\r\nwhere t.sign_name =\r\n'3M база EOP'\r\nand t.date = (\r\nselect max(t1.date)\r\nfrom damucrm.one_crm_beeline_report t1\r\nwhere t.sign_name = t1.sign_name\r\n)","sys$uuid":"70d13f01-e88e-4686-b1b1-cdc74b3b0ed3","title":"Количество активных номеров","updated_at":"2021-12-24 17:41:06"},{"code":"ora_client_transation_by_period","created_at":"2021-11-18 17:26:11","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7089","is_auto":"0","is_public":"0","sql_text":"select oct2.*,\nSTR_TO_DATE(oct2.fct_tran_ymd,'%Y%m%d') as fct_tran_date ,\nSTR_TO_DATE(oct2.tran_ymd,'%Y%m%d') as tran_date\nfrom damucrm.one_crm_transaction oct2 \n%filter%\nand STR_TO_DATE(oct2.tran_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\nand bin_or_iin = ?\nand coalesce(upper(tran_desc),'') like upper(concat('%',?,'%'))\nand coalesce(sum_tran_kzt,0) between coalesce(?,0) and coalesce(?,9999999999999999999) ","sys$uuid":"683bf4a5-8e8a-45ea-9cb2-eac2ea2fd2a5","title":"Транзакции клиента за период","updated_at":"2022-01-17 10:56:00"},{"code":"cards_list_by_client","created_at":"2021-11-22 10:32:10","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7090","is_auto":"0","is_public":"0","sql_text":"select distinct card_msk_num from damucrm.one_crm_client_cards oc\n%filter%\nand bin_or_iin = ?\nand card_msk_num \u003c\u003e '******'\nand oc.card_stus_cd \u003c\u003e '9'\n","sys$uuid":"56097f67-7aec-48db-9a19-e8671944c51a","title":"Список Карт клиентов","updated_at":"2021-12-19 22:33:05"},{"code":"card_info_from_card_mask","created_at":"2021-11-22 12:27:31","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7091","is_auto":"0","is_public":"0","sql_text":"select distinct coalesce(oc.bin_or_iin,'нет информации') bin_or_iin,coalesce(doc_num,'нет информации') doc_num,coalesce(card_msk_num,'нет информации') card_msk_num,\ncoalesce(sal_num,'нет информации') sal_num,coalesce(curcd,'нет информации') curcd,\ncoalesce(prod_typ_cd,'нет информации') prod_typ_cd,acc_open_ymd,close_ymd,prod_typ_nm,lst_ses_ymdhms,mb_stus_cd,card_stus_cd,int_card_stus_cd,\ncoalesce(DATE_FORMAT(oc.acc_open_ymd,'%d.%m.%Y'),'нет информации') as open_date,\ncoalesce(DATE_FORMAT(oc.close_ymd,'%d.%m.%Y'),'нет информации') as close_date,\ncoalesce(DATE_FORMAT(STR_TO_DATE(CONCAT(SUBSTR(oc.lst_ses_ymdhms, 1, 8) , ' ', SUBSTR(oc.lst_ses_ymdhms, 9)) ,'%Y%m%d %H%i%s') ,\n'%d.%m.%Y %H:%i:%s'),'нет информации') last_date,\n(select src_nm from damucrm.one_crm_card_status occs  where occs.dict_nm = 'CARD_STUS_CD' and src_cd = oc.card_stus_cd) stus_nm,\ncase when oc.sal_num is null then 'нет информации' else oc.sal_num end as sl_nm\nfrom damucrm.one_crm_client_cards oc\n%filter%\nand bin_or_iin = ?\nand card_msk_num = ?\nand curcd = ?\nand oc.card_stus_cd \u003c\u003e '9'","sys$uuid":"f281d1cf-4189-41fb-b4f9-d23d569b3a50","title":"Информация из карты по маске карты","updated_at":"2022-01-14 16:32:33"},{"code":"report2_sales_crm_fm","created_at":"2021-11-29 11:01:34","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7092","is_auto":"0","is_public":"0","sql_text":"select  \nmain.fmb_ph_num,\nmain.cust_nm,\nmain.bin_or_iin,\nDATE_FORMAT(STR_TO_DATE(main.sell_ymd,'%Y%m%d'), '%d.%m.%Y') as sell_date,\nDATE_FORMAT(STR_TO_DATE(main.avty_ymd,'%Y%m%d'), '%d.%m.%Y') as active_date,\nmain.sale_city,\nmain.sale_place_urp,\nmain.salesman ,\nmain.salesman_phn_num ,\ncase when main.trf_nm = 'MFORTE_G' then 'Gold' when main.trf_nm = 'MFORTE_P' then 'Platinum' else 'Базовый' end as trf_nm,\nmain.porty_yn as type\nfrom\ndamucrm.one_crm_abonent main\n%filter%\nand main.fmb_ph_num like concat('%',?,'%')\nand upper(main.cust_nm) like upper(concat('%',?,'%'))\nand upper(main.bin_or_iin) like upper(concat('%',?,'%'))\nand upper(main.sale_city) like upper(concat('%',?,'%'))\nand upper(main.sale_place_urp) like upper(concat('%',?,'%'))\nand upper(main.salesman) like upper(concat('%',?,'%'))\nand upper(main.salesman_phn_num) like upper(concat('%',?,'%'))\nand STR_TO_DATE(main.sell_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\n","sys$uuid":"f7e32225-c30d-49da-9d89-68d5c3019489","title":"Sales report for CRM ForteMobile","updated_at":"2021-12-29 15:49:30"},{"code":"report2_sales_graph1_crm_fm","created_at":"2021-11-29 13:08:28","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7094","is_auto":"0","is_public":"0","sql_text":"select \n\nt.sale_city as title,\nROUND(100* count(1)/(select plan from damucrm.one_crm_sales_plan where name = t.sale_city\nand SUBSTR(DATE_FORMAT(base_ymd,'%Y%m%d'),1,6) = SUBSTR(t.sell_ymd,1,6)),2) as cnt\n\nfrom (\nselect \ncase when main.sale_city = 'Филиал АО ForteBank в г. Актау' then 'Актау'\n\t when main.sale_city = 'Актау' then 'Актау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Актобе' then 'Актобе'\n     when main.sale_city = 'Актобе' then 'Актобе'\n     when main.sale_city = 'Филиал АО ForteBank в г. Алматы' then 'Алматы'\n     when main.sale_city = 'Алматы' then 'Алматы'\n     when main.sale_city = 'Филиал АО ForteBank в г. Атырау' then 'Атырау'\n     when main.sale_city = 'Атырау' then 'Атырау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Екибастуз' then 'Екибастуз'\n     when main.sale_city = 'Екибастуз' then 'Екибастуз'\n     when main.sale_city = 'Филиал АО ForteBank в г. Караганда' then 'Караганда'\n     when main.sale_city = 'Караганда' then 'Караганда'\n     when main.sale_city = 'Филиал АО ForteBank в г. Каскелен' then 'Каскелен'\n     when main.sale_city = 'Каскелен' then 'Каскелен'\n     when main.sale_city = 'Филиал АО ForteBank в г. Кокшетау' then 'Кокшетау'\n     when main.sale_city = 'Кокшетау' then 'Кокшетау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Костанай' then 'Костанай'\n     when main.sale_city = 'Костанай' then 'Костанай'\n     when main.sale_city = 'Филиал АО ForteBank в г. Кызылорда' then 'Кызылорда'\n     when main.sale_city = 'Кызылорда' then 'Кызылорда'\n     when main.sale_city = 'Филиал АО ForteBank в г. Нур-Султан' then 'Нур-Султан'\n     when main.sale_city = 'Нур-Султан' then 'Нур-Султан'\n     when main.sale_city = 'Филиал АО ForteBank в г. Павлодар' then 'Павлодар'\n     when main.sale_city = 'Павлодар' then 'Павлодар'\n     when main.sale_city = 'Филиал АО ForteBank в г. Петропавловск' then 'Петропавловск'\n     when main.sale_city = 'Петропавловск' then 'Петропавловск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Семей' then 'Семей'\n     when main.sale_city = 'Семей' then 'Семей'\n     when main.sale_city = 'Филиал АО ForteBank в г. Талдыкорган' then 'Талдыкорган'\n     when main.sale_city = 'Талдыкорган' then 'Талдыкорган'\n     when main.sale_city = 'Филиал АО ForteBank в г. Тараз' then 'Тараз'\n     when main.sale_city = 'Тараз' then 'Тараз'\n     when main.sale_city = 'Филиал АО ForteBank в г. Туркестан' then 'Туркестан'\n     when main.sale_city = 'Туркестан' then 'Туркестан'\n     when main.sale_city = 'Филиал АО ForteBank в г. Уральск' then 'Уральск'\n     when main.sale_city = 'Уральск' then 'Уральск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Усть-Каменогорск' then 'Усть-Каменогорск'\n     when main.sale_city = 'Усть-Каменогорск' then 'Усть-Каменогорск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Шымкент' then 'Шымкент'\n     when main.sale_city = 'Шымкент' then 'Шымкент'\n     when main.sale_city = 'Dar - доставка' then 'ДАР'\n     when main.sale_city = 'Dar - доставка Нур-Султан' then 'ДАР'\n     when main.sale_city = 'ГБ Forte' then 'ГБ Forte'\n     when main.sale_city = 'Форте ГБ' then 'ГБ Forte'\n     when main.sale_city = 'Partner' then 'Партнер'\n     when main.sale_city = 'УРП Нурсая' then 'Нур-Султан'\nend as sale_city,\nmain.sell_ymd \n\nfrom\ndamucrm.one_crm_abonent main \nwhere main.sale_city != ''\nand STR_TO_DATE(main.sell_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\n) t\ngroup by t.sale_city\norder by count(1) desc","sys$uuid":"1d58e917-356d-4dc1-8efd-4fdaeeffbb6d","title":"Pie chart for report 2 sales for ForteMobile crm","updated_at":"2021-12-29 10:01:47"},{"code":"report2_sales_graph2_crm_fm","created_at":"2021-12-02 12:20:58","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7095","is_auto":"0","is_public":"0","sql_text":"select  \ncount(1) as cnt,\nmain.salesman as title\nfrom\ndamucrm.one_crm_abonent main\n%filter%\nand STR_TO_DATE(main.sell_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\ngroup by main.salesman\norder by count(1) desc","sys$uuid":"15b6527c-5b49-4050-943a-d0fc03159c74","title":"Report for sales by sales","updated_at":"2021-12-02 12:27:59"},{"code":"report2_sales_graph3_crm_fm","created_at":"2021-12-06 15:22:19","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7096","is_auto":"0","is_public":"0","sql_text":"select \n\nt.sale_city,\n(select plan from damucrm.one_crm_sales_plan where name = t.sale_city\nand SUBSTR(DATE_FORMAT(base_ymd,'%Y%m%d'),1,6) = SUBSTR(t.sell_ymd,1,6)) as plan,\ncount(1) as fact,\nROUND(100* count(1)/(select plan from damucrm.one_crm_sales_plan where name = t.sale_city\nand SUBSTR(DATE_FORMAT(base_ymd,'%Y%m%d'),1,6) = SUBSTR(t.sell_ymd,1,6)),2) as prc_done\n\nfrom (\nselect \ncase when main.sale_city = 'Филиал АО ForteBank в г. Актау' then 'Актау'\n\t when main.sale_city = 'Актау' then 'Актау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Актобе' then 'Актобе'\n     when main.sale_city = 'Актобе' then 'Актобе'\n     when main.sale_city = 'Филиал АО ForteBank в г. Алматы' then 'Алматы'\n     when main.sale_city = 'Алматы' then 'Алматы'\n     when main.sale_city = 'Филиал АО ForteBank в г. Атырау' then 'Атырау'\n     when main.sale_city = 'Атырау' then 'Атырау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Екибастуз' then 'Екибастуз'\n     when main.sale_city = 'Екибастуз' then 'Екибастуз'\n     when main.sale_city = 'Филиал АО ForteBank в г. Караганда' then 'Караганда'\n     when main.sale_city = 'Караганда' then 'Караганда'\n     when main.sale_city = 'Филиал АО ForteBank в г. Каскелен' then 'Каскелен'\n     when main.sale_city = 'Каскелен' then 'Каскелен'\n     when main.sale_city = 'Филиал АО ForteBank в г. Кокшетау' then 'Кокшетау'\n     when main.sale_city = 'Кокшетау' then 'Кокшетау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Костанай' then 'Костанай'\n     when main.sale_city = 'Костанай' then 'Костанай'\n     when main.sale_city = 'Филиал АО ForteBank в г. Кызылорда' then 'Кызылорда'\n     when main.sale_city = 'Кызылорда' then 'Кызылорда'\n     when main.sale_city = 'Филиал АО ForteBank в г. Нур-Султан' then 'Нур-Султан'\n     when main.sale_city = 'Нур-Султан' then 'Нур-Султан'\n     when main.sale_city = 'Филиал АО ForteBank в г. Павлодар' then 'Павлодар'\n     when main.sale_city = 'Павлодар' then 'Павлодар'\n     when main.sale_city = 'Филиал АО ForteBank в г. Петропавловск' then 'Петропавловск'\n     when main.sale_city = 'Петропавловск' then 'Петропавловск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Семей' then 'Семей'\n     when main.sale_city = 'Семей' then 'Семей'\n     when main.sale_city = 'Филиал АО ForteBank в г. Талдыкорган' then 'Талдыкорган'\n     when main.sale_city = 'Талдыкорган' then 'Талдыкорган'\n     when main.sale_city = 'Филиал АО ForteBank в г. Тараз' then 'Тараз'\n     when main.sale_city = 'Тараз' then 'Тараз'\n     when main.sale_city = 'Филиал АО ForteBank в г. Туркестан' then 'Туркестан'\n     when main.sale_city = 'Туркестан' then 'Туркестан'\n     when main.sale_city = 'Филиал АО ForteBank в г. Уральск' then 'Уральск'\n     when main.sale_city = 'Уральск' then 'Уральск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Усть-Каменогорск' then 'Усть-Каменогорск'\n     when main.sale_city = 'Усть-Каменогорск' then 'Усть-Каменогорск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Шымкент' then 'Шымкент'\n     when main.sale_city = 'Шымкент' then 'Шымкент'\n     when main.sale_city = 'Dar - доставка' then 'ДАР'\n     when main.sale_city = 'Dar - доставка Нур-Султан' then 'ДАР'\n     when main.sale_city = 'ГБ Forte' then 'ГБ Forte'\n     when main.sale_city = 'Форте ГБ' then 'ГБ Forte'\n     when main.sale_city = 'Partner' then 'Партнер'\n     when main.sale_city = 'УРП Нурсая' then 'Нур-Султан'\nend as sale_city,\nmain.sell_ymd \n\nfrom\ndamucrm.one_crm_abonent main \nwhere main.sale_city != ''\nand STR_TO_DATE(main.sell_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\n) t\ngroup by t.sale_city\norder by count(1) desc\n\n","sys$uuid":"d67407d2-a3bb-4e1b-83e2-1b339ccebe6f","title":"Продажи филиалов","updated_at":"2021-12-27 15:44:56"},{"code":"report2_sales_setup_plan_crm_fm","created_at":"2021-12-07 12:29:01","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7097","is_auto":"0","is_public":"0","sql_text":"select * from damucrm.one_crm_filial_plan1\nwhere base_ymd = ?\n-- where STR_TO_DATE(base_ymd,'%Y%m%d') = STR_TO_DATE(REPLACE(,'-',''),'%Y%m%d')\norder by title asc\n\n","sys$uuid":"1fde5a0a-6298-4480-9924-deda327e5fe7","title":"Настройка плана филиалов","updated_at":"2021-12-13 11:29:39"},{"code":"curcd_list_by_cards","created_at":"2021-12-19 19:19:17","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7111","is_auto":"0","is_public":"0","sql_text":"select distinct curcd from damucrm.one_crm_client_cards oc\n%filter%\nand card_msk_num = ?\nand card_msk_num \u003c\u003e '******'\nand oc.card_stus_cd \u003c\u003e '9'\n","sys$uuid":"29ae8d70-4627-49f6-9287-b675bdd491c8","title":"Список Валют по карте клиента","updated_at":"2021-12-19 20:55:46"},{"code":"user_name_from_id","created_at":"2021-12-21 10:15:36","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7114","is_auto":"0","is_public":"0","sql_text":"select title as nm from users\r\n%filter%\r\nand id = ?","sys$uuid":"0379ed15-9703-4540-b75f-2bd2160fead7","title":"Название пользователя по Идентификатору","updated_at":"2021-12-21 10:16:01"},{"code":"reqs_reason_from_id","created_at":"2021-12-21 11:17:37","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7115","is_auto":"0","is_public":"0","sql_text":"select title as nm from damucrm.one_crm_reqs_reason\r\n%filter%\r\nand id = ?","sys$uuid":"021866b1-fb2f-4fcd-aa55-b3dd91c4bd3d","title":"Название причины обращения по идентификатору","updated_at":"2021-12-21 11:17:37"},{"code":"abon_info_in_reqs","created_at":"2021-12-21 14:23:00","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7116","is_auto":"0","is_public":"0","sql_text":"select  main.*,\ncase when main.trf_nm = 'MFORTE_G' then 'Gold' when main.trf_nm = 'MFORTE_P' then 'Platinum' else 'Базовый' end as tarif_name,\ncase when card_avty_yn is null then 'Нет' else case when card_avty_yn=1 then 'Есть' else 'Нет' end end as active_card,\nDATE_FORMAT(STR_TO_DATE(main.sell_ymd,'%Y%m%d'),'%d.%m.%Y')  as sell_date,\nDATE_FORMAT(STR_TO_DATE(main.avty_ymd,'%Y%m%d'),'%d.%m.%Y')  as active_date,\ncase when mib_avty_yn is null then 'Нет' else case when mib_avty_yn=1 then 'Да' else 'Нет' end end as mib_yn, \ncase when next_dscnt_yn is null then 'Нет' else case when next_dscnt_yn=1 then 'Да' else 'Нет' end end as next_yn,\nDATE_FORMAT(STR_TO_DATE(main.calc_bgin_ymd,'%Y%m%d'),'%d.%m.%Y')  as calc_bgin,\nDATE_FORMAT(STR_TO_DATE(main.calc_end_ymd,'%Y%m%d'),'%d.%m.%Y')  as calc_end,\ncase when emp_yn is null then 'Нет' else case when emp_yn=1 then 'Да' else 'Нет' end end as is_emp_yn,\nDATE_FORMAT(STR_TO_DATE(main.cust_attr_ymd,'%Y%m%d'),'%d.%m.%Y')  as cust_attr_date,\ncase when STR_TO_DATE(main.avty_ymd,'%Y%m%d') \u003c CURRENT_DATE()  then 'Активирована' else 'Не активирована' end as akt_yn,\nDATE_FORMAT(STR_TO_DATE(main.del_dscnt_ymd,'%Y%m%d'),'%d.%m.%Y')  as del_dscnt_date, \nDATE_FORMAT(STR_TO_DATE(main.add_dscnt_ymd,'%Y%m%d'),'%d.%m.%Y')  as add_dscnt_date,\ncase when limit_dscnt is null then 'Нет' else case when limit_dscnt=1 then 'Да' else 'Нет' end end as limit_yn,\nDATE_FORMAT(STR_TO_DATE(main.award_ymd,'%Y%m%d'),'%d.%m.%Y')  as award_date, \nDATE_FORMAT(STR_TO_DATE(main.rchful_ymd,'%Y%m%d'),'%d.%m.%Y') as rchful_date,\ncase when dscnt_yn is null then 'Нет' else case when dscnt_yn=1 then 'Да' else 'Нет' end end as dscnt,\ncase when award_ymd is null then 'Нет' else 'Да' end as award_yn,\ncase when substr(active_30days,5,2) = '01' then 'Январь' \nwhen substr(active_30days,5,2) = '02' then 'Февраль' \nwhen substr(active_30days,5,2) = '03' then 'Март' \nwhen substr(active_30days,5,2) = '04' then 'Апрель' \nwhen substr(active_30days,5,2) = '05' then 'Май' \nwhen substr(active_30days,5,2) = '06' then 'Июнь' \nwhen substr(active_30days,5,2) = '07' then 'Июль' \nwhen substr(active_30days,5,2) = '08' then 'Август' \nwhen substr(active_30days,5,2) = '09' then 'Сентябрь' \nwhen substr(active_30days,5,2) = '10' then 'Октябрь' \nwhen substr(active_30days,5,2) = '11' then 'Ноябрь' \nwhen substr(active_30days,5,2) = '12' then 'Декабрь' \nend as aktiv_month\nfrom\ndamucrm.one_crm_abonent main\n%filter%\nand\n(\nmain.bin_or_iin  = ? \nor\nmain.fmb_ph_num  = ?\n)","sys$uuid":"8d55da35-9b0e-4cc9-8557-78a88a1d4899","title":"Информация об абонементе в обращениях","updated_at":"2021-12-23 14:15:53"},{"code":"report2_sales_graph4_crm_fm","created_at":"2021-12-21 15:47:41","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7117","is_auto":"0","is_public":"0","sql_text":"select  name as sale_city ,IFNULL(plan,0) as plan,\nIFNULL(( select ttt.cnt from (\n(select count(1) as cnt, t.sale_city from (\nselect \n substr(main.sell_ymd,5,2)\nas sell_ymd,\ncase when main.sale_city = 'Филиал АО ForteBank в г. Актау' then 'Актау'\n\t when main.sale_city = 'Актау' then 'Актау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Актобе' then 'Актобе'\n     when main.sale_city = 'Актобе' then 'Актобе'\n     when main.sale_city = 'Филиал АО ForteBank в г. Алматы' then 'Алматы'\n     when main.sale_city = 'Алматы' then 'Алматы'\n     when main.sale_city = 'Филиал АО ForteBank в г. Атырау' then 'Атырау'\n     when main.sale_city = 'Атырау' then 'Атырау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Екибастуз' then 'Екибастуз'\n     when main.sale_city = 'Екибастуз' then 'Екибастуз'\n     when main.sale_city = 'Филиал АО ForteBank в г. Караганда' then 'Караганда'\n     when main.sale_city = 'Караганда' then 'Караганда'\n     when main.sale_city = 'Филиал АО ForteBank в г. Каскелен' then 'Каскелен'\n     when main.sale_city = 'Каскелен' then 'Каскелен'\n     when main.sale_city = 'Филиал АО ForteBank в г. Кокшетау' then 'Кокшетау'\n     when main.sale_city = 'Кокшетау' then 'Кокшетау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Костанай' then 'Костанай'\n     when main.sale_city = 'Костанай' then 'Костанай'\n     when main.sale_city = 'Филиал АО ForteBank в г. Кызылорда' then 'Кызылорда'\n     when main.sale_city = 'Кызылорда' then 'Кызылорда'\n     when main.sale_city = 'Филиал АО ForteBank в г. Нур-Султан' then 'Нур-Султан'\n     when main.sale_city = 'Нур-Султан' then 'Нур-Султан'\n     when main.sale_city = 'Филиал АО ForteBank в г. Павлодар' then 'Павлодар'\n     when main.sale_city = 'Павлодар' then 'Павлодар'\n     when main.sale_city = 'Филиал АО ForteBank в г. Петропавловск' then 'Петропавловск'\n     when main.sale_city = 'Петропавловск' then 'Петропавловск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Семей' then 'Семей'\n     when main.sale_city = 'Семей' then 'Семей'\n     when main.sale_city = 'Филиал АО ForteBank в г. Талдыкорган' then 'Талдыкорган'\n     when main.sale_city = 'Талдыкорган' then 'Талдыкорган'\n     when main.sale_city = 'Филиал АО ForteBank в г. Тараз' then 'Тараз'\n     when main.sale_city = 'Тараз' then 'Тараз'\n     when main.sale_city = 'Филиал АО ForteBank в г. Туркестан' then 'Туркестан'\n     when main.sale_city = 'Туркестан' then 'Туркестан'\n     when main.sale_city = 'Филиал АО ForteBank в г. Уральск' then 'Уральск'\n     when main.sale_city = 'Уральск' then 'Уральск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Усть-Каменогорск' then 'Усть-Каменогорск'\n     when main.sale_city = 'Усть-Каменогорск' then 'Усть-Каменогорск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Шымкент' then 'Шымкент'\n     when main.sale_city = 'Шымкент' then 'Шымкент'\n     when main.sale_city = 'Dar - доставка' then 'ДАР'\n     when main.sale_city = 'Dar - доставка Нур-Султан' then 'ДАР'\n     when main.sale_city = 'ГБ Forte' then 'ГБ Forte'\n     when main.sale_city = 'Форте ГБ' then 'ГБ Forte'\n     when main.sale_city = 'Partner' then 'Партнер'\n     when main.sale_city = 'УРП Нурсая' then 'Нур-Султан'\nend as sale_city\nfrom\ndamucrm.one_crm_abonent main \nwhere main.sale_city != ''\nand STR_TO_DATE(main.sell_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\n) t\ngroup by \nt.sale_city)\n) ttt\nwhere ttt.sale_city = tt.name),0) as cnt_month_2,\n\n\nIFNULL(( select ttt.cnt from (\n(select count(1) as cnt, t.sale_city from (\nselect \n substr(main.sell_ymd,5,2)\nas sell_ymd,\ncase when main.sale_city = 'Филиал АО ForteBank в г. Актау' then 'Актау'\n\t when main.sale_city = 'Актау' then 'Актау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Актобе' then 'Актобе'\n     when main.sale_city = 'Актобе' then 'Актобе'\n     when main.sale_city = 'Филиал АО ForteBank в г. Алматы' then 'Алматы'\n     when main.sale_city = 'Алматы' then 'Алматы'\n     when main.sale_city = 'Филиал АО ForteBank в г. Атырау' then 'Атырау'\n     when main.sale_city = 'Атырау' then 'Атырау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Екибастуз' then 'Екибастуз'\n     when main.sale_city = 'Екибастуз' then 'Екибастуз'\n     when main.sale_city = 'Филиал АО ForteBank в г. Караганда' then 'Караганда'\n     when main.sale_city = 'Караганда' then 'Караганда'\n     when main.sale_city = 'Филиал АО ForteBank в г. Каскелен' then 'Каскелен'\n     when main.sale_city = 'Каскелен' then 'Каскелен'\n     when main.sale_city = 'Филиал АО ForteBank в г. Кокшетау' then 'Кокшетау'\n     when main.sale_city = 'Кокшетау' then 'Кокшетау'\n     when main.sale_city = 'Филиал АО ForteBank в г. Костанай' then 'Костанай'\n     when main.sale_city = 'Костанай' then 'Костанай'\n     when main.sale_city = 'Филиал АО ForteBank в г. Кызылорда' then 'Кызылорда'\n     when main.sale_city = 'Кызылорда' then 'Кызылорда'\n     when main.sale_city = 'Филиал АО ForteBank в г. Нур-Султан' then 'Нур-Султан'\n     when main.sale_city = 'Нур-Султан' then 'Нур-Султан'\n     when main.sale_city = 'Филиал АО ForteBank в г. Павлодар' then 'Павлодар'\n     when main.sale_city = 'Павлодар' then 'Павлодар'\n     when main.sale_city = 'Филиал АО ForteBank в г. Петропавловск' then 'Петропавловск'\n     when main.sale_city = 'Петропавловск' then 'Петропавловск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Семей' then 'Семей'\n     when main.sale_city = 'Семей' then 'Семей'\n     when main.sale_city = 'Филиал АО ForteBank в г. Талдыкорган' then 'Талдыкорган'\n     when main.sale_city = 'Талдыкорган' then 'Талдыкорган'\n     when main.sale_city = 'Филиал АО ForteBank в г. Тараз' then 'Тараз'\n     when main.sale_city = 'Тараз' then 'Тараз'\n     when main.sale_city = 'Филиал АО ForteBank в г. Туркестан' then 'Туркестан'\n     when main.sale_city = 'Туркестан' then 'Туркестан'\n     when main.sale_city = 'Филиал АО ForteBank в г. Уральск' then 'Уральск'\n     when main.sale_city = 'Уральск' then 'Уральск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Усть-Каменогорск' then 'Усть-Каменогорск'\n     when main.sale_city = 'Усть-Каменогорск' then 'Усть-Каменогорск'\n     when main.sale_city = 'Филиал АО ForteBank в г. Шымкент' then 'Шымкент'\n     when main.sale_city = 'Шымкент' then 'Шымкент'\n     when main.sale_city = 'Dar - доставка' then 'ДАР'\n     when main.sale_city = 'Dar - доставка Нур-Султан' then 'ДАР'\n     when main.sale_city = 'ГБ Forte' then 'ГБ Forte'\n     when main.sale_city = 'Форте ГБ' then 'ГБ Forte'\n     when main.sale_city = 'Partner' then 'Партнер'\n     when main.sale_city = 'УРП Нурсая' then 'Нур-Султан'\nend as sale_city\nfrom\ndamucrm.one_crm_abonent main \nwhere main.sale_city != ''\nand STR_TO_DATE(main.sell_ymd,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\n) t\ngroup by \nt.sale_city)\n) ttt\nwhere ttt.sale_city = tt.name),0) as cnt_month_1\n\n\nfrom damucrm.one_crm_sales_plan_sim tt\nwhere  tt.base_ymd = STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\n\n\n","sys$uuid":"c50bb192-28bb-4638-b867-b6f1188855d3","title":"Остатки сим карт","updated_at":"2021-12-29 10:10:52"},{"code":"phnList","created_at":"2021-12-23 12:07:25","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7118","is_auto":"0","is_public":"0","sql_text":"select fmb_ph_num,prty from (\r\nselect  distinct fmb_ph_num,prty\r\nfrom\r\ndamucrm.one_crm_abonent main\r\nwhere \r\nmain.bin_or_iin = ?\r\nunion \r\nselect  distinct fmb_ph_num,prty\r\nfrom\r\ndamucrm.one_crm_abonent main\r\nwhere \r\nmain.fmb_ph_num = ?\r\nunion \r\nselect  distinct main2.fmb_ph_num,main2.prty\r\nfrom\r\ndamucrm.one_crm_abonent main,\r\ndamucrm.one_crm_abonent main2\r\nwhere\r\nmain.bin_or_iin  = main2.bin_or_iin \r\nand\r\nmain.fmb_ph_num = ?\r\n) n \r\n%filter%\r\n%order%","sys$uuid":"5d870839-1088-4418-86aa-39fcf05403b6","title":"Список телефонных номеров","updated_at":"2021-12-29 12:27:00"},{"code":"phnInfo","created_at":"2021-12-23 12:19:23","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7119","is_auto":"0","is_public":"0","sql_text":"select  coalesce(main.cust_nm,'-') cust_nm,coalesce(main.fmb_ph_num,'-') fmb_ph_num,\ncoalesce(main.prty,'-') prty,coalesce(main.porty_yn,'-') porty_yn,sell_ymd\n,coalesce(main.avty_ymd,'-') avty_ymd,coalesce(main.trf_nm,'-') trf_nm,coalesce(main.card_avty_yn,'-') card_avty_yn,\ncoalesce(main.srv_dvrcd,'-') srv_dvrcd,\ncoalesce(main.mib_avty_yn,'-') mib_avty_yn,coalesce(main.next_pp_charge_date,'-') next_pp_charge_date,\ncoalesce(main.dscnt_yn,'-') dscnt_yn,coalesce(main.lst_pp_charge_date,'-') lst_pp_charge_date, coalesce(main.next_dscnt_yn,'-') next_dscnt_yn,\ncoalesce(main.tran_amt,'-') tran_amt,\ncoalesce(main.bin_or_iin,'-') bin_or_iin,coalesce(main.calc_bgin_ymd,'-') calc_bgin_ymd,\ncoalesce(main.calc_end_ymd,'-') calc_end_ymd,coalesce(main.cust_segm_nm,'-') cust_segm_nm,coalesce(main.emp_yn,'-') emp_yn,\ncoalesce(main.cust_attr_ymd,'-') cust_attr_ymd,\ncoalesce(main.limit_dscnt,'-') limit_dscnt,coalesce(main.sale_city,'-') sale_city,coalesce(main.sale_place_urp,'-') sale_place_urp,\ncoalesce(main.salesman,'-') salesman,\ncoalesce(main.iccid,'-') iccid,coalesce(main.add_dscnt_ymd,'-') add_dscnt_ymd,coalesce(main.del_dscnt_ymd,'-') del_dscnt_ymd,\ncoalesce(main.award_ymd,'-') award_ymd,\ncoalesce(main.rchful_ymd,'-') rchful_ymd,coalesce(main.salesman_phn_num,'-') salesman_phn_num,coalesce(main.active_30days,'-') active_30days,\ncoalesce(main.dscnt_type,'-') dscnt_type,\ncoalesce(main.stus_msg_desc,'-') stus_msg_desc,\ncase when main.trf_nm = 'MFORTE_G' then 'Gold' when main.trf_nm = 'MFORTE_P' then 'Platinum' else 'Базовый' end as tarif_name,\ncase when card_avty_yn is null then 'Нет' else case when card_avty_yn=1 then 'Есть' else 'Нет' end end as active_card,\nDATE_FORMAT(STR_TO_DATE(main.sell_ymd,'%Y%m%d'),'%d.%m.%Y')  as sell_date,\nDATE_FORMAT(STR_TO_DATE(main.avty_ymd,'%Y%m%d'),'%d.%m.%Y')  as active_date,\ncase when mib_avty_yn is null then 'Нет' else case when mib_avty_yn=1 then 'Да' else 'Нет' end end as mib_yn, \ncase when next_dscnt_yn is null then 'Нет' else case when next_dscnt_yn=1 then 'Да' else 'Нет' end end as next_yn,\nDATE_FORMAT(STR_TO_DATE(main.calc_bgin_ymd,'%Y%m%d'),'%d.%m.%Y')  as calc_bgin,\nDATE_FORMAT(STR_TO_DATE(main.calc_end_ymd,'%Y%m%d'),'%d.%m.%Y')  as calc_end,\ncase when emp_yn is null then 'Нет' else case when emp_yn=1 then 'Да' else 'Нет' end end as is_emp_yn,\nDATE_FORMAT(STR_TO_DATE(main.cust_attr_ymd,'%Y%m%d'),'%d.%m.%Y')  as cust_attr_date,\ncase when STR_TO_DATE(main.avty_ymd,'%Y%m%d') \u003c CURRENT_DATE()  then 'Активирована' else 'Не активирована' end as akt_yn,\nDATE_FORMAT(STR_TO_DATE(main.del_dscnt_ymd,'%Y%m%d'),'%d.%m.%Y')  as del_dscnt_date, \nDATE_FORMAT(STR_TO_DATE(main.add_dscnt_ymd,'%Y%m%d'),'%d.%m.%Y')  as add_dscnt_date,\ncase when limit_dscnt is null then 'Нет' else case when limit_dscnt=1 then 'Да' else 'Нет' end end as limit_yn,\nDATE_FORMAT(STR_TO_DATE(main.award_ymd,'%Y%m%d'),'%d.%m.%Y')  as award_date, \nDATE_FORMAT(STR_TO_DATE(main.rchful_ymd,'%Y%m%d'),'%d.%m.%Y') as rchful_date,\nDATE_FORMAT(main.lst_pp_charge_date,'%d.%m.%Y') as lst_pp_charge_dt,\nDATE_FORMAT(main.next_pp_charge_date,'%d.%m.%Y') as next_pp_charge_dt,\ncase when dscnt_yn is null then 'Нет' else case when dscnt_yn=1 then 'Да' else 'Нет' end end as dscnt,\ncase when limit_dscnt=1 then 'Да' else \ncase when award_ymd is null then 'Нет' else 'Да' end end as award_yn,\nreplace(FORMAT(tran_amt,0),',',' ') trs,\ncase when substr(active_30days,5,2) = '01' then 'Январь' \nwhen substr(active_30days,5,2) = '02' then 'Февраль' \nwhen substr(active_30days,5,2) = '03' then 'Март' \nwhen substr(active_30days,5,2) = '04' then 'Апрель' \nwhen substr(active_30days,5,2) = '05' then 'Май' \nwhen substr(active_30days,5,2) = '06' then 'Июнь' \nwhen substr(active_30days,5,2) = '07' then 'Июль' \nwhen substr(active_30days,5,2) = '08' then 'Август' \nwhen substr(active_30days,5,2) = '09' then 'Сентябрь' \nwhen substr(active_30days,5,2) = '10' then 'Октябрь' \nwhen substr(active_30days,5,2) = '11' then 'Ноябрь' \nwhen substr(active_30days,5,2) = '12' then 'Декабрь' \nend as aktiv_month\nfrom\ndamucrm.one_crm_abonent main\n%filter%\nand\nmain.fmb_ph_num = ?\nlimit 1 ","sys$uuid":"c3353316-b5ce-4982-89e5-f3c8a17f4c23","title":"Информация из тел номера","updated_at":"2022-01-17 10:06:05"},{"code":"discount_report","created_at":"2021-12-24 14:42:17","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7120","is_auto":"0","is_public":"0","sql_text":"select  \ncase when main.add_del = 'ADD' then 'Подключить' else 'Отключить' end as add_del,\nmain.fm_phn_num,\nDATE_FORMAT(date_time, '%d.%m.%Y %H:%m:%s') as date_time,\ncoalesce(main.user_cd,'system') as user_cd,\nmain.cust_nm,\nmain.bin_or_iin,\nreplace(FORMAT(tran_amt,0),',',' ') trs,\ncase when main.dscnt_type='MF_DSCRC1' then '50%' \nwhen main.dscnt_type='MF_DSCRC2' then '100%' else main.dscnt_type end as dscnt_type,\nmain.prty,\ncase when main.stus_msg_desc ='SUCCESS' then 'Успешно'\n                    else 'Не успешно' end as stus_msg_desc\nfrom\ndamucrm.one_crm_discount main\n%filter%\nand add_del like upper(concat('%',?,'%'))\nand dscnt_type like upper(concat('%',?,'%'))\nand stus_msg_desc like upper(concat('%',?,'%'))\nand main.fm_phn_num like upper(concat('%',?,'%'))\nand bin_or_iin like upper(concat('%',?,'%'))\nand DATE_FORMAT(main.date_time,'%Y%m%d')  between STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') and STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')","sys$uuid":"63199a6d-dad7-4b72-9c51-76efc22465ec","title":"Отчет по скидке","updated_at":"2022-01-25 15:41:05"},{"code":"report2_sales_graph5_crm_fm","created_at":"2021-12-24 15:39:06","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7121","is_auto":"0","is_public":"0","sql_text":"SELECT \n\"План\" as title,\nSUM(PLAN) as cnt\nFROM  damucrm.one_crm_sales_plan_sim t\nwhere  t.base_ymd = STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d')\nUNION ALL \nselect \n\"Факт\" as title,\ncount(1) as cnt\nfrom damucrm.one_crm_abonent main where\nSTR_TO_DATE(main.sell_ymd,'%Y%m%d')  between (STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') - INTERVAL 1 MONTH) and LAST_DAY((STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') - INTERVAL 1 MONTH))\n\nUNION ALL \nSELECT \n\"Среднедневные продажи\" as title,\n(select count(1) \nfrom damucrm.one_crm_abonent main where\nSTR_TO_DATE(main.sell_ymd,'%Y%m%d')  between (STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') - INTERVAL 1 MONTH) and LAST_DAY((STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') - INTERVAL 1 MONTH))\n)/(select count(1) as cnt from damucrm.calendar_rk rk\nwhere\nrk.dates between (STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') - INTERVAL 1 MONTH) \nand LAST_DAY((STR_TO_DATE(REPLACE(?,'-',''),'%Y%m%d') - INTERVAL 1 MONTH))\nand rk.id = 'w') as cnt\n","sys$uuid":"14a65a55-85ba-4163-9da9-8da5330a5644","title":"Report for sales by average sale","updated_at":"2021-12-27 16:01:24"},{"code":"report2_sales_graph6_crm_fm","created_at":"2021-12-29 10:23:05","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7132","is_auto":"0","is_public":"0","sql_text":"select max(base_ymd) as last_plan  from one_crm_sales_plan","sys$uuid":"4c9b99a0-1a50-4037-aea7-b6b2428a289c","title":"Report for last plan date","updated_at":"2021-12-29 10:23:05"},{"code":"main_page_phn_info","created_at":"2022-01-13 12:48:28","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7135","is_auto":"0","is_public":"0","sql_text":"select  coalesce(main.cust_nm,'нет информации') cust_nm,coalesce(main.fmb_ph_num,'нет информации') fmb_ph_num,\r\ncoalesce(main.prty,'нет информации') prty,coalesce(main.porty_yn,'нет информации') porty_yn,sell_ymd\r\n,coalesce(main.avty_ymd,'нет информации') avty_ymd,coalesce(main.trf_nm,'нет информации') trf_nm,coalesce(main.card_avty_yn,'нет информации') card_avty_yn,\r\ncoalesce(main.srv_dvrcd,'нет информации') srv_dvrcd,\r\ncoalesce(main.mib_avty_yn,'нет информации') mib_avty_yn,coalesce(main.next_pp_charge_date,'нет информации') next_pp_charge_date,\r\ncoalesce(main.dscnt_yn,'нет информации') dscnt_yn,coalesce(main.lst_pp_charge_date,'нет информации') lst_pp_charge_date, coalesce(main.next_dscnt_yn,'нет информации') next_dscnt_yn,\r\ncoalesce(main.tran_amt,'нет информации') tran_amt,\r\ncoalesce(main.bin_or_iin,'нет информации') bin_or_iin,coalesce(main.calc_bgin_ymd,'нет информации') calc_bgin_ymd,\r\ncoalesce(main.calc_end_ymd,'нет информации') calc_end_ymd,coalesce(main.cust_segm_nm,'нет информации') cust_segm_nm,coalesce(main.emp_yn,'нет информации') emp_yn,\r\ncoalesce(main.cust_attr_ymd,'нет информации') cust_attr_ymd,\r\ncoalesce(main.limit_dscnt,'нет информации') limit_dscnt,coalesce(main.sale_city,'нет информации') sale_city,coalesce(main.sale_place_urp,'нет информации') sale_place_urp,\r\ncoalesce(main.salesman,'нет информации') salesman,\r\ncoalesce(main.iccid,'нет информации') iccid,coalesce(main.add_dscnt_ymd,'нет информации') add_dscnt_ymd,coalesce(main.del_dscnt_ymd,'нет информации') del_dscnt_ymd,\r\ncoalesce(main.award_ymd,'нет информации') award_ymd,\r\ncoalesce(main.rchful_ymd,'нет информации') rchful_ymd,coalesce(main.salesman_phn_num,'нет информации') salesman_phn_num,coalesce(main.active_30days,'нет информации') active_30days,\r\ncoalesce(main.dscnt_type,'нет информации') dscnt_type,\r\ncoalesce(main.stus_msg_desc,'нет информации') stus_msg_desc,\r\ncase when main.trf_nm = 'MFORTE_G' then 'Gold' when main.trf_nm = 'MFORTE_P' then 'Platinum' else 'Базовый' end as tarif_name,\r\ncase when card_avty_yn is null then 'Нет' else case when card_avty_yn=1 then 'Есть' else 'Нет' end end as active_card,\r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.sell_ymd,'%Y%m%d'),'%d.%m.%Y') ,'нет информации') as sell_date,\r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.avty_ymd,'%Y%m%d'),'%d.%m.%Y') ,'нет информации') as active_date,\r\ncase when mib_avty_yn is null then 'Нет' else case when mib_avty_yn=1 then 'Да' else 'Нет' end end as mib_yn, \r\ncase when next_dscnt_yn is null then 'Нет' else case when next_dscnt_yn=1 then 'Да' else 'Нет' end end as next_yn,\r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.calc_bgin_ymd,'%Y%m%d'),'%d.%m.%Y'),'нет информации')  as calc_bgin,\r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.calc_end_ymd,'%Y%m%d'),'%d.%m.%Y') ,'нет информации') as calc_end,\r\ncase when emp_yn is null then 'Нет' else case when emp_yn=1 then 'Да' else 'Нет' end end as is_emp_yn,\r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.cust_attr_ymd,'%Y%m%d'),'%d.%m.%Y') ,'нет информации') as cust_attr_date,\r\ncase when STR_TO_DATE(main.avty_ymd,'%Y%m%d') \u003c CURRENT_DATE()  then 'Активирована' else 'Не активирована' end as akt_yn,\r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.del_dscnt_ymd,'%Y%m%d'),'%d.%m.%Y') ,'нет информации') as del_dscnt_date, \r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.add_dscnt_ymd,'%Y%m%d'),'%d.%m.%Y') ,'нет информации') as add_dscnt_date,\r\ncase when limit_dscnt is null then 'Нет' else case when limit_dscnt=1 then 'Да' else 'Нет' end end as limit_yn,\r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.award_ymd,'%Y%m%d'),'%d.%m.%Y'),'нет информации')  as award_date, \r\ncoalesce(DATE_FORMAT(STR_TO_DATE(main.rchful_ymd,'%Y%m%d'),'%d.%m.%Y'),'нет информации') as rchful_date,\r\ncoalesce(DATE_FORMAT(main.lst_pp_charge_date,'%d.%m.%Y'),'нет информации') as lst_pp_charge_dt,\r\ncoalesce(DATE_FORMAT(main.next_pp_charge_date,'%d.%m.%Y'),'нет информации') as next_pp_charge_dt,\r\ncase when dscnt_yn is null then 'Нет' else case when dscnt_yn=1 then 'Да' else 'Нет' end end as dscnt,\r\ncase when limit_dscnt=1 then 'Да' else \r\ncase when award_ymd is null then 'Нет' else 'Да' end end as award_yn,\r\ncoalesce(replace(FORMAT(tran_amt,0),',',' '),'нет информации') trs,\r\ncase when substr(active_30days,5,2) = '01' then 'Январь' \r\nwhen substr(active_30days,5,2) = '02' then 'Февраль' \r\nwhen substr(active_30days,5,2) = '03' then 'Март' \r\nwhen substr(active_30days,5,2) = '04' then 'Апрель' \r\nwhen substr(active_30days,5,2) = '05' then 'Май' \r\nwhen substr(active_30days,5,2) = '06' then 'Июнь' \r\nwhen substr(active_30days,5,2) = '07' then 'Июль' \r\nwhen substr(active_30days,5,2) = '08' then 'Август' \r\nwhen substr(active_30days,5,2) = '09' then 'Сентябрь' \r\nwhen substr(active_30days,5,2) = '10' then 'Октябрь' \r\nwhen substr(active_30days,5,2) = '11' then 'Ноябрь' \r\nwhen substr(active_30days,5,2) = '12' then 'Декабрь' \r\nend as aktiv_month\r\nfrom\r\ndamucrm.one_crm_abonent main\r\n%filter%\r\nand\r\nmain.fmb_ph_num = ?\r\nlimit 1 ","sys$uuid":"167ab63f-4bd1-43cf-afd9-5858d647265c","title":"информация из телефона","updated_at":"2022-01-13 12:50:19"},{"code":"list_account","created_at":"2022-01-17 01:35:05","created_by":"1","entity$code":"meiran_test","entity_id":"1082","id":"7136","is_auto":"0","is_public":"0","sql_text":"select distinct coalesce(at20num,'нет информации') at20num\nfrom damucrm.one_crm_client_cards oc\n%filter%\nand bin_or_iin = ?\nand card_msk_num = ?\nand curcd = ?\nand oc.card_stus_cd \u003c\u003e '9'\n\n","sys$uuid":"d99c3903-9038-4f32-9914-26150dbfd27d","title":"список счетов","updated_at":"2022-01-17 01:35:05"}],"table_parts":[],"validators":[]},"detail_code":"entities_export","object_type":"entity","object_version":"1.0"}]